function(){this._setTracksFinished(),this._clip=null;var t=this._doneCbs;if(t)for(var u=t.length,c=0;c<u;c++)t[c].call(this)},n.prototype._abortedCallback=function(){this._setTracksFinished();var t=this.animation,u=this._abortedCbs;if(t&&t.removeClip(this._clip),this._clip=null,u)for(var c=0;c<u.length;c++)u[c].call(this)},n.prototype._setTracksFinished=function(){for(var t=this._tracks,u=this._trackKeys,c=0;c<u.length;c++)t[u[c]].setFinished()},n.prototype._getAdditiveTrack=function(t){var u,c=this._additiveAnimators;if(c)for(var ee=0;ee<c.length;ee++){var te=c[ee].getTrack(t);te&&(u=te)}return u},n.prototype.start=function(t){if(!(this._started>0)){this._started=1;for(var u=this,c=[],ee=this._maxTime||0,te=0;te<this._trackKeys.length;te++){var ae=this._trackKeys[te],ne=this._tracks[ae],oe=this._getAdditiveTrack(ae),ie=ne.keyframes,se=ie.length;if(ne.prepare(ee,oe),ne.needsAnimate())if(!this._allowDiscrete&&ne.discrete){var ue=ie[se-1];ue&&(u._target[ne.propName]=ue.rawValue),ne.setFinished()}else c.push(ne)}if(c.length||this._force){var le=new Clip({life:ee,loop:this._loop,delay:this._delay||0,onframe:function(ce){u._started=2;var de=u._additiveAnimators;if(de){for(var fe=!1,pe=0;pe<de.length;pe++)if(de[pe]._clip){fe=!0;break}fe||(u._additiveAnimators=null)}for(var pe=0;pe<c.length;pe++)c[pe].step(u._target,ce);var me=u._onframeCbs;if(me)for(var pe=0;pe<me.length;pe++)me[pe](u._target,ce)},ondestroy:function(){u._doneCallback()}});this._clip=le,this.animation&&this.animation.addClip(le),t&&le.setEasing(t)}else this._doneCallback();return this}},n.prototype.stop=function(t){if(this._clip){var u=this._clip;t&&u.onframe(1),this._abortedCallback()}},n.prototype.delay=function(t){return this._delay=t,this},n.prototype.during=function(t){return t&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(t)),this},n.prototype.done=function(t){return t&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(t)),this},n.prototype.aborted=function(t){return t&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(t)),this},n.prototype.getClip=function(){return this._clip},n.prototype.getTrack=function(t){return this._tracks[t]},n.prototype.getTracks=function(){var t=this;return map$6(this._trackKeys,function(u){return t._tracks[u]})},n.prototype.stopTracks=function(t,u){if(!t.length||!this._clip)return!0;for(var c=this._tracks,ee=this._trackKeys,te=0;te<t.length;te++){var ae=c[t[te]];ae&&!ae.isFinished()&&(u?ae.step(this._target,1):this._started===1&&ae.step(this._target,0),ae.setFinished())}for(var ne=!0,te=0;te<ee.length;te++)if(!c[ee[te]].isFinished()){ne=!1;break}return ne&&this._abortedCallback(),ne},n.prototype.saveTo=function(t,u,c){if(t){u=u||this._trackKeys;for(var ee=0;ee<u.length;ee++){var te=u[ee],ae=this._tracks[te];if(!(!ae||ae.isFinished())){var ne=ae.keyframes,oe=ne[c?0:ne.length-1];oe&&(t[te]=cloneValue(oe.rawValue))}}}},n.prototype.__changeFinalValue=function(t,u){u=u||keys$2(t);for(var c=0;c<u.length;c++){var ee=u[c],te=this._tracks[ee];if(te){var ae=te.keyframes;if(ae.length>1){var ne=ae.pop();te.addKeyframe(ne.time,t[ee]),te.prepare(this._maxTime,te.getAdditiveTrack())}}}},n}();function getTime$1(){return new Date().getTime()}var Animation=function(n){__extends(t,n);function t(u){var c=n.call(this)||this;return c._running=!1,c._time=0,c._pausedTime=0,c._pauseStart=0,c._paused=!1,u=u||{},c.stage=u.stage||{},c}return t.prototype.addClip=function(u){u.animation&&this.removeClip(u),this._head?(this._tail.next=u,u.prev=this._tail,u.next=null,this._tail=u):this._head=this._tail=u,u.animation=this},t.prototype.addAnimator=function(u){u.animation=this;var c=u.getClip();c&&this.addClip(c)},t.prototype.removeClip=function(u){if(u.animation){var c=u.prev,ee=u.next;c?c.next=ee:this._head=ee,ee?ee.prev=c:this._tail=c,u.next=u.prev=u.animation=null}},t.prototype.removeAnimator=function(u){var c=u.getClip();c&&this.removeClip(c),u.animation=null},t.prototype.update=function(u){for(var c=getTime$1()-this._pausedTime,ee=c-this._time,te=this._head;te;){var ae=te.next,ne=te.step(c,ee);ne&&(te.ondestroy(),this.removeClip(te)),te=ae}this._time=c,u||(this.trigger("frame",ee),this.stage.update&&this.stage.update())},t.prototype._startLoop=function(){var u=this;this._running=!0;function c(){u._running&&(requestAnimationFrame(c),!u._paused&&u.update())}requestAnimationFrame(c)},t.prototype.start=function(){this._running||(this._time=getTime$1(),this._pausedTime=0,this._startLoop())},t.prototype.stop=function(){this._running=!1},t.prototype.pause=function(){this._paused||(this._pauseStart=getTime$1(),this._paused=!0)},t.prototype.resume=function(){this._paused&&(this._pausedTime+=getTime$1()-this._pauseStart,this._paused=!1)},t.prototype.clear=function(){for(var u=this._head;u;){var c=u.next;u.prev=u.next=u.animation=null,u=c}this._head=this._tail=null},t.prototype.isFinished=function(){return this._head==null},t.prototype.animate=function(u,c){c=c||{},this.start();var ee=new Animator(u,c.loop);return this.addAnimator(ee),ee},t}(Eventful),TOUCH_CLICK_DELAY=300,globalEventSupported=env.domSupported,localNativeListenerNames=function(){var n=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],t=["touchstart","touchend","touchmove"],u={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},c=map$6(n,function(ee){var te=ee.replace("mouse","pointer");return u.hasOwnProperty(te)?te:ee});return{mouse:n,touch:t,pointer:c}}(),globalNativeListenerNames={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]},wheelEventSupported=!1;function isPointerFromTouch(n){var t=n.pointerType;return t==="pen"||t==="touch"}function setTouchTimer(n){n.touching=!0,n.touchTimer!=null&&(clearTimeout(n.touchTimer),n.touchTimer=null),n.touchTimer=setTimeout(function(){n.touching=!1,n.touchTimer=null},700)}function markTouch(n){n&&(n.zrByTouch=!0)}function normalizeGlobalEvent(n,t){return normalizeEvent(n.dom,new FakeGlobalEvent(n,t),!0)}function isLocalEl(n,t){for(var u=t,c=!1;u&&u.nodeType!==9&&!(c=u.domBelongToZr||u!==t&&u===n.painterRoot);)u=u.parentNode;return c}var FakeGlobalEvent=function(){function n(t,u){this.stopPropagation=noop$1,this.stopImmediatePropagation=noop$1,this.preventDefault=noop$1,this.type=u.type,this.target=this.currentTarget=t.dom,this.pointerType=u.pointerType,this.clientX=u.clientX,this.clientY=u.clientY}return n}(),localDOMHandlers={mousedown:function(n){n=normalizeEvent(this.dom,n),this.__mayPointerCapture=[n.zrX,n.zrY],this.trigger("mousedown",n)},mousemove:function(n){n=normalizeEvent(this.dom,n);var t=this.__mayPointerCapture;t&&(n.zrX!==t[0]||n.zrY!==t[1])&&this.__togglePointerCapture(!0),this.trigger("mousemove",n)},mouseup:function(n){n=normalizeEvent(this.dom,n),this.__togglePointerCapture(!1),this.trigger("mouseup",n)},mouseout:function(n){n=normalizeEvent(this.dom,n);var t=n.toElement||n.relatedTarget;isLocalEl(this,t)||(this.__pointerCapturing&&(n.zrEventControl="no_globalout"),this.trigger("mouseout",n))},wheel:function(n){wheelEventSupported=!0,n=normalizeEvent(this.dom,n),this.trigger("mousewheel",n)},mousewheel:function(n){wheelEventSupported||(n=normalizeEvent(this.dom,n),this.trigger("mousewheel",n))},touchstart:function(n){n=normalizeEvent(this.dom,n),markTouch(n),this.__lastTouchMoment=new Date,this.handler.processGesture(n,"start"),localDOMHandlers.mousemove.call(this,n),localDOMHandlers.mousedown.call(this,n)},touchmove:function(n){n=normalizeEvent(this.dom,n),markTouch(n),this.handler.processGesture(n,"change"),localDOMHandlers.mousemove.call(this,n)},touchend:function(n){n=normalizeEvent(this.dom,n),markTouch(n),this.handler.processGesture(n,"end"),localDOMHandlers.mouseup.call(this,n),+new Date-+this.__lastTouchMoment<TOUCH_CLICK_DELAY&&localDOMHandlers.click.call(this,n)},pointerdown:function(n){localDOMHandlers.mousedown.call(this,n)},pointermove:function(n){isPointerFromTouch(n)||localDOMHandlers.mousemove.call(this,n)},pointerup:function(n){localDOMHandlers.mouseup.call(this,n)},pointerout:function(n){isPointerFromTouch(n)||localDOMHandlers.mouseout.call(this,n)}};each$3(["click","dblclick","contextmenu"],function(n){localDOMHandlers[n]=function(t){t=normalizeEvent(this.dom,t),this.trigger(n,t)}});var globalDOMHandlers={pointermove:function(n){isPointerFromTouch(n)||globalDOMHandlers.mousemove.call(this,n)},pointerup:function(n){globalDOMHandlers.mouseup.call(this,n)},mousemove:function(n){this.trigger("mousemove",n)},mouseup:function(n){var t=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",n),t&&(n.zrEventControl="only_globalout",this.trigger("mouseout",n))}};function mountLocalDOMEventListeners(n,t){var u=t.domHandlers;env.pointerEventsSupported?each$3(localNativeListenerNames.pointer,function(c){mountSingleDOMEventListener(t,c,function(ee){u[c].call(n,ee)})}):(env.touchEventsSupported&&each$3(localNativeListenerNames.touch,function(c){mountSingleDOMEventListener(t,c,function(ee){u[c].call(n,ee),setTouchTimer(t)})}),each$3(localNativeListenerNames.mouse,function(c){mountSingleDOMEventListener(t,c,function(ee){ee=getNativeEvent(ee),t.touching||u[c].call(n,ee)})}))}function mountGlobalDOMEventListeners(n,t){env.pointerEventsSupported?each$3(globalNativeListenerNames.pointer,u):env.touchEventsSupported||each$3(globalNativeListenerNames.mouse,u);function u(c){function ee(te){te=getNativeEvent(te),isLocalEl(n,te.target)||(te=normalizeGlobalEvent(n,te),t.domHandlers[c].call(n,te))}mountSingleDOMEventListener(t,c,ee,{capture:!0})}}function mountSingleDOMEventListener(n,t,u,c){n.mounted[t]=u,n.listenerOpts[t]=c,addEventListener(n.domTarget,t,u,c)}function unmountDOMEventListeners(n){var t=n.mounted;for(var u in t)t.hasOwnProperty(u)&&removeEventListener(n.domTarget,u,t[u],n.listenerOpts[u]);n.mounted={}}var DOMHandlerScope=function(){function n(t,u){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=t,this.domHandlers=u}return n}(),HandlerDomProxy=function(n){__extends(t,n);function t(u,c){var ee=n.call(this)||this;return ee.__pointerCapturing=!1,ee.dom=u,ee.painterRoot=c,ee._localHandlerScope=new DOMHandlerScope(u,localDOMHandlers),globalEventSupported&&(ee._globalHandlerScope=new DOMHandlerScope(document,globalDOMHandlers)),mountLocalDOMEventListeners(ee,ee._localHandlerScope),ee}return t.prototype.dispose=function(){unmountDOMEventListeners(this._localHandlerScope),globalEventSupported&&unmountDOMEventListeners(this._globalHandlerScope)},t.prototype.setCursor=function(u){this.dom.style&&(this.dom.style.cursor=u||"default")},t.prototype.__togglePointerCapture=function(u){if(this.__mayPointerCapture=null,globalEventSupported&&+this.__pointerCapturing^+u){this.__pointerCapturing=u;var c=this._globalHandlerScope;u?mountGlobalDOMEventListeners(this,c):unmountDOMEventListeners(c)}},t}(Eventful),dpr=1;env.hasGlobalWindow&&(dpr=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var devicePixelRatio=dpr,DARK_MODE_THRESHOLD=.4,DARK_LABEL_COLOR="#333",LIGHT_LABEL_COLOR="#ccc",LIGHTER_LABEL_COLOR="#eee",mIdentity=identity,EPSILON$1=5e-5;function isNotAroundZero(n){return n>EPSILON$1||n<-5e-5}var scaleTmp=[],tmpTransform=[],originTransform=create$3(),abs=Math.abs,Transformable=function(){function n(){}return n.prototype.getLocalTransform=function(t){return n.getLocalTransform(this,t)},n.prototype.setPosition=function(t){this.x=t[0],this.y=t[1]},n.prototype.setScale=function(t){this.scaleX=t[0],this.scaleY=t[1]},n.prototype.setSkew=function(t){this.skewX=t[0],this.skewY=t[1]},n.prototype.setOrigin=function(t){this.originX=t[0],this.originY=t[1]},n.prototype.needLocalTransform=function(){return isNotAroundZero(this.rotation)||isNotAroundZero(this.x)||isNotAroundZero(this.y)||isNotAroundZero(this.scaleX-1)||isNotAroundZero(this.scaleY-1)||isNotAroundZero(this.skewX)||isNotAroundZero(this.skewY)},n.prototype.updateTransform=function(){var t=this.parent&&this.parent.transform,u=this.needLocalTransform(),c=this.transform;if(!(u||t)){c&&(mIdentity(c),this.invTransform=null);return}c=c||create$3(),u?this.getLocalTransform(c):mIdentity(c),t&&(u?mul(c,t,c):copy(c,t)),this.transform=c,this._resolveGlobalScaleRatio(c)},n.prototype._resolveGlobalScaleRatio=function(t){var u=this.globalScaleRatio;if(u!=null&&u!==1){this.getGlobalScale(scaleTmp);var c=scaleTmp[0]<0?-1:1,ee=scaleTmp[1]<0?-1:1,te=((scaleTmp[0]-c)*u+c)/scaleTmp[0]||0,ae=((scaleTmp[1]-ee)*u+ee)/scaleTmp[1]||0;t[0]*=te,t[1]*=te,t[2]*=ae,t[3]*=ae}this.invTransform=this.invTransform||create$3(),invert(this.invTransform,t)},n.prototype.getComputedTransform=function(){for(var t=this,u=[];t;)u.push(t),t=t.parent;for(;t=u.pop();)t.updateTransform();return this.transform},n.prototype.setLocalTransform=function(t){if(t){var u=t[0]*t[0]+t[1]*t[1],c=t[2]*t[2]+t[3]*t[3],ee=Math.atan2(t[1],t[0]),te=Math.PI/2+ee-Math.atan2(t[3],t[2]);c=Math.sqrt(c)*Math.cos(te),u=Math.sqrt(u),this.skewX=te,this.skewY=0,this.rotation=-ee,this.x=+t[4],this.y=+t[5],this.scaleX=u,this.scaleY=c,this.originX=0,this.originY=0}},n.prototype.decomposeTransform=function(){if(this.transform){var t=this.parent,u=this.transform;t&&t.transform&&(t.invTransform=t.invTransform||create$3(),mul(tmpTransform,t.invTransform,u),u=tmpTransform);var c=this.originX,ee=this.originY;(c||ee)&&(originTransform[4]=c,originTransform[5]=ee,mul(tmpTransform,u,originTransform),tmpTransform[4]-=c,tmpTransform[5]-=ee,u=tmpTransform),this.setLocalTransform(u)}},n.prototype.getGlobalScale=function(t){var u=this.transform;return t=t||[],u?(t[0]=Math.sqrt(u[0]*u[0]+u[1]*u[1]),t[1]=Math.sqrt(u[2]*u[2]+u[3]*u[3]),u[0]<0&&(t[0]=-t[0]),u[3]<0&&(t[1]=-t[1]),t):(t[0]=1,t[1]=1,t)},n.prototype.transformCoordToLocal=function(t,u){var c=[t,u],ee=this.invTransform;return ee&&applyTransform$1(c,c,ee),c},n.prototype.transformCoordToGlobal=function(t,u){var c=[t,u],ee=this.transform;return ee&&applyTransform$1(c,c,ee),c},n.prototype.getLineScale=function(){var t=this.transform;return t&&abs(t[0]-1)>1e-10&&abs(t[3]-1)>1e-10?Math.sqrt(abs(t[0]*t[3]-t[2]*t[1])):1},n.prototype.copyTransform=function(t){copyTransform(this,t)},n.getLocalTransform=function(t,u){u=u||[];var c=t.originX||0,ee=t.originY||0,te=t.scaleX,ae=t.scaleY,ne=t.anchorX,oe=t.anchorY,ie=t.rotation||0,se=t.x,ue=t.y,le=t.skewX?Math.tan(t.skewX):0,ce=t.skewY?Math.tan(-t.skewY):0;if(c||ee||ne||oe){var de=c+ne,fe=ee+oe;u[4]=-de*te-le*fe*ae,u[5]=-fe*ae-ce*de*te}else u[4]=u[5]=0;return u[0]=te,u[3]=ae,u[1]=ce*te,u[2]=le*ae,ie&&rotate(u,u,ie),u[4]+=c+se,u[5]+=ee+ue,u},n.initDefaultProps=function(){var t=n.prototype;t.scaleX=t.scaleY=t.globalScaleRatio=1,t.x=t.y=t.originX=t.originY=t.skewX=t.skewY=t.rotation=t.anchorX=t.anchorY=0}(),n}(),TRANSFORMABLE_PROPS=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function copyTransform(n,t){for(var u=0;u<TRANSFORMABLE_PROPS.length;u++){var c=TRANSFORMABLE_PROPS[u];n[c]=t[c]}}var textWidthCache={};function getWidth(n,t){t=t||DEFAULT_FONT;var u=textWidthCache[t];u||(u=textWidthCache[t]=new LRU(500));var c=u.get(n);return c==null&&(c=platformApi.measureText(n,t).width,u.put(n,c)),c}function innerGetBoundingRect(n,t,u,c){var ee=getWidth(n,t),te=getLineHeight(t),ae=adjustTextX(0,ee,u),ne=adjustTextY(0,te,c),oe=new BoundingRect(ae,ne,ee,te);return oe}function getBoundingRect(n,t,u,c){var ee=((n||"")+"").split(`
`),te=ee.length;if(te===1)return innerGetBoundingRect(ee[0],t,u,c);for(var ae=new BoundingRect(0,0,0,0),ne=0;ne<ee.length;ne++){var oe=innerGetBoundingRect(ee[ne],t,u,c);ne===0?ae.copy(oe):ae.union(oe)}return ae}function adjustTextX(n,t,u){return u==="right"?n-=t:u==="center"&&(n-=t/2),n}function adjustTextY(n,t,u){return u==="middle"?n-=t/2:u==="bottom"&&(n-=t),n}function getLineHeight(n){return getWidth("å›½",n)}function parsePercent$1(n,t){return typeof n=="string"?n.lastIndexOf("%")>=0?parseFloat(n)/100*t:parseFloat(n):n}function calculateTextPosition(n,t,u){var c=t.position||"inside",ee=t.distance!=null?t.distance:5,te=u.height,ae=u.width,ne=te/2,oe=u.x,ie=u.y,se="left",ue="top";if(c instanceof Array)oe+=parsePercent$1(c[0],u.width),ie+=parsePercent$1(c[1],u.height),se=null,ue=null;else switch(c){case"left":oe-=ee,ie+=ne,se="right",ue="middle";break;case"right":oe+=ee+ae,ie+=ne,ue="middle";break;case"top":oe+=ae/2,ie-=ee,se="center",ue="bottom";break;case"bottom":oe+=ae/2,ie+=te+ee,se="center";break;case"inside":oe+=ae/2,ie+=ne,se="center",ue="middle";break;case"insideLeft":oe+=ee,ie+=ne,ue="middle";break;case"insideRight":oe+=ae-ee,ie+=ne,se="right",ue="middle";break;case"insideTop":oe+=ae/2,ie+=ee,se="center";break;case"insideBottom":oe+=ae/2,ie+=te-ee,se="center",ue="bottom";break;case"insideTopLeft":oe+=ee,ie+=ee;break;case"insideTopRight":oe+=ae-ee,ie+=ee,se="right";break;case"insideBottomLeft":oe+=ee,ie+=te-ee,ue="bottom";break;case"insideBottomRight":oe+=ae-ee,ie+=te-ee,se="right",ue="bottom";break}return n=n||{},n.x=oe,n.y=ie,n.align=se,n.verticalAlign=ue,n}var PRESERVED_NORMAL_STATE="__zr_normal__",PRIMARY_STATES_KEYS$1=TRANSFORMABLE_PROPS.concat(["ignore"]),DEFAULT_ANIMATABLE_MAP=reduce$4(TRANSFORMABLE_PROPS,function(n,t){return n[t]=!0,n},{ignore:!1}),tmpTextPosCalcRes={},tmpBoundingRect=new BoundingRect(0,0,0,0),Element=function(){function n(t){this.id=guid(),this.animators=[],this.currentStates=[],this.states={},this._init(t)}return n.prototype._init=function(t){this.attr(t)},n.prototype.drift=function(t,u,c){switch(this.draggable){case"horizontal":u=0;break;case"vertical":t=0;break}var ee=this.transform;ee||(ee=this.transform=[1,0,0,1,0,0]),ee[4]+=t,ee[5]+=u,this.decomposeTransform(),this.markRedraw()},n.prototype.beforeUpdate=function(){},n.prototype.afterUpdate=function(){},n.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},n.prototype.updateInnerText=function(t){var u=this._textContent;if(u&&(!u.ignore||t)){this.textConfig||(this.textConfig={});var c=this.textConfig,ee=c.local,te=u.innerTransformable,ae=void 0,ne=void 0,oe=!1;te.parent=ee?this:null;var ie=!1;if(te.copyTransform(u),c.position!=null){var se=tmpBoundingRect;c.layoutRect?se.copy(c.layoutRect):se.copy(this.getBoundingRect()),ee||se.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(tmpTextPosCalcRes,c,se):calculateTextPosition(tmpTextPosCalcRes,c,se),te.x=tmpTextPosCalcRes.x,te.y=tmpTextPosCalcRes.y,ae=tmpTextPosCalcRes.align,ne=tmpTextPosCalcRes.verticalAlign;var ue=c.origin;if(ue&&c.rotation!=null){var le=void 0,ce=void 0;ue==="center"?(le=se.width*.5,ce=se.height*.5):(le=parsePercent$1(ue[0],se.width),ce=parsePercent$1(ue[1],se.height)),ie=!0,te.originX=-te.x+le+(ee?0:se.x),te.originY=-te.y+ce+(ee?0:se.y)}}c.rotation!=null&&(te.rotation=c.rotation);var de=c.offset;de&&(te.x+=de[0],te.y+=de[1],ie||(te.originX=-de[0],te.originY=-de[1]));var fe=c.inside==null?typeof c.position=="string"&&c.position.indexOf("inside")>=0:c.inside,pe=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),me=void 0,ge=void 0,De=void 0;fe&&this.canBeInsideText()?(me=c.insideFill,ge=c.insideStroke,(me==null||me==="auto")&&(me=this.getInsideTextFill()),(ge==null||ge==="auto")&&(ge=this.getInsideTextStroke(me),De=!0)):(me=c.outsideFill,ge=c.outsideStroke,(me==null||me==="auto")&&(me=this.getOutsideFill()),(ge==null||ge==="auto")&&(ge=this.getOutsideStroke(me),De=!0)),me=me||"#000",(me!==pe.fill||ge!==pe.stroke||De!==pe.autoStroke||ae!==pe.align||ne!==pe.verticalAlign)&&(oe=!0,pe.fill=me,pe.stroke=ge,pe.autoStroke=De,pe.align=ae,pe.verticalAlign=ne,u.setDefaultTextStyle(pe)),u.__dirty|=REDRAW_BIT,oe&&u.dirtyStyle(!0)}},n.prototype.canBeInsideText=function(){return!0},n.prototype.getInsideTextFill=function(){return"#fff"},n.prototype.getInsideTextStroke=function(t){return"#000"},n.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?LIGHT_LABEL_COLOR:DARK_LABEL_COLOR},n.prototype.getOutsideStroke=function(t){var u=this.__zr&&this.__zr.getBackgroundColor(),c=typeof u=="string"&&parse$1(u);c||(c=[255,255,255,1]);for(var ee=c[3],te=this.__zr.isDarkMode(),ae=0;ae<3;ae++)c[ae]=c[ae]*ee+(te?0:255)*(1-ee);return c[3]=1,stringify$2(c,"rgba")},n.prototype.traverse=function(t,u){},n.prototype.attrKV=function(t,u){t==="textConfig"?this.setTextConfig(u):t==="textContent"?this.setTextContent(u):t==="clipPath"?this.setClipPath(u):t==="extra"?(this.extra=this.extra||{},extend(this.extra,u)):this[t]=u},n.prototype.hide=function(){this.ignore=!0,this.markRedraw()},n.prototype.show=function(){this.ignore=!1,this.markRedraw()},n.prototype.attr=function(t,u){if(typeof t=="string")this.attrKV(t,u);else if(isObject$3(t))for(var c=t,ee=keys$2(c),te=0;te<ee.length;te++){var ae=ee[te];this.attrKV(ae,t[ae])}return this.markRedraw(),this},n.prototype.saveCurrentToNormalState=function(t){this._innerSaveToNormal(t);for(var u=this._normalState,c=0;c<this.animators.length;c++){var ee=this.animators[c],te=ee.__fromStateTransition;if(!(ee.getLoop()||te&&te!==PRESERVED_NORMAL_STATE)){var ae=ee.targetName,ne=ae?u[ae]:u;ee.saveTo(ne)}}},n.prototype._innerSaveToNormal=function(t){var u=this._normalState;u||(u=this._normalState={}),t.textConfig&&!u.textConfig&&(u.textConfig=this.textConfig),this._savePrimaryToNormal(t,u,PRIMARY_STATES_KEYS$1)},n.prototype._savePrimaryToNormal=function(t,u,c){for(var ee=0;ee<c.length;ee++){var te=c[ee];t[te]!=null&&!(te in u)&&(u[te]=this[te])}},n.prototype.hasState=function(){return this.currentStates.length>0},n.prototype.getState=function(t){return this.states[t]},n.prototype.ensureState=function(t){var u=this.states;return u[t]||(u[t]={}),u[t]},n.prototype.clearStates=function(t){this.useState(PRESERVED_NORMAL_STATE,!1,t)},n.prototype.useState=function(t,u,c,ee){var te=t===PRESERVED_NORMAL_STATE,ae=this.hasState();if(!(!ae&&te)){var ne=this.currentStates,oe=this.stateTransition;if(!(indexOf$5(ne,t)>=0&&(u||ne.length===1))){var ie;if(this.stateProxy&&!te&&(ie=this.stateProxy(t)),ie||(ie=this.states&&this.states[t]),!ie&&!te){logError("State "+t+" not exists.");return}te||this.saveCurrentToNormalState(ie);var se=!!(ie&&ie.hoverLayer||ee);se&&this._toggleHoverLayerFlag(!0),this._applyStateObj(t,ie,this._normalState,u,!c&&!this.__inHover&&oe&&oe.duration>0,oe);var ue=this._textContent,le=this._textGuide;return ue&&ue.useState(t,u,c,se),le&&le.useState(t,u,c,se),te?(this.currentStates=[],this._normalState={}):u?this.currentStates.push(t):this.currentStates=[t],this._updateAnimationTargets(),this.markRedraw(),!se&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=-2),ie}}},n.prototype.useStates=function(t,u,c){if(!t.length)this.clearStates();else{var ee=[],te=this.currentStates,ae=t.length,ne=ae===te.length;if(ne){for(var oe=0;oe<ae;oe++)if(t[oe]!==te[oe]){ne=!1;break}}if(ne)return;for(var oe=0;oe<ae;oe++){var ie=t[oe],se=void 0;this.stateProxy&&(se=this.stateProxy(ie,t)),se||(se=this.states[ie]),se&&ee.push(se)}var ue=ee[ae-1],le=!!(ue&&ue.hoverLayer||c);le&&this._toggleHoverLayerFlag(!0);var ce=this._mergeStates(ee),de=this.stateTransition;this.saveCurrentToNormalState(ce),this._applyStateObj(t.join(","),ce,this._normalState,!1,!u&&!this.__inHover&&de&&de.duration>0,de);var fe=this._textContent,pe=this._textGuide;fe&&fe.useStates(t,u,le),pe&&pe.useStates(t,u,le),this._updateAnimationTargets(),this.currentStates=t.slice(),this.markRedraw(),!le&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=-2)}},n.prototype.isSilent=function(){for(var t=this.silent,u=this.parent;!t&&u;){if(u.silent){t=!0;break}u=u.parent}return t},n.prototype._updateAnimationTargets=function(){for(var t=0;t<this.animators.length;t++){var u=this.animators[t];u.targetName&&u.changeTarget(this[u.targetName])}},n.prototype.removeState=function(t){var u=indexOf$5(this.currentStates,t);if(u>=0){var c=this.currentStates.slice();c.splice(u,1),this.useStates(c)}},n.prototype.replaceState=function(t,u,c){var ee=this.currentStates.slice(),te=indexOf$5(ee,t),ae=indexOf$5(ee,u)>=0;te>=0?ae?ee.splice(te,1):ee[te]=u:c&&!ae&&ee.push(u),this.useStates(ee)},n.prototype.toggleState=function(t,u){u?this.useState(t,!0):this.removeState(t)},n.prototype._mergeStates=function(t){for(var u={},c,ee=0;ee<t.length;ee++){var te=t[ee];extend(u,te),te.textConfig&&(c=c||{},extend(c,te.textConfig))}return c&&(u.textConfig=c),u},n.prototype._applyStateObj=function(t,u,c,ee,te,ae){var ne=!(u&&ee);u&&u.textConfig?(this.textConfig=extend({},ee?this.textConfig:c.textConfig),extend(this.textConfig,u.textConfig)):ne&&c.textConfig&&(this.textConfig=c.textConfig);for(var oe={},ie=!1,se=0;se<PRIMARY_STATES_KEYS$1.length;se++){var ue=PRIMARY_STATES_KEYS$1[se],le=te&&DEFAULT_ANIMATABLE_MAP[ue];u&&u[ue]!=null?le?(ie=!0,oe[ue]=u[ue]):this[ue]=u[ue]:ne&&c[ue]!=null&&(le?(ie=!0,oe[ue]=c[ue]):this[ue]=c[ue])}if(!te)for(var se=0;se<this.animators.length;se++){var ce=this.animators[se],de=ce.targetName;ce.getLoop()||ce.__changeFinalValue(de?(u||c)[de]:u||c)}ie&&this._transitionState(t,oe,ae)},n.prototype._attachComponent=function(t){if(!(t.__zr&&!t.__hostTarget)&&t!==this){var u=this.__zr;u&&t.addSelfToZr(u),t.__zr=u,t.__hostTarget=this}},n.prototype._detachComponent=function(t){t.__zr&&t.removeSelfFromZr(t.__zr),t.__zr=null,t.__hostTarget=null},n.prototype.getClipPath=function(){return this._clipPath},n.prototype.setClipPath=function(t){this._clipPath&&this._clipPath!==t&&this.removeClipPath(),this._attachComponent(t),this._clipPath=t,this.markRedraw()},n.prototype.removeClipPath=function(){var t=this._clipPath;t&&(this._detachComponent(t),this._clipPath=null,this.markRedraw())},n.prototype.getTextContent=function(){return this._textContent},n.prototype.setTextContent=function(t){var u=this._textContent;u!==t&&(u&&u!==t&&this.removeTextContent(),t.innerTransformable=new Transformable,this._attachComponent(t),this._textContent=t,this.markRedraw())},n.prototype.setTextConfig=function(t){this.textConfig||(this.textConfig={}),extend(this.textConfig,t),this.markRedraw()},n.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},n.prototype.removeTextContent=function(){var t=this._textContent;t&&(t.innerTransformable=null,this._detachComponent(t),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},n.prototype.getTextGuideLine=function(){return this._textGuide},n.prototype.setTextGuideLine=function(t){this._textGuide&&this._textGuide!==t&&this.removeTextGuideLine(),this._attachComponent(t),this._textGuide=t,this.markRedraw()},n.prototype.removeTextGuideLine=function(){var t=this._textGuide;t&&(this._detachComponent(t),this._textGuide=null,this.markRedraw())},n.prototype.markRedraw=function(){this.__dirty|=REDRAW_BIT;var t=this.__zr;t&&(this.__inHover?t.refreshHover():t.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},n.prototype.dirty=function(){this.markRedraw()},n.prototype._toggleHoverLayerFlag=function(t){this.__inHover=t;var u=this._textContent,c=this._textGuide;u&&(u.__inHover=t),c&&(c.__inHover=t)},n.prototype.addSelfToZr=function(t){if(this.__zr!==t){this.__zr=t;var u=this.animators;if(u)for(var c=0;c<u.length;c++)t.animation.addAnimator(u[c]);this._clipPath&&this._clipPath.addSelfToZr(t),this._textContent&&this._textContent.addSelfToZr(t),this._textGuide&&this._textGuide.addSelfToZr(t)}},n.prototype.removeSelfFromZr=function(t){if(this.__zr){this.__zr=null;var u=this.animators;if(u)for(var c=0;c<u.length;c++)t.animation.removeAnimator(u[c]);this._clipPath&&this._clipPath.removeSelfFromZr(t),this._textContent&&this._textContent.removeSelfFromZr(t),this._textGuide&&this._textGuide.removeSelfFromZr(t)}},n.prototype.animate=function(t,u,c){var ee=t?this[t]:this,te=new Animator(ee,u,c);return t&&(te.targetName=t),this.addAnimator(te,t),te},n.prototype.addAnimator=function(t,u){var c=this.__zr,ee=this;t.during(function(){ee.updateDuringAnimation(u)}).done(function(){var te=ee.animators,ae=indexOf$5(te,t);ae>=0&&te.splice(ae,1)}),this.animators.push(t),c&&c.animation.addAnimator(t),c&&c.wakeUp()},n.prototype.updateDuringAnimation=function(t){this.markRedraw()},n.prototype.stopAnimation=function(t,u){for(var c=this.animators,ee=c.length,te=[],ae=0;ae<ee;ae++){var ne=c[ae];!t||t===ne.scope?ne.stop(u):te.push(ne)}return this.animators=te,this},n.prototype.animateTo=function(t,u,c){animateTo(this,t,u,c)},n.prototype.animateFrom=function(t,u,c){animateTo(this,t,u,c,!0)},n.prototype._transitionState=function(t,u,c,ee){for(var te=animateTo(this,u,c,ee),ae=0;ae<te.length;ae++)te[ae].__fromStateTransition=t},n.prototype.getBoundingRect=function(){return null},n.prototype.getPaintRect=function(){return null},n.initDefaultProps=function(){var t=n.prototype;t.type="element",t.name="",t.ignore=t.silent=t.isGroup=t.draggable=t.dragging=t.ignoreClip=t.__inHover=!1,t.__dirty=REDRAW_BIT;function u(c,ee,te,ae){Object.defineProperty(t,c,{get:function(){if(!this[ee]){var oe=this[ee]=[];ne(this,oe)}return this[ee]},set:function(oe){this[te]=oe[0],this[ae]=oe[1],this[ee]=oe,ne(this,oe)}});function ne(oe,ie){Object.defineProperty(ie,0,{get:function(){return oe[te]},set:function(se){oe[te]=se}}),Object.defineProperty(ie,1,{get:function(){return oe[ae]},set:function(se){oe[ae]=se}})}}Object.defineProperty&&(u("position","_legacyPos","x","y"),u("scale","_legacyScale","scaleX","scaleY"),u("origin","_legacyOrigin","originX","originY"))}(),n}();mixin(Element,Eventful);mixin(Element,Transformable);function animateTo(n,t,u,c,ee){u=u||{};var te=[];animateToShallow(n,"",n,t,u,c,te,ee);var ae=te.length,ne=!1,oe=u.done,ie=u.aborted,se=function(){ne=!0,ae--,ae<=0&&(ne?oe&&oe():ie&&ie())},ue=function(){ae--,ae<=0&&(ne?oe&&oe():ie&&ie())};ae||oe&&oe(),te.length>0&&u.during&&te[0].during(function(de,fe){u.during(fe)});for(var le=0;le<te.length;le++){var ce=te[le];se&&ce.done(se),ue&&ce.aborted(ue),u.force&&ce.duration(u.duration),ce.start(u.easing)}return te}function copyArrShallow(n,t,u){for(var c=0;c<u;c++)n[c]=t[c]}function is2DArray(n){return isArrayLike(n[0])}function copyValue(n,t,u){if(isArrayLike(t[u]))if(isArrayLike(n[u])||(n[u]=[]),isTypedArray(t[u])){var c=t[u].length;n[u].length!==c&&(n[u]=new t[u].constructor(c),copyArrShallow(n[u],t[u],c))}else{var ee=t[u],te=n[u],ae=ee.length;if(is2DArray(ee))for(var ne=ee[0].length,oe=0;oe<ae;oe++)te[oe]?copyArrShallow(te[oe],ee[oe],ne):te[oe]=Array.prototype.slice.call(ee[oe]);else copyArrShallow(te,ee,ae);te.length=ee.length}else n[u]=t[u]}function isValueSame(n,t){return n===t||isArrayLike(n)&&isArrayLike(t)&&is1DArraySame(n,t)}function is1DArraySame(n,t){var u=n.length;if(u!==t.length)return!1;for(var c=0;c<u;c++)if(n[c]!==t[c])return!1;return!0}function animateToShallow(n,t,u,c,ee,te,ae,ne){for(var oe=keys$2(c),ie=ee.duration,se=ee.delay,ue=ee.additive,le=ee.setToFinal,ce=!isObject$3(te),de=n.animators,fe=[],pe=0;pe<oe.length;pe++){var me=oe[pe],ge=c[me];if(ge!=null&&u[me]!=null&&(ce||te[me]))if(isObject$3(ge)&&!isArrayLike(ge)&&!isGradientObject(ge)){if(t){ne||(u[me]=ge,n.updateDuringAnimation(t));continue}animateToShallow(n,me,u[me],ge,ee,te&&te[me],ae,ne)}else fe.push(me);else ne||(u[me]=ge,n.updateDuringAnimation(t),fe.push(me))}var De=fe.length;if(!ue&&De)for(var Ce=0;Ce<de.length;Ce++){var we=de[Ce];if(we.targetName===t){var xe=we.stopTracks(fe);if(xe){var Re=indexOf$5(de,we);de.splice(Re,1)}}}if(ee.force||(fe=filter(fe,function(Ae){return!isValueSame(c[Ae],u[Ae])}),De=fe.length),De>0||ee.force&&!ae.length){var Be=void 0,Se=void 0,Te=void 0;if(ne){Se={},le&&(Be={});for(var Ce=0;Ce<De;Ce++){var me=fe[Ce];Se[me]=u[me],le?Be[me]=c[me]:u[me]=c[me]}}else if(le){Te={};for(var Ce=0;Ce<De;Ce++){var me=fe[Ce];Te[me]=cloneValue(u[me]),copyValue(u,c,me)}}var we=new Animator(u,!1,!1,ue?filter(de,function(he){return he.targetName===t}):null);we.targetName=t,ee.scope&&(we.scope=ee.scope),le&&Be&&we.whenWithKeys(0,Be,fe),Te&&we.whenWithKeys(0,Te,fe),we.whenWithKeys(ie??500,ne?Se:c,fe).delay(se||0),n.addAnimator(we,t),ae.push(we)}}var Group=function(n){__extends(t,n);function t(u){var c=n.call(this)||this;return c.isGroup=!0,c._children=[],c.attr(u),c}return t.prototype.childrenRef=function(){return this._children},t.prototype.children=function(){return this._children.slice()},t.prototype.childAt=function(u){return this._children[u]},t.prototype.childOfName=function(u){for(var c=this._children,ee=0;ee<c.length;ee++)if(c[ee].name===u)return c[ee]},t.prototype.childCount=function(){return this._children.length},t.prototype.add=function(u){return u&&u!==this&&u.parent!==this&&(this._children.push(u),this._doAdd(u)),this},t.prototype.addBefore=function(u,c){if(u&&u!==this&&u.parent!==this&&c&&c.parent===this){var ee=this._children,te=ee.indexOf(c);te>=0&&(ee.splice(te,0,u),this._doAdd(u))}return this},t.prototype.replace=function(u,c){var ee=indexOf$5(this._children,u);return ee>=0&&this.replaceAt(c,ee),this},t.prototype.replaceAt=function(u,c){var ee=this._children,te=ee[c];if(u&&u!==this&&u.parent!==this&&u!==te){ee[c]=u,te.parent=null;var ae=this.__zr;ae&&te.removeSelfFromZr(ae),this._doAdd(u)}return this},t.prototype._doAdd=function(u){u.parent&&u.parent.remove(u),u.parent=this;var c=this.__zr;c&&c!==u.__zr&&u.addSelfToZr(c),c&&c.refresh()},t.prototype.remove=function(u){var c=this.__zr,ee=this._children,te=indexOf$5(ee,u);return te<0?this:(ee.splice(te,1),u.parent=null,c&&u.removeSelfFromZr(c),c&&c.refresh(),this)},t.prototype.removeAll=function(){for(var u=this._children,c=this.__zr,ee=0;ee<u.length;ee++){var te=u[ee];c&&te.removeSelfFromZr(c),te.parent=null}return u.length=0,this},t.prototype.eachChild=function(u,c){for(var ee=this._children,te=0;te<ee.length;te++){var ae=ee[te];u.call(c,ae,te)}return this},t.prototype.traverse=function(u,c){for(var ee=0;ee<this._children.length;ee++){var te=this._children[ee],ae=u.call(c,te);te.isGroup&&!ae&&te.traverse(u,c)}return this},t.prototype.addSelfToZr=function(u){n.prototype.addSelfToZr.call(this,u);for(var c=0;c<this._children.length;c++){var ee=this._children[c];ee.addSelfToZr(u)}},t.prototype.removeSelfFromZr=function(u){n.prototype.removeSelfFromZr.call(this,u);for(var c=0;c<this._children.length;c++){var ee=this._children[c];ee.removeSelfFromZr(u)}},t.prototype.getBoundingRect=function(u){for(var c=new BoundingRect(0,0,0,0),ee=u||this._children,te=[],ae=null,ne=0;ne<ee.length;ne++){var oe=ee[ne];if(!(oe.ignore||oe.invisible)){var ie=oe.getBoundingRect(),se=oe.getLocalTransform(te);se?(BoundingRect.applyTransform(c,ie,se),ae=ae||c.clone(),ae.union(c)):(ae=ae||ie.clone(),ae.union(ie))}}return ae||c},t}(Element);Group.prototype.type="group";/*!
* ZRender, a high performance 2d drawing library.
*
* Copyright (c) 2013, Baidu Inc.
* All rights reserved.
*
* LICENSE
* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
*/var painterCtors={},instances$1={};function delInstance(n){delete instances$1[n]}function isDarkMode(n){if(!n)return!1;if(typeof n=="string")return lum(n,1)<DARK_MODE_THRESHOLD;if(n.colorStops){for(var t=n.colorStops,u=0,c=t.length,ee=0;ee<c;ee++)u+=lum(t[ee].color,1);return u/=c,u<DARK_MODE_THRESHOLD}return!1}var ZRender=function(){function n(t,u,c){var ee=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,c=c||{},this.dom=u,this.id=t;var te=new Storage,ae=c.renderer||"canvas";painterCtors[ae]||(ae=keys$2(painterCtors)[0]),c.useDirtyRect=c.useDirtyRect==null?!1:c.useDirtyRect;var ne=new painterCtors[ae](u,te,c,t),oe=c.ssr||ne.ssrOnly;this.storage=te,this.painter=ne;var ie=!env.node&&!env.worker&&!oe?new HandlerDomProxy(ne.getViewportRoot(),ne.root):null,se=c.useCoarsePointer,ue=se==null||se==="auto"?env.touchEventsSupported:!!se,le=44,ce;ue&&(ce=retrieve2(c.pointerSize,le)),this.handler=new Handler(te,ne,ie,ne.root,ce),this.animation=new Animation({stage:{update:oe?null:function(){return ee._flush(!0)}}}),oe||this.animation.start()}return n.prototype.add=function(t){this._disposed||!t||(this.storage.addRoot(t),t.addSelfToZr(this),this.refresh())},n.prototype.remove=function(t){this._disposed||!t||(this.storage.delRoot(t),t.removeSelfFromZr(this),this.refresh())},n.prototype.configLayer=function(t,u){this._disposed||(this.painter.configLayer&&this.painter.configLayer(t,u),this.refresh())},n.prototype.setBackgroundColor=function(t){this._disposed||(this.painter.setBackgroundColor&&this.painter.setBackgroundColor(t),this.refresh(),this._backgroundColor=t,this._darkMode=isDarkMode(t))},n.prototype.getBackgroundColor=function(){return this._backgroundColor},n.prototype.setDarkMode=function(t){this._darkMode=t},n.prototype.isDarkMode=function(){return this._darkMode},n.prototype.refreshImmediately=function(t){this._disposed||(t||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1)},n.prototype.refresh=function(){this._disposed||(this._needsRefresh=!0,this.animation.start())},n.prototype.flush=function(){this._disposed||this._flush(!1)},n.prototype._flush=function(t){var u,c=getTime$1();this._needsRefresh&&(u=!0,this.refreshImmediately(t)),this._needsRefreshHover&&(u=!0,this.refreshHoverImmediately());var ee=getTime$1();u?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:ee-c})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},n.prototype.setSleepAfterStill=function(t){this._sleepAfterStill=t},n.prototype.wakeUp=function(){this._disposed||(this.animation.start(),this._stillFrameAccum=0)},n.prototype.refreshHover=function(){this._needsRefreshHover=!0},n.prototype.refreshHoverImmediately=function(){this._disposed||(this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.getType()==="canvas"&&this.painter.refreshHover())},n.prototype.resize=function(t){this._disposed||(t=t||{},this.painter.resize(t.width,t.height),this.handler.resize())},n.prototype.clearAnimation=function(){this._disposed||this.animation.clear()},n.prototype.getWidth=function(){if(!this._disposed)return this.painter.getWidth()},n.prototype.getHeight=function(){if(!this._disposed)return this.painter.getHeight()},n.prototype.setCursorStyle=function(t){this._disposed||this.handler.setCursorStyle(t)},n.prototype.findHover=function(t,u){if(!this._disposed)return this.handler.findHover(t,u)},n.prototype.on=function(t,u,c){return this._disposed||this.handler.on(t,u,c),this},n.prototype.off=function(t,u){this._disposed||this.handler.off(t,u)},n.prototype.trigger=function(t,u){this._disposed||this.handler.trigger(t,u)},n.prototype.clear=function(){if(!this._disposed){for(var t=this.storage.getRoots(),u=0;u<t.length;u++)t[u]instanceof Group&&t[u].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()}},n.prototype.dispose=function(){this._disposed||(this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,this._disposed=!0,delInstance(this.id))},n}();function init$1(n,t){var u=new ZRender(guid(),n,t);return instances$1[u.id]=u,u}function registerPainter(n,t){painterCtors[n]=t}var ssrDataGetter;function getElementSSRData(n){if(typeof ssrDataGetter=="function")return ssrDataGetter(n)}function registerSSRDataGetter(n){ssrDataGetter=n}var RADIAN_EPSILON=1e-4,ROUND_SUPPORTED_PRECISION_MAX=20;function _trim(n){return n.replace(/^\s+|\s+$/g,"")}function linearMap(n,t,u,c){var ee=t[0],te=t[1],ae=u[0],ne=u[1],oe=te-ee,ie=ne-ae;if(oe===0)return ie===0?ae:(ae+ne)/2;if(c)if(oe>0){if(n<=ee)return ae;if(n>=te)return ne}else{if(n>=ee)return ae;if(n<=te)return ne}else{if(n===ee)return ae;if(n===te)return ne}return(n-ee)/oe*ie+ae}function parsePercent(n,t){switch(n){case"center":case"middle":n="50%";break;case"left":case"top":n="0%";break;case"right":case"bottom":n="100%";break}return isString(n)?_trim(n).match(/%$/)?parseFloat(n)/100*t:parseFloat(n):n==null?NaN:+n}function round$2(n,t,u){return t==null&&(t=10),t=Math.min(Math.max(0,t),ROUND_SUPPORTED_PRECISION_MAX),n=(+n).toFixed(t),u?n:+n}function getPrecision(n){if(n=+n,isNaN(n))return 0;if(n>1e-14){for(var t=1,u=0;u<15;u++,t*=10)if(Math.round(n*t)/t===n)return u}return getPrecisionSafe(n)}function getPrecisionSafe(n){var t=n.toString().toLowerCase(),u=t.indexOf("e"),c=u>0?+t.slice(u+1):0,ee=u>0?u:t.length,te=t.indexOf("."),ae=te<0?0:ee-1-te;return Math.max(0,ae-c)}function getPixelPrecision(n,t){var u=Math.log,c=Math.LN10,ee=Math.floor(u(n[1]-n[0])/c),te=Math.round(u(Math.abs(t[1]-t[0]))/c),ae=Math.min(Math.max(-ee+te,0),20);return isFinite(ae)?ae:20}function addSafe(n,t){var u=Math.max(getPrecision(n),getPrecision(t)),c=n+t;return u>ROUND_SUPPORTED_PRECISION_MAX?c:round$2(c,u)}function remRadian(n){var t=Math.PI*2;return(n%t+t)%t}function isRadianAroundZero(n){return n>-1e-4&&n<RADIAN_EPSILON}var TIME_REG=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function parseDate(n){if(n instanceof Date)return n;if(isString(n)){var t=TIME_REG.exec(n);if(!t)return new Date(NaN);if(t[8]){var u=+t[4]||0;return t[8].toUpperCase()!=="Z"&&(u-=+t[8].slice(0,3)),new Date(Date.UTC(+t[1],+(t[2]||1)-1,+t[3]||1,u,+(t[5]||0),+t[6]||0,t[7]?+t[7].substring(0,3):0))}else return new Date(+t[1],+(t[2]||1)-1,+t[3]||1,+t[4]||0,+(t[5]||0),+t[6]||0,t[7]?+t[7].substring(0,3):0)}else if(n==null)return new Date(NaN);return new Date(Math.round(n))}function quantity(n){return Math.pow(10,quantityExponent(n))}function quantityExponent(n){if(n===0)return 0;var t=Math.floor(Math.log(n)/Math.LN10);return n/Math.pow(10,t)>=10&&t++,t}function nice(n,t){var u=quantityExponent(n),c=Math.pow(10,u),ee=n/c,te;return ee<1.5?te=1:ee<2.5?te=2:ee<4?te=3:ee<7?te=5:te=10,n=te*c,u>=-20?+n.toFixed(u<0?-u:0):n}function numericToNumber(n){var t=parseFloat(n);return t==n&&(t!==0||!isString(n)||n.indexOf("x")<=0)?t:NaN}function isNumeric(n){return!isNaN(numericToNumber(n))}function getRandomIdBase(){return Math.round(Math.random()*9)}function getGreatestCommonDividor(n,t){return t===0?n:getGreatestCommonDividor(t,n%t)}function getLeastCommonMultiple(n,t){return n==null?t:t==null?n:n*t/getGreatestCommonDividor(n,t)}function throwError(n){throw new Error(n)}function interpolateNumber(n,t,u){return(t-n)*u+n}var DUMMY_COMPONENT_NAME_PREFIX="series\0",INTERNAL_COMPONENT_ID_PREFIX="\0_ec_\0";function normalizeToArray(n){return n instanceof Array?n:n==null?[]:[n]}function defaultEmphasis(n,t,u){if(n){n[t]=n[t]||{},n.emphasis=n.emphasis||{},n.emphasis[t]=n.emphasis[t]||{};for(var c=0,ee=u.length;c<ee;c++){var te=u[c];!n.emphasis[t].hasOwnProperty(te)&&n[t].hasOwnProperty(te)&&(n.emphasis[t][te]=n[t][te])}}}var TEXT_STYLE_OPTIONS=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function getDataItemValue(n){return isObject$3(n)&&!isArray$6(n)&&!(n instanceof Date)?n.value:n}function isDataItemOption(n){return isObject$3(n)&&!(n instanceof Array)}function mappingToExists(n,t,u){var c=u==="normalMerge",ee=u==="replaceMerge",te=u==="replaceAll";n=n||[],t=(t||[]).slice();var ae=createHashMap();each$3(t,function(oe,ie){if(!isObject$3(oe)){t[ie]=null;return}});var ne=prepareResult(n,ae,u);return(c||ee)&&mappingById(ne,n,ae,t),c&&mappingByName(ne,t),c||ee?mappingByIndex(ne,t,ee):te&&mappingInReplaceAllMode(ne,t),makeIdAndName(ne),ne}function prepareResult(n,t,u){var c=[];if(u==="replaceAll")return c;for(var ee=0;ee<n.length;ee++){var te=n[ee];te&&te.id!=null&&t.set(te.id,ee),c.push({existing:u==="replaceMerge"||isComponentIdInternal(te)?null:te,newOption:null,keyInfo:null,brandNew:null})}return c}function mappingById(n,t,u,c){each$3(c,function(ee,te){if(!(!ee||ee.id==null)){var ae=makeComparableKey(ee.id),ne=u.get(ae);if(ne!=null){var oe=n[ne];assert(!oe.newOption,'Duplicated option on id "'+ae+'".'),oe.newOption=ee,oe.existing=t[ne],c[te]=null}}})}function mappingByName(n,t){each$3(t,function(u,c){if(!(!u||u.name==null))for(var ee=0;ee<n.length;ee++){var te=n[ee].existing;if(!n[ee].newOption&&te&&(te.id==null||u.id==null)&&!isComponentIdInternal(u)&&!isComponentIdInternal(te)&&keyExistAndEqual("name",te,u)){n[ee].newOption=u,t[c]=null;return}}})}function mappingByIndex(n,t,u){each$3(t,function(c){if(c){for(var ee,te=0;(ee=n[te])&&(ee.newOption||isComponentIdInternal(ee.existing)||ee.existing&&c.id!=null&&!keyExistAndEqual("id",c,ee.existing));)te++;ee?(ee.newOption=c,ee.brandNew=u):n.push({newOption:c,brandNew:u,existing:null,keyInfo:null}),te++}})}function mappingInReplaceAllMode(n,t){each$3(t,function(u){n.push({newOption:u,brandNew:!0,existing:null,keyInfo:null})})}function makeIdAndName(n){var t=createHashMap();each$3(n,function(u){var c=u.existing;c&&t.set(c.id,u)}),each$3(n,function(u){var c=u.newOption;assert(!c||c.id==null||!t.get(c.id)||t.get(c.id)===u,"id duplicates: "+(c&&c.id)),c&&c.id!=null&&t.set(c.id,u),!u.keyInfo&&(u.keyInfo={})}),each$3(n,function(u,c){var ee=u.existing,te=u.newOption,ae=u.keyInfo;if(isObject$3(te)){if(ae.name=te.name!=null?makeComparableKey(te.name):ee?ee.name:DUMMY_COMPONENT_NAME_PREFIX+c,ee)ae.id=makeComparableKey(ee.id);else if(te.id!=null)ae.id=makeComparableKey(te.id);else{var ne=0;do ae.id="\0"+ae.name+"\0"+ne++;while(t.get(ae.id))}t.set(ae.id,u)}})}function keyExistAndEqual(n,t,u){var c=convertOptionIdName(t[n],null),ee=convertOptionIdName(u[n],null);return c!=null&&ee!=null&&c===ee}function makeComparableKey(n){return convertOptionIdName(n,"")}function convertOptionIdName(n,t){return n==null?t:isString(n)?n:isNumber(n)||isStringSafe(n)?n+"":t}function isNameSpecified(n){var t=n.name;return!!(t&&t.indexOf(DUMMY_COMPONENT_NAME_PREFIX))}function isComponentIdInternal(n){return n&&n.id!=null&&makeComparableKey(n.id).indexOf(INTERNAL_COMPONENT_ID_PREFIX)===0}function setComponentTypeToKeyInfo(n,t,u){each$3(n,function(c){var ee=c.newOption;isObject$3(ee)&&(c.keyInfo.mainType=t,c.keyInfo.subType=determineSubType(t,ee,c.existing,u))})}function determineSubType(n,t,u,c){var ee=t.type?t.type:u?u.subType:c.determineSubType(n,t);return ee}function queryDataIndex(n,t){if(t.dataIndexInside!=null)return t.dataIndexInside;if(t.dataIndex!=null)return isArray$6(t.dataIndex)?map$6(t.dataIndex,function(u){return n.indexOfRawIndex(u)}):n.indexOfRawIndex(t.dataIndex);if(t.name!=null)return isArray$6(t.name)?map$6(t.name,function(u){return n.indexOfName(u)}):n.indexOfName(t.name)}function makeInner(){var n="__ec_inner_"+innerUniqueIndex++;return function(t){return t[n]||(t[n]={})}}var innerUniqueIndex=getRandomIdBase();function parseFinder(n,t,u){var c=preParseFinder(t,u),ee=c.mainTypeSpecified,te=c.queryOptionMap,ae=c.others,ne=ae,oe=u?u.defaultMainType:null;return!ee&&oe&&te.set(oe,{}),te.each(function(ie,se){var ue=queryReferringComponents(n,se,ie,{useDefault:oe===se,enableAll:u&&u.enableAll!=null?u.enableAll:!0,enableNone:u&&u.enableNone!=null?u.enableNone:!0});ne[se+"Models"]=ue.models,ne[se+"Model"]=ue.models[0]}),ne}function preParseFinder(n,t){var u;if(isString(n)){var c={};c[n+"Index"]=0,u=c}else u=n;var ee=createHashMap(),te={},ae=!1;return each$3(u,function(ne,oe){if(oe==="dataIndex"||oe==="dataIndexInside"){te[oe]=ne;return}var ie=oe.match(/^(\w+)(Index|Id|Name)$/)||[],se=ie[1],ue=(ie[2]||"").toLowerCase();if(!(!se||!ue||t&&t.includeMainTypes&&indexOf$5(t.includeMainTypes,se)<0)){ae=ae||!!se;var le=ee.get(se)||ee.set(se,{});le[ue]=ne}}),{mainTypeSpecified:ae,queryOptionMap:ee,others:te}}var SINGLE_REFERRING={useDefault:!0,enableAll:!1,enableNone:!1};function queryReferringComponents(n,t,u,c){c=c||SINGLE_REFERRING;var ee=u.index,te=u.id,ae=u.name,ne={models:null,specified:ee!=null||te!=null||ae!=null};if(!ne.specified){var oe=void 0;return ne.models=c.useDefault&&(oe=n.getComponent(t))?[oe]:[],ne}return ee==="none"||ee===!1?(assert(c.enableNone,'`"none"` or `false` is not a valid value on index option.'),ne.models=[],ne):(ee==="all"&&(assert(c.enableAll,'`"all"` is not a valid value on index option.'),ee=te=ae=null),ne.models=n.queryComponents({mainType:t,index:ee,id:te,name:ae}),ne)}function setAttribute(n,t,u){n.setAttribute?n.setAttribute(t,u):n[t]=u}function getAttribute(n,t){return n.getAttribute?n.getAttribute(t):n[t]}function getTooltipRenderMode(n){return n==="auto"?env.domSupported?"html":"richText":n||"html"}function interpolateRawValues(n,t,u,c,ee){var te=t==null||t==="auto";if(c==null)return c;if(isNumber(c)){var ae=interpolateNumber(u||0,c,ee);return round$2(ae,te?Math.max(getPrecision(u||0),getPrecision(c)):t)}else{if(isString(c))return ee<1?u:c;for(var ne=[],oe=u,ie=c,se=Math.max(oe?oe.length:0,ie.length),ue=0;ue<se;++ue){var le=n.getDimensionInfo(ue);if(le&&le.type==="ordinal")ne[ue]=(ee<1&&oe?oe:ie)[ue];else{var ce=oe&&oe[ue]?oe[ue]:0,de=ie[ue],ae=interpolateNumber(ce,de,ee);ne[ue]=round$2(ae,te?Math.max(getPrecision(ce),getPrecision(de)):t)}}return ne}}var TYPE_DELIMITER=".",IS_CONTAINER="___EC__COMPONENT__CONTAINER___",IS_EXTENDED_CLASS="___EC__EXTENDED_CLASS___";function parseClassType(n){var t={main:"",sub:""};if(n){var u=n.split(TYPE_DELIMITER);t.main=u[0]||"",t.sub=u[1]||""}return t}function checkClassType(n){assert(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(n),'componentType "'+n+'" illegal')}function isExtendedClass(n){return!!(n&&n[IS_EXTENDED_CLASS])}function enableClassExtend(n,t){n.$constructor=n,n.extend=function(u){var c=this,ee;return isESClass(c)?ee=function(te){__extends$1(ae,te);function ae(){return te.apply(this,arguments)||this}return ae}(c):(ee=function(){(u.$constructor||c).apply(this,arguments)},inherits(ee,this)),extend(ee.prototype,u),ee[IS_EXTENDED_CLASS]=!0,ee.extend=this.extend,ee.superCall=superCall,ee.superApply=superApply,ee.superClass=c,ee}}function isESClass(n){return isFunction(n)&&/^class\s/.test(Function.prototype.toString.call(n))}function mountExtend(n,t){n.extend=t.extend}var classBase=Math.round(Math.random()*10);function enableClassCheck(n){var t=["__\0is_clz",classBase++].join("_");n.prototype[t]=!0,n.isInstance=function(u){return!!(u&&u[t])}}function superCall(n,t){for(var u=[],c=2;c<arguments.length;c++)u[c-2]=arguments[c];return this.superClass.prototype[t].apply(n,u)}function superApply(n,t,u){return this.superClass.prototype[t].apply(n,u)}function enableClassManagement(n){var t={};n.registerClass=function(c){var ee=c.type||c.prototype.type;if(ee){checkClassType(ee),c.prototype.type=ee;var te=parseClassType(ee);if(!te.sub)t[te.main]=c;else if(te.sub!==IS_CONTAINER){var ae=u(te);ae[te.sub]=c}}return c},n.getClass=function(c,ee,te){var ae=t[c];if(ae&&ae[IS_CONTAINER]&&(ae=ee?ae[ee]:null),te&&!ae)throw new Error(ee?"Component "+c+"."+(ee||"")+" is used but not imported.":c+".type should be specified.");return ae},n.getClassesByMainType=function(c){var ee=parseClassType(c),te=[],ae=t[ee.main];return ae&&ae[IS_CONTAINER]?each$3(ae,function(ne,oe){oe!==IS_CONTAINER&&te.push(ne)}):te.push(ae),te},n.hasClass=function(c){var ee=parseClassType(c);return!!t[ee.main]},n.getAllClassMainTypes=function(){var c=[];return each$3(t,function(ee,te){c.push(te)}),c},n.hasSubTypes=function(c){var ee=parseClassType(c),te=t[ee.main];return te&&te[IS_CONTAINER]};function u(c){var ee=t[c.main];return(!ee||!ee[IS_CONTAINER])&&(ee=t[c.main]={},ee[IS_CONTAINER]=!0),ee}}function makeStyleMapper(n,t){for(var u=0;u<n.length;u++)n[u][1]||(n[u][1]=n[u][0]);return t=t||!1,function(c,ee,te){for(var ae={},ne=0;ne<n.length;ne++){var oe=n[ne][1];if(!(ee&&indexOf$5(ee,oe)>=0||te&&indexOf$5(te,oe)<0)){var ie=c.getShallow(oe,t);ie!=null&&(ae[n[ne][0]]=ie)}}return ae}}var AREA_STYLE_KEY_MAP=[["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]],getAreaStyle=makeStyleMapper(AREA_STYLE_KEY_MAP),AreaStyleMixin=function(){function n(){}return n.prototype.getAreaStyle=function(t,u){return getAreaStyle(this,t,u)},n}(),globalImageCache=new LRU(50);function findExistImage(n){if(typeof n=="string"){var t=globalImageCache.get(n);return t&&t.image}else return n}function createOrUpdateImage(n,t,u,c,ee){if(n)if(typeof n=="string"){if(t&&t.__zrImageSrc===n||!u)return t;var te=globalImageCache.get(n),ae={hostEl:u,cb:c,cbPayload:ee};return te?(t=te.image,!isImageReady(t)&&te.pending.push(ae)):(t=platformApi.loadImage(n,imageOnLoad,imageOnLoad),t.__zrImageSrc=n,globalImageCache.put(n,t.__cachedImgObj={image:t,pending:[ae]})),t}else return n;else return t}function imageOnLoad(){var n=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var t=0;t<n.pending.length;t++){var u=n.pending[t],c=u.cb;c&&c(this,u.cbPayload),u.hostEl.dirty()}n.pending.length=0}function isImageReady(n){return n&&n.width&&n.height}var STYLE_REG=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function truncateText2(n,t,u,c,ee,te){if(!u){n.text="",n.isTruncated=!1;return}var ae=(t+"").split(`
`);te=prepareTruncateOptions(u,c,ee,te);for(var ne=!1,oe={},ie=0,se=ae.length;ie<se;ie++)truncateSingleLine(oe,ae[ie],te),ae[ie]=oe.textLine,ne=ne||oe.isTruncated;n.text=ae.join(`
`),n.isTruncated=ne}function prepareTruncateOptions(n,t,u,c){c=c||{};var ee=extend({},c);ee.font=t,u=retrieve2(u,"..."),ee.maxIterations=retrieve2(c.maxIterations,2);var te=ee.minChar=retrieve2(c.minChar,0);ee.cnCharWidth=getWidth("å›½",t);var ae=ee.ascCharWidth=getWidth("a",t);ee.placeholder=retrieve2(c.placeholder,"");for(var ne=n=Math.max(0,n-1),oe=0;oe<te&&ne>=ae;oe++)ne-=ae;var ie=getWidth(u,t);return ie>ne&&(u="",ie=0),ne=n-ie,ee.ellipsis=u,ee.ellipsisWidth=ie,ee.contentWidth=ne,ee.containerWidth=n,ee}function truncateSingleLine(n,t,u){var c=u.containerWidth,ee=u.font,te=u.contentWidth;if(!c){n.textLine="",n.isTruncated=!1;return}var ae=getWidth(t,ee);if(ae<=c){n.textLine=t,n.isTruncated=!1;return}for(var ne=0;;ne++){if(ae<=te||ne>=u.maxIterations){t+=u.ellipsis;break}var oe=ne===0?estimateLength(t,te,u.ascCharWidth,u.cnCharWidth):ae>0?Math.floor(t.length*te/ae):0;t=t.substr(0,oe),ae=getWidth(t,ee)}t===""&&(t=u.placeholder),n.textLine=t,n.isTruncated=!0}function estimateLength(n,t,u,c){for(var ee=0,te=0,ae=n.length;te<ae&&ee<t;te++){var ne=n.charCodeAt(te);ee+=0<=ne&&ne<=127?u:c}return te}function parsePlainText(n,t){n!=null&&(n+="");var u=t.overflow,c=t.padding,ee=t.font,te=u==="truncate",ae=getLineHeight(ee),ne=retrieve2(t.lineHeight,ae),oe=!!t.backgroundColor,ie=t.lineOverflow==="truncate",se=!1,ue=t.width,le;ue!=null&&(u==="break"||u==="breakAll")?le=n?wrapText(n,t.font,ue,u==="breakAll",0).lines:[]:le=n?n.split(`
`):[];var ce=le.length*ne,de=retrieve2(t.height,ce);if(ce>de&&ie){var fe=Math.floor(de/ne);se=se||le.length>fe,le=le.slice(0,fe)}if(n&&te&&ue!=null)for(var pe=prepareTruncateOptions(ue,ee,t.ellipsis,{minChar:t.truncateMinChar,placeholder:t.placeholder}),me={},ge=0;ge<le.length;ge++)truncateSingleLine(me,le[ge],pe),le[ge]=me.textLine,se=se||me.isTruncated;for(var De=de,Ce=0,ge=0;ge<le.length;ge++)Ce=Math.max(getWidth(le[ge],ee),Ce);ue==null&&(ue=Ce);var we=Ce;return c&&(De+=c[0]+c[2],we+=c[1]+c[3],ue+=c[1]+c[3]),oe&&(we=ue),{lines:le,height:de,outerWidth:we,outerHeight:De,lineHeight:ne,calculatedLineHeight:ae,contentWidth:Ce,contentHeight:ce,width:ue,isTruncated:se}}var RichTextToken=function(){function n(){}return n}(),RichTextLine=function(){function n(t){this.tokens=[],t&&(this.tokens=t)}return n}(),RichTextContentBlock=function(){function n(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[],this.isTruncated=!1}return n}();function parseRichText(n,t){var u=new RichTextContentBlock;if(n!=null&&(n+=""),!n)return u;for(var c=t.width,ee=t.height,te=t.overflow,ae=(te==="break"||te==="breakAll")&&c!=null?{width:c,accumWidth:0,breakAll:te==="breakAll"}:null,ne=STYLE_REG.lastIndex=0,oe;(oe=STYLE_REG.exec(n))!=null;){var ie=oe.index;ie>ne&&pushTokens(u,n.substring(ne,ie),t,ae),pushTokens(u,oe[2],t,ae,oe[1]),ne=STYLE_REG.lastIndex}ne<n.length&&pushTokens(u,n.substring(ne,n.length),t,ae);var se=[],ue=0,le=0,ce=t.padding,de=te==="truncate",fe=t.lineOverflow==="truncate",pe={};function me(Ee,ke,Ve){Ee.width=ke,Ee.lineHeight=Ve,ue+=Ve,le=Math.max(le,ke)}e:for(var ge=0;ge<u.lines.length;ge++){for(var De=u.lines[ge],Ce=0,we=0,xe=0;xe<De.tokens.length;xe++){var Re=De.tokens[xe],Be=Re.styleName&&t.rich[Re.styleName]||{},Se=Re.textPadding=Be.padding,Te=Se?Se[1]+Se[3]:0,Ae=Re.font=Be.font||t.font;Re.contentHeight=getLineHeight(Ae);var he=retrieve2(Be.height,Re.contentHeight);if(Re.innerHeight=he,Se&&(he+=Se[0]+Se[2]),Re.height=he,Re.lineHeight=retrieve3(Be.lineHeight,t.lineHeight,he),Re.align=Be&&Be.align||t.align,Re.verticalAlign=Be&&Be.verticalAlign||"middle",fe&&ee!=null&&ue+Re.lineHeight>ee){var ve=u.lines.length;xe>0?(De.tokens=De.tokens.slice(0,xe),me(De,we,Ce),u.lines=u.lines.slice(0,ge+1)):u.lines=u.lines.slice(0,ge),u.isTruncated=u.isTruncated||u.lines.length<ve;break e}var ye=Be.width,be=ye==null||ye==="auto";if(typeof ye=="string"&&ye.charAt(ye.length-1)==="%")Re.percentWidth=ye,se.push(Re),Re.contentWidth=getWidth(Re.text,Ae);else{if(be){var _e=Be.backgroundColor,Me=_e&&_e.image;Me&&(Me=findExistImage(Me),isImageReady(Me)&&(Re.width=Math.max(Re.width,Me.width*he/Me.height)))}var Ie=de&&c!=null?c-we:null;Ie!=null&&Ie<Re.width?!be||Ie<Te?(Re.text="",Re.width=Re.contentWidth=0):(truncateText2(pe,Re.text,Ie-Te,Ae,t.ellipsis,{minChar:t.truncateMinChar}),Re.text=pe.text,u.isTruncated=u.isTruncated||pe.isTruncated,Re.width=Re.contentWidth=getWidth(Re.text,Ae)):Re.contentWidth=getWidth(Re.text,Ae)}Re.width+=Te,we+=Re.width,Be&&(Ce=Math.max(Ce,Re.lineHeight))}me(De,we,Ce)}u.outerWidth=u.width=retrieve2(c,le),u.outerHeight=u.height=retrieve2(ee,ue),u.contentHeight=ue,u.contentWidth=le,ce&&(u.outerWidth+=ce[1]+ce[3],u.outerHeight+=ce[0]+ce[2]);for(var ge=0;ge<se.length;ge++){var Re=se[ge],Fe=Re.percentWidth;Re.width=parseInt(Fe,10)/100*u.width}return u}function pushTokens(n,t,u,c,ee){var te=t==="",ae=ee&&u.rich[ee]||{},ne=n.lines,oe=ae.font||u.font,ie=!1,se,ue;if(c){var le=ae.padding,ce=le?le[1]+le[3]:0;if(ae.width!=null&&ae.width!=="auto"){var de=parsePercent$1(ae.width,c.width)+ce;ne.length>0&&de+c.accumWidth>c.width&&(se=t.split(`
`),ie=!0),c.accumWidth=de}else{var fe=wrapText(t,oe,c.width,c.breakAll,c.accumWidth);c.accumWidth=fe.accumWidth+ce,ue=fe.linesWidths,se=fe.lines}}else se=t.split(`
`);for(var pe=0;pe<se.length;pe++){var me=se[pe],ge=new RichTextToken;if(ge.styleName=ee,ge.text=me,ge.isLineHolder=!me&&!te,typeof ae.width=="number"?ge.width=ae.width:ge.width=ue?ue[pe]:getWidth(me,oe),!pe&&!ie){var De=(ne[ne.length-1]||(ne[0]=new RichTextLine)).tokens,Ce=De.length;Ce===1&&De[0].isLineHolder?De[0]=ge:(me||!Ce||te)&&De.push(ge)}else ne.push(new RichTextLine([ge]))}}function isAlphabeticLetter(n){var t=n.charCodeAt(0);return t>=32&&t<=591||t>=880&&t<=4351||t>=4608&&t<=5119||t>=7680&&t<=8303}var breakCharMap=reduce$4(",&?/;] ".split(""),function(n,t){return n[t]=!0,n},{});function isWordBreakChar(n){return isAlphabeticLetter(n)?!!breakCharMap[n]:!0}function wrapText(n,t,u,c,ee){for(var te=[],ae=[],ne="",oe="",ie=0,se=0,ue=0;ue<n.length;ue++){var le=n.charAt(ue);if(le===`
`){oe&&(ne+=oe,se+=ie),te.push(ne),ae.push(se),ne="",oe="",ie=0,se=0;continue}var ce=getWidth(le,t),de=c?!1:!isWordBreakChar(le);if(te.length?se+ce>u:ee+se+ce>u){se?(ne||oe)&&(de?(ne||(ne=oe,oe="",ie=0,se=ie),te.push(ne),ae.push(se-ie),oe+=le,ie+=ce,ne="",se=ie):(oe&&(ne+=oe,oe="",ie=0),te.push(ne),ae.push(se),ne=le,se=ce)):de?(te.push(oe),ae.push(ie),oe=le,ie=ce):(te.push(le),ae.push(ce));continue}se+=ce,de?(oe+=le,ie+=ce):(oe&&(ne+=oe,oe="",ie=0),ne+=le)}return!te.length&&!ne&&(ne=n,oe="",ie=0),oe&&(ne+=oe),ne&&(te.push(ne),ae.push(se)),te.length===1&&(se+=ee),{accumWidth:se,lines:te,linesWidths:ae}}var STYLE_MAGIC_KEY="__zr_style_"+Math.round(Math.random()*10),DEFAULT_COMMON_STYLE={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},DEFAULT_COMMON_ANIMATION_PROPS={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};DEFAULT_COMMON_STYLE[STYLE_MAGIC_KEY]=!0;var PRIMARY_STATES_KEYS=["z","z2","invisible"],PRIMARY_STATES_KEYS_IN_HOVER_LAYER=["invisible"],Displayable=function(n){__extends(t,n);function t(u){return n.call(this,u)||this}return t.prototype._init=function(u){for(var c=keys$2(u),ee=0;ee<c.length;ee++){var te=c[ee];te==="style"?this.useStyle(u[te]):n.prototype.attrKV.call(this,te,u[te])}this.style||this.useStyle({})},t.prototype.beforeBrush=function(){},t.prototype.afterBrush=function(){},t.prototype.innerBeforeBrush=function(){},t.prototype.innerAfterBrush=function(){},t.prototype.shouldBePainted=function(u,c,ee,te){var ae=this.transform;if(this.ignore||this.invisible||this.style.opacity===0||this.culling&&isDisplayableCulled(this,u,c)||ae&&!ae[0]&&!ae[3])return!1;if(ee&&this.__clipPaths){for(var ne=0;ne<this.__clipPaths.length;++ne)if(this.__clipPaths[ne].isZeroArea())return!1}if(te&&this.parent)for(var oe=this.parent;oe;){if(oe.ignore)return!1;oe=oe.parent}return!0},t.prototype.contain=function(u,c){return this.rectContain(u,c)},t.prototype.traverse=function(u,c){u.call(c,this)},t.prototype.rectContain=function(u,c){var ee=this.transformCoordToLocal(u,c),te=this.getBoundingRect();return te.contain(ee[0],ee[1])},t.prototype.getPaintRect=function(){var u=this._paintRect;if(!this._paintRect||this.__dirty){var c=this.transform,ee=this.getBoundingRect(),te=this.style,ae=te.shadowBlur||0,ne=te.shadowOffsetX||0,oe=te.shadowOffsetY||0;u=this._paintRect||(this._paintRect=new BoundingRect(0,0,0,0)),c?BoundingRect.applyTransform(u,ee,c):u.copy(ee),(ae||ne||oe)&&(u.width+=ae*2+Math.abs(ne),u.height+=ae*2+Math.abs(oe),u.x=Math.min(u.x,u.x+ne-ae),u.y=Math.min(u.y,u.y+oe-ae));var ie=this.dirtyRectTolerance;u.isZero()||(u.x=Math.floor(u.x-ie),u.y=Math.floor(u.y-ie),u.width=Math.ceil(u.width+1+ie*2),u.height=Math.ceil(u.height+1+ie*2))}return u},t.prototype.setPrevPaintRect=function(u){u?(this._prevPaintRect=this._prevPaintRect||new BoundingRect(0,0,0,0),this._prevPaintRect.copy(u)):this._prevPaintRect=null},t.prototype.getPrevPaintRect=function(){return this._prevPaintRect},t.prototype.animateStyle=function(u){return this.animate("style",u)},t.prototype.updateDuringAnimation=function(u){u==="style"?this.dirtyStyle():this.markRedraw()},t.prototype.attrKV=function(u,c){u!=="style"?n.prototype.attrKV.call(this,u,c):this.style?this.setStyle(c):this.useStyle(c)},t.prototype.setStyle=function(u,c){return typeof u=="string"?this.style[u]=c:extend(this.style,u),this.dirtyStyle(),this},t.prototype.dirtyStyle=function(u){u||this.markRedraw(),this.__dirty|=STYLE_CHANGED_BIT,this._rect&&(this._rect=null)},t.prototype.dirty=function(){this.dirtyStyle()},t.prototype.styleChanged=function(){return!!(this.__dirty&STYLE_CHANGED_BIT)},t.prototype.styleUpdated=function(){this.__dirty&=-3},t.prototype.createStyle=function(u){return createObject(DEFAULT_COMMON_STYLE,u)},t.prototype.useStyle=function(u){u[STYLE_MAGIC_KEY]||(u=this.createStyle(u)),this.__inHover?this.__hoverStyle=u:this.style=u,this.dirtyStyle()},t.prototype.isStyleObject=function(u){return u[STYLE_MAGIC_KEY]},t.prototype._innerSaveToNormal=function(u){n.prototype._innerSaveToNormal.call(this,u);var c=this._normalState;u.style&&!c.style&&(c.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(u,c,PRIMARY_STATES_KEYS)},t.prototype._applyStateObj=function(u,c,ee,te,ae,ne){n.prototype._applyStateObj.call(this,u,c,ee,te,ae,ne);var oe=!(c&&te),ie;if(c&&c.style?ae?te?ie=c.style:(ie=this._mergeStyle(this.createStyle(),ee.style),this._mergeStyle(ie,c.style)):(ie=this._mergeStyle(this.createStyle(),te?this.style:ee.style),this._mergeStyle(ie,c.style)):oe&&(ie=ee.style),ie)if(ae){var se=this.style;if(this.style=this.createStyle(oe?{}:se),oe)for(var ue=keys$2(se),le=0;le<ue.length;le++){var ce=ue[le];ce in ie&&(ie[ce]=ie[ce],this.style[ce]=se[ce])}for(var de=keys$2(ie),le=0;le<de.length;le++){var ce=de[le];this.style[ce]=this.style[ce]}this._transitionState(u,{style:ie},ne,this.getAnimationStyleProps())}else this.useStyle(ie);for(var fe=this.__inHover?PRIMARY_STATES_KEYS_IN_HOVER_LAYER:PRIMARY_STATES_KEYS,le=0;le<fe.length;le++){var ce=fe[le];c&&c[ce]!=null?this[ce]=c[ce]:oe&&ee[ce]!=null&&(this[ce]=ee[ce])}},t.prototype._mergeStates=function(u){for(var c=n.prototype._mergeStates.call(this,u),ee,te=0;te<u.length;te++){var ae=u[te];ae.style&&(ee=ee||{},this._mergeStyle(ee,ae.style))}return ee&&(c.style=ee),c},t.prototype._mergeStyle=function(u,c){return extend(u,c),u},t.prototype.getAnimationStyleProps=function(){return DEFAULT_COMMON_ANIMATION_PROPS},t.initDefaultProps=function(){var u=t.prototype;u.type="displayable",u.invisible=!1,u.z=0,u.z2=0,u.zlevel=0,u.culling=!1,u.cursor="pointer",u.rectHover=!1,u.incremental=!1,u._rect=null,u.dirtyRectTolerance=0,u.__dirty=REDRAW_BIT|STYLE_CHANGED_BIT}(),t}(Element),tmpRect=new BoundingRect(0,0,0,0),viewRect=new BoundingRect(0,0,0,0);function isDisplayableCulled(n,t,u){return tmpRect.copy(n.getBoundingRect()),n.transform&&tmpRect.applyTransform(n.transform),viewRect.width=t,viewRect.height=u,!tmpRect.intersect(viewRect)}var mathMin$4=Math.min,mathMax$4=Math.max,mathSin$4=Math.sin,mathCos$4=Math.cos,PI2$6=Math.PI*2,start=create$4(),end=create$4(),extremity=create$4();function fromLine(n,t,u,c,ee,te){ee[0]=mathMin$4(n,u),ee[1]=mathMin$4(t,c),te[0]=mathMax$4(n,u),te[1]=mathMax$4(t,c)}var xDim=[],yDim=[];function fromCubic(n,t,u,c,ee,te,ae,ne,oe,ie){var se=cubicExtrema,ue=cubicAt,le=se(n,u,ee,ae,xDim);oe[0]=1/0,oe[1]=1/0,ie[0]=-1/0,ie[1]=-1/0;for(var ce=0;ce<le;ce++){var de=ue(n,u,ee,ae,xDim[ce]);oe[0]=mathMin$4(de,oe[0]),ie[0]=mathMax$4(de,ie[0])}le=se(t,c,te,ne,yDim);for(var ce=0;ce<le;ce++){var fe=ue(t,c,te,ne,yDim[ce]);oe[1]=mathMin$4(fe,oe[1]),ie[1]=mathMax$4(fe,ie[1])}oe[0]=mathMin$4(n,oe[0]),ie[0]=mathMax$4(n,ie[0]),oe[0]=mathMin$4(ae,oe[0]),ie[0]=mathMax$4(ae,ie[0]),oe[1]=mathMin$4(t,oe[1]),ie[1]=mathMax$4(t,ie[1]),oe[1]=mathMin$4(ne,oe[1]),ie[1]=mathMax$4(ne,ie[1])}function fromQuadratic(n,t,u,c,ee,te,ae,ne){var oe=quadraticExtremum,ie=quadraticAt,se=mathMax$4(mathMin$4(oe(n,u,ee),1),0),ue=mathMax$4(mathMin$4(oe(t,c,te),1),0),le=ie(n,u,ee,se),ce=ie(t,c,te,ue);ae[0]=mathMin$4(n,ee,le),ae[1]=mathMin$4(t,te,ce),ne[0]=mathMax$4(n,ee,le),ne[1]=mathMax$4(t,te,ce)}function fromArc(n,t,u,c,ee,te,ae,ne,oe){var ie=min$3,se=max$3,ue=Math.abs(ee-te);if(ue%PI2$6<1e-4&&ue>1e-4){ne[0]=n-u,ne[1]=t-c,oe[0]=n+u,oe[1]=t+c;return}if(start[0]=mathCos$4(ee)*u+n,start[1]=mathSin$4(ee)*c+t,end[0]=mathCos$4(te)*u+n,end[1]=mathSin$4(te)*c+t,ie(ne,start,end),se(oe,start,end),ee=ee%PI2$6,ee<0&&(ee=ee+PI2$6),te=te%PI2$6,te<0&&(te=te+PI2$6),ee>te&&!ae?te+=PI2$6:ee<te&&ae&&(ee+=PI2$6),ae){var le=te;te=ee,ee=le}for(var ce=0;ce<te;ce+=Math.PI/2)ce>ee&&(extremity[0]=mathCos$4(ce)*u+n,extremity[1]=mathSin$4(ce)*c+t,ie(ne,extremity,ne),se(oe,extremity,oe))}var CMD$2={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},tmpOutX=[],tmpOutY=[],min$2=[],max$2=[],min2=[],max2=[],mathMin$3=Math.min,mathMax$3=Math.max,mathCos$3=Math.cos,mathSin$3=Math.sin,mathAbs$1=Math.abs,PI$5=Math.PI,PI2$5=PI$5*2,hasTypedArray=typeof Float32Array<"u",tmpAngles=[];function modPI2(n){var t=Math.round(n/PI$5*1e8)/1e8;return t%2*PI$5}function normalizeArcAngles(n,t){var u=modPI2(n[0]);u<0&&(u+=PI2$5);var c=u-n[0],ee=n[1];ee+=c,!t&&ee-u>=PI2$5?ee=u+PI2$5:t&&u-ee>=PI2$5?ee=u-PI2$5:!t&&u>ee?ee=u+(PI2$5-modPI2(u-ee)):t&&u<ee&&(ee=u-(PI2$5-modPI2(ee-u))),n[0]=u,n[1]=ee}var PathProxy=function(){function n(t){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,t&&(this._saveData=!1),this._saveData&&(this.data=[])}return n.prototype.increaseVersion=function(){this._version++},n.prototype.getVersion=function(){return this._version},n.prototype.setScale=function(t,u,c){c=c||0,c>0&&(this._ux=mathAbs$1(c/devicePixelRatio/t)||0,this._uy=mathAbs$1(c/devicePixelRatio/u)||0)},n.prototype.setDPR=function(t){this.dpr=t},n.prototype.setContext=function(t){this._ctx=t},n.prototype.getContext=function(){return this._ctx},n.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},n.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},n.prototype.moveTo=function(t,u){return this._drawPendingPt(),this.addData(CMD$2.M,t,u),this._ctx&&this._ctx.moveTo(t,u),this._x0=t,this._y0=u,this._xi=t,this._yi=u,this},n.prototype.lineTo=function(t,u){var c=mathAbs$1(t-this._xi),ee=mathAbs$1(u-this._yi),te=c>this._ux||ee>this._uy;if(this.addData(CMD$2.L,t,u),this._ctx&&te&&this._ctx.lineTo(t,u),te)this._xi=t,this._yi=u,this._pendingPtDist=0;else{var ae=c*c+ee*ee;ae>this._pendingPtDist&&(this._pendingPtX=t,this._pendingPtY=u,this._pendingPtDist=ae)}return this},n.prototype.bezierCurveTo=function(t,u,c,ee,te,ae){return this._drawPendingPt(),this.addData(CMD$2.C,t,u,c,ee,te,ae),this._ctx&&this._ctx.bezierCurveTo(t,u,c,ee,te,ae),this._xi=te,this._yi=ae,this},n.prototype.quadraticCurveTo=function(t,u,c,ee){return this._drawPendingPt(),this.addData(CMD$2.Q,t,u,c,ee),this._ctx&&this._ctx.quadraticCurveTo(t,u,c,ee),this._xi=c,this._yi=ee,this},n.prototype.arc=function(t,u,c,ee,te,ae){this._drawPendingPt(),tmpAngles[0]=ee,tmpAngles[1]=te,normalizeArcAngles(tmpAngles,ae),ee=tmpAngles[0],te=tmpAngles[1];var ne=te-ee;return this.addData(CMD$2.A,t,u,c,c,ee,ne,0,ae?0:1),this._ctx&&this._ctx.arc(t,u,c,ee,te,ae),this._xi=mathCos$3(te)*c+t,this._yi=mathSin$3(te)*c+u,this},n.prototype.arcTo=function(t,u,c,ee,te){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(t,u,c,ee,te),this},n.prototype.rect=function(t,u,c,ee){return this._drawPendingPt(),this._ctx&&this._ctx.rect(t,u,c,ee),this.addData(CMD$2.R,t,u,c,ee),this},n.prototype.closePath=function(){this._drawPendingPt(),this.addData(CMD$2.Z);var t=this._ctx,u=this._x0,c=this._y0;return t&&t.closePath(),this._xi=u,this._yi=c,this},n.prototype.fill=function(t){t&&t.fill(),this.toStatic()},n.prototype.stroke=function(t){t&&t.stroke(),this.toStatic()},n.prototype.len=function(){return this._len},n.prototype.setData=function(t){var u=t.length;!(this.data&&this.data.length===u)&&hasTypedArray&&(this.data=new Float32Array(u));for(var c=0;c<u;c++)this.data[c]=t[c];this._len=u},n.prototype.appendPath=function(t){t instanceof Array||(t=[t]);for(var u=t.length,c=0,ee=this._len,te=0;te<u;te++)c+=t[te].len();hasTypedArray&&this.data instanceof Float32Array&&(this.data=new Float32Array(ee+c));for(var te=0;te<u;te++)for(var ae=t[te].data,ne=0;ne<ae.length;ne++)this.data[ee++]=ae[ne];this._len=ee},n.prototype.addData=function(t,u,c,ee,te,ae,ne,oe,ie){if(this._saveData){var se=this.data;this._len+arguments.length>se.length&&(this._expandData(),se=this.data);for(var ue=0;ue<arguments.length;ue++)se[this._len++]=arguments[ue]}},n.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},n.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var t=[],u=0;u<this._len;u++)t[u]=this.data[u];this.data=t}},n.prototype.toStatic=function(){if(this._saveData){this._drawPendingPt();var t=this.data;t instanceof Array&&(t.length=this._len,hasTypedArray&&this._len>11&&(this.data=new Float32Array(t)))}},n.prototype.getBoundingRect=function(){min$2[0]=min$2[1]=min2[0]=min2[1]=Number.MAX_VALUE,max$2[0]=max$2[1]=max2[0]=max2[1]=-Number.MAX_VALUE;var t=this.data,u=0,c=0,ee=0,te=0,ae;for(ae=0;ae<this._len;){var ne=t[ae++],oe=ae===1;switch(oe&&(u=t[ae],c=t[ae+1],ee=u,te=c),ne){case CMD$2.M:u=ee=t[ae++],c=te=t[ae++],min2[0]=ee,min2[1]=te,max2[0]=ee,max2[1]=te;break;case CMD$2.L:fromLine(u,c,t[ae],t[ae+1],min2,max2),u=t[ae++],c=t[ae++];break;case CMD$2.C:fromCubic(u,c,t[ae++],t[ae++],t[ae++],t[ae++],t[ae],t[ae+1],min2,max2),u=t[ae++],c=t[ae++];break;case CMD$2.Q:fromQuadratic(u,c,t[ae++],t[ae++],t[ae],t[ae+1],min2,max2),u=t[ae++],c=t[ae++];break;case CMD$2.A:var ie=t[ae++],se=t[ae++],ue=t[ae++],le=t[ae++],ce=t[ae++],de=t[ae++]+ce;ae+=1;var fe=!t[ae++];oe&&(ee=mathCos$3(ce)*ue+ie,te=mathSin$3(ce)*le+se),fromArc(ie,se,ue,le,ce,de,fe,min2,max2),u=mathCos$3(de)*ue+ie,c=mathSin$3(de)*le+se;break;case CMD$2.R:ee=u=t[ae++],te=c=t[ae++];var pe=t[ae++],me=t[ae++];fromLine(ee,te,ee+pe,te+me,min2,max2);break;case CMD$2.Z:u=ee,c=te;break}min$3(min$2,min$2,min2),max$3(max$2,max$2,max2)}return ae===0&&(min$2[0]=min$2[1]=max$2[0]=max$2[1]=0),new BoundingRect(min$2[0],min$2[1],max$2[0]-min$2[0],max$2[1]-min$2[1])},n.prototype._calculateLength=function(){var t=this.data,u=this._len,c=this._ux,ee=this._uy,te=0,ae=0,ne=0,oe=0;this._pathSegLen||(this._pathSegLen=[]);for(var ie=this._pathSegLen,se=0,ue=0,le=0;le<u;){var ce=t[le++],de=le===1;de&&(te=t[le],ae=t[le+1],ne=te,oe=ae);var fe=-1;switch(ce){case CMD$2.M:te=ne=t[le++],ae=oe=t[le++];break;case CMD$2.L:{var pe=t[le++],me=t[le++],ge=pe-te,De=me-ae;(mathAbs$1(ge)>c||mathAbs$1(De)>ee||le===u-1)&&(fe=Math.sqrt(ge*ge+De*De),te=pe,ae=me);break}case CMD$2.C:{var Ce=t[le++],we=t[le++],pe=t[le++],me=t[le++],xe=t[le++],Re=t[le++];fe=cubicLength(te,ae,Ce,we,pe,me,xe,Re,10),te=xe,ae=Re;break}case CMD$2.Q:{var Ce=t[le++],we=t[le++],pe=t[le++],me=t[le++];fe=quadraticLength(te,ae,Ce,we,pe,me,10),te=pe,ae=me;break}case CMD$2.A:var Be=t[le++],Se=t[le++],Te=t[le++],Ae=t[le++],he=t[le++],ve=t[le++],ye=ve+he;le+=1,de&&(ne=mathCos$3(he)*Te+Be,oe=mathSin$3(he)*Ae+Se),fe=mathMax$3(Te,Ae)*mathMin$3(PI2$5,Math.abs(ve)),te=mathCos$3(ye)*Te+Be,ae=mathSin$3(ye)*Ae+Se;break;case CMD$2.R:{ne=te=t[le++],oe=ae=t[le++];var be=t[le++],_e=t[le++];fe=be*2+_e*2;break}case CMD$2.Z:{var ge=ne-te,De=oe-ae;fe=Math.sqrt(ge*ge+De*De),te=ne,ae=oe;break}}fe>=0&&(ie[ue++]=fe,se+=fe)}return this._pathLen=se,se},n.prototype.rebuildPath=function(t,u){var c=this.data,ee=this._ux,te=this._uy,ae=this._len,ne,oe,ie,se,ue,le,ce=u<1,de,fe,pe=0,me=0,ge,De=0,Ce,we;if(!(ce&&(this._pathSegLen||this._calculateLength(),de=this._pathSegLen,fe=this._pathLen,ge=u*fe,!ge)))e:for(var xe=0;xe<ae;){var Re=c[xe++],Be=xe===1;switch(Be&&(ie=c[xe],se=c[xe+1],ne=ie,oe=se),Re!==CMD$2.L&&De>0&&(t.lineTo(Ce,we),De=0),Re){case CMD$2.M:ne=ie=c[xe++],oe=se=c[xe++],t.moveTo(ie,se);break;case CMD$2.L:{ue=c[xe++],le=c[xe++];var Se=mathAbs$1(ue-ie),Te=mathAbs$1(le-se);if(Se>ee||Te>te){if(ce){var Ae=de[me++];if(pe+Ae>ge){var he=(ge-pe)/Ae;t.lineTo(ie*(1-he)+ue*he,se*(1-he)+le*he);break e}pe+=Ae}t.lineTo(ue,le),ie=ue,se=le,De=0}else{var ve=Se*Se+Te*Te;ve>De&&(Ce=ue,we=le,De=ve)}break}case CMD$2.C:{var ye=c[xe++],be=c[xe++],_e=c[xe++],Me=c[xe++],Ie=c[xe++],Fe=c[xe++];if(ce){var Ae=de[me++];if(pe+Ae>ge){var he=(ge-pe)/Ae;cubicSubdivide(ie,ye,_e,Ie,he,tmpOutX),cubicSubdivide(se,be,Me,Fe,he,tmpOutY),t.bezierCurveTo(tmpOutX[1],tmpOutY[1],tmpOutX[2],tmpOutY[2],tmpOutX[3],tmpOutY[3]);break e}pe+=Ae}t.bezierCurveTo(ye,be,_e,Me,Ie,Fe),ie=Ie,se=Fe;break}case CMD$2.Q:{var ye=c[xe++],be=c[xe++],_e=c[xe++],Me=c[xe++];if(ce){var Ae=de[me++];if(pe+Ae>ge){var he=(ge-pe)/Ae;quadraticSubdivide(ie,ye,_e,he,tmpOutX),quadraticSubdivide(se,be,Me,he,tmpOutY),t.quadraticCurveTo(tmpOutX[1],tmpOutY[1],tmpOutX[2],tmpOutY[2]);break e}pe+=Ae}t.quadraticCurveTo(ye,be,_e,Me),ie=_e,se=Me;break}case CMD$2.A:var Ee=c[xe++],ke=c[xe++],Ve=c[xe++],ze=c[xe++],Ue=c[xe++],Oe=c[xe++],Dt=c[xe++],$t=!c[xe++],Mt=Ve>ze?Ve:ze,Kt=mathAbs$1(Ve-ze)>.001,Vt=Ue+Oe,Ht=!1;if(ce){var Ae=de[me++];pe+Ae>ge&&(Vt=Ue+Oe*(ge-pe)/Ae,Ht=!0),pe+=Ae}if(Kt&&t.ellipse?t.ellipse(Ee,ke,Ve,ze,Dt,Ue,Vt,$t):t.arc(Ee,ke,Mt,Ue,Vt,$t),Ht)break e;Be&&(ne=mathCos$3(Ue)*Ve+Ee,oe=mathSin$3(Ue)*ze+ke),ie=mathCos$3(Vt)*Ve+Ee,se=mathSin$3(Vt)*ze+ke;break;case CMD$2.R:ne=ie=c[xe],oe=se=c[xe+1],ue=c[xe++],le=c[xe++];var $e=c[xe++],Pe=c[xe++];if(ce){var Ae=de[me++];if(pe+Ae>ge){var Ne=ge-pe;t.moveTo(ue,le),t.lineTo(ue+mathMin$3(Ne,$e),le),Ne-=$e,Ne>0&&t.lineTo(ue+$e,le+mathMin$3(Ne,Pe)),Ne-=Pe,Ne>0&&t.lineTo(ue+mathMax$3($e-Ne,0),le+Pe),Ne-=$e,Ne>0&&t.lineTo(ue,le+mathMax$3(Pe-Ne,0));break e}pe+=Ae}t.rect(ue,le,$e,Pe);break;case CMD$2.Z:if(ce){var Ae=de[me++];if(pe+Ae>ge){var he=(ge-pe)/Ae;t.lineTo(ie*(1-he)+ne*he,se*(1-he)+oe*he);break e}pe+=Ae}t.closePath(),ie=ne,se=oe}}},n.prototype.clone=function(){var t=new n,u=this.data;return t.data=u.slice?u.slice():Array.prototype.slice.call(u),t._len=this._len,t},n.CMD=CMD$2,n.initDefaultProps=function(){var t=n.prototype;t._saveData=!0,t._ux=0,t._uy=0,t._pendingPtDist=0,t._version=0}(),n}();function containStroke$4(n,t,u,c,ee,te,ae){if(ee===0)return!1;var ne=ee,oe=0,ie=n;if(ae>t+ne&&ae>c+ne||ae<t-ne&&ae<c-ne||te>n+ne&&te>u+ne||te<n-ne&&te<u-ne)return!1;if(n!==u)oe=(t-c)/(n-u),ie=(n*c-u*t)/(n-u);else return Math.abs(te-n)<=ne/2;var se=oe*te-ae+ie,ue=se*se/(oe*oe+1);return ue<=ne/2*ne/2}function containStroke$3(n,t,u,c,ee,te,ae,ne,oe,ie,se){if(oe===0)return!1;var ue=oe;if(se>t+ue&&se>c+ue&&se>te+ue&&se>ne+ue||se<t-ue&&se<c-ue&&se<te-ue&&se<ne-ue||ie>n+ue&&ie>u+ue&&ie>ee+ue&&ie>ae+ue||ie<n-ue&&ie<u-ue&&ie<ee-ue&&ie<ae-ue)return!1;var le=cubicProjectPoint(n,t,u,c,ee,te,ae,ne,ie,se);return le<=ue/2}function containStroke$2(n,t,u,c,ee,te,ae,ne,oe){if(ae===0)return!1;var ie=ae;if(oe>t+ie&&oe>c+ie&&oe>te+ie||oe<t-ie&&oe<c-ie&&oe<te-ie||ne>n+ie&&ne>u+ie&&ne>ee+ie||ne<n-ie&&ne<u-ie&&ne<ee-ie)return!1;var se=quadraticProjectPoint(n,t,u,c,ee,te,ne,oe);return se<=ie/2}var PI2$4=Math.PI*2;function normalizeRadian(n){return n%=PI2$4,n<0&&(n+=PI2$4),n}var PI2$3=Math.PI*2;function containStroke$1(n,t,u,c,ee,te,ae,ne,oe){if(ae===0)return!1;var ie=ae;ne-=n,oe-=t;var se=Math.sqrt(ne*ne+oe*oe);if(se-ie>u||se+ie<u)return!1;if(Math.abs(c-ee)%PI2$3<1e-4)return!0;if(te){var ue=c;c=normalizeRadian(ee),ee=normalizeRadian(ue)}else c=normalizeRadian(c),ee=normalizeRadian(ee);c>ee&&(ee+=PI2$3);var le=Math.atan2(oe,ne);return le<0&&(le+=PI2$3),le>=c&&le<=ee||le+PI2$3>=c&&le+PI2$3<=ee}function windingLine(n,t,u,c,ee,te){if(te>t&&te>c||te<t&&te<c||c===t)return 0;var ae=(te-t)/(c-t),ne=c<t?1:-1;(ae===1||ae===0)&&(ne=c<t?.5:-.5);var oe=ae*(u-n)+n;return oe===ee?1/0:oe>ee?ne:0}var CMD$1=PathProxy.CMD,PI2$2=Math.PI*2,EPSILON=1e-4;function isAroundEqual(n,t){return Math.abs(n-t)<EPSILON}var roots=[-1,-1,-1],extrema=[-1,-1];function swapExtrema(){var n=extrema[0];extrema[0]=extrema[1],extrema[1]=n}function windingCubic(n,t,u,c,ee,te,ae,ne,oe,ie){if(ie>t&&ie>c&&ie>te&&ie>ne||ie<t&&ie<c&&ie<te&&ie<ne)return 0;var se=cubicRootAt(t,c,te,ne,ie,roots);if(se===0)return 0;for(var ue=0,le=-1,ce=void 0,de=void 0,fe=0;fe<se;fe++){var pe=roots[fe],me=pe===0||pe===1?.5:1,ge=cubicAt(n,u,ee,ae,pe);ge<oe||(le<0&&(le=cubicExtrema(t,c,te,ne,extrema),extrema[1]<extrema[0]&&le>1&&swapExtrema(),ce=cubicAt(t,c,te,ne,extrema[0]),le>1&&(de=cubicAt(t,c,te,ne,extrema[1]))),le===2?pe<extrema[0]?ue+=ce<t?me:-me:pe<extrema[1]?ue+=de<ce?me:-me:ue+=ne<de?me:-me:pe<extrema[0]?ue+=ce<t?me:-me:ue+=ne<ce?me:-me)}return ue}function windingQuadratic(n,t,u,c,ee,te,ae,ne){if(ne>t&&ne>c&&ne>te||ne<t&&ne<c&&ne<te)return 0;var oe=quadraticRootAt(t,c,te,ne,roots);if(oe===0)return 0;var ie=quadraticExtremum(t,c,te);if(ie>=0&&ie<=1){for(var se=0,ue=quadraticAt(t,c,te,ie),le=0;le<oe;le++){var ce=roots[le]===0||roots[le]===1?.5:1,de=quadraticAt(n,u,ee,roots[le]);de<ae||(roots[le]<ie?se+=ue<t?ce:-ce:se+=te<ue?ce:-ce)}return se}else{var ce=roots[0]===0||roots[0]===1?.5:1,de=quadraticAt(n,u,ee,roots[0]);return de<ae?0:te<t?ce:-ce}}function windingArc(n,t,u,c,ee,te,ae,ne){if(ne-=t,ne>u||ne<-u)return 0;var oe=Math.sqrt(u*u-ne*ne);roots[0]=-oe,roots[1]=oe;var ie=Math.abs(c-ee);if(ie<1e-4)return 0;if(ie>=PI2$2-1e-4){c=0,ee=PI2$2;var se=te?1:-1;return ae>=roots[0]+n&&ae<=roots[1]+n?se:0}if(c>ee){var ue=c;c=ee,ee=ue}c<0&&(c+=PI2$2,ee+=PI2$2);for(var le=0,ce=0;ce<2;ce++){var de=roots[ce];if(de+n>ae){var fe=Math.atan2(ne,de),se=te?1:-1;fe<0&&(fe=PI2$2+fe),(fe>=c&&fe<=ee||fe+PI2$2>=c&&fe+PI2$2<=ee)&&(fe>Math.PI/2&&fe<Math.PI*1.5&&(se=-se),le+=se)}}return le}function containPath(n,t,u,c,ee){for(var te=n.data,ae=n.len(),ne=0,oe=0,ie=0,se=0,ue=0,le,ce,de=0;de<ae;){var fe=te[de++],pe=de===1;switch(fe===CMD$1.M&&de>1&&(u||(ne+=windingLine(oe,ie,se,ue,c,ee))),pe&&(oe=te[de],ie=te[de+1],se=oe,ue=ie),fe){case CMD$1.M:se=te[de++],ue=te[de++],oe=se,ie=ue;break;case CMD$1.L:if(u){if(containStroke$4(oe,ie,te[de],te[de+1],t,c,ee))return!0}else ne+=windingLine(oe,ie,te[de],te[de+1],c,ee)||0;oe=te[de++],ie=te[de++];break;case CMD$1.C:if(u){if(containStroke$3(oe,ie,te[de++],te[de++],te[de++],te[de++],te[de],te[de+1],t,c,ee))return!0}else ne+=windingCubic(oe,ie,te[de++],te[de++],te[de++],te[de++],te[de],te[de+1],c,ee)||0;oe=te[de++],ie=te[de++];break;case CMD$1.Q:if(u){if(containStroke$2(oe,ie,te[de++],te[de++],te[de],te[de+1],t,c,ee))return!0}else ne+=windingQuadratic(oe,ie,te[de++],te[de++],te[de],te[de+1],c,ee)||0;oe=te[de++],ie=te[de++];break;case CMD$1.A:var me=te[de++],ge=te[de++],De=te[de++],Ce=te[de++],we=te[de++],xe=te[de++];de+=1;var Re=!!(1-te[de++]);le=Math.cos(we)*De+me,ce=Math.sin(we)*Ce+ge,pe?(se=le,ue=ce):ne+=windingLine(oe,ie,le,ce,c,ee);var Be=(c-me)*Ce/De+me;if(u){if(containStroke$1(me,ge,Ce,we,we+xe,Re,t,Be,ee))return!0}else ne+=windingArc(me,ge,Ce,we,we+xe,Re,Be,ee);oe=Math.cos(we+xe)*De+me,ie=Math.sin(we+xe)*Ce+ge;break;case CMD$1.R:se=oe=te[de++],ue=ie=te[de++];var Se=te[de++],Te=te[de++];if(le=se+Se,ce=ue+Te,u){if(containStroke$4(se,ue,le,ue,t,c,ee)||containStroke$4(le,ue,le,ce,t,c,ee)||containStroke$4(le,ce,se,ce,t,c,ee)||containStroke$4(se,ce,se,ue,t,c,ee))return!0}else ne+=windingLine(le,ue,le,ce,c,ee),ne+=windingLine(se,ce,se,ue,c,ee);break;case CMD$1.Z:if(u){if(containStroke$4(oe,ie,se,ue,t,c,ee))return!0}else ne+=windingLine(oe,ie,se,ue,c,ee);oe=se,ie=ue;break}}return!u&&!isAroundEqual(ie,ue)&&(ne+=windingLine(oe,ie,se,ue,c,ee)||0),ne!==0}function contain$1(n,t,u){return containPath(n,0,!1,t,u)}function containStroke(n,t,u,c){return containPath(n,t,!0,u,c)}var DEFAULT_PATH_STYLE=defaults({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},DEFAULT_COMMON_STYLE),DEFAULT_PATH_ANIMATION_PROPS={style:defaults({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},DEFAULT_COMMON_ANIMATION_PROPS.style)},pathCopyParams=TRANSFORMABLE_PROPS.concat(["invisible","culling","z","z2","zlevel","parent"]),Path=function(n){__extends(t,n);function t(u){return n.call(this,u)||this}return t.prototype.update=function(){var u=this;n.prototype.update.call(this);var c=this.style;if(c.decal){var ee=this._decalEl=this._decalEl||new t;ee.buildPath===t.prototype.buildPath&&(ee.buildPath=function(oe){u.buildPath(oe,u.shape)}),ee.silent=!0;var te=ee.style;for(var ae in c)te[ae]!==c[ae]&&(te[ae]=c[ae]);te.fill=c.fill?c.decal:null,te.decal=null,te.shadowColor=null,c.strokeFirst&&(te.stroke=null);for(var ne=0;ne<pathCopyParams.length;++ne)ee[pathCopyParams[ne]]=this[pathCopyParams[ne]];ee.__dirty|=REDRAW_BIT}else this._decalEl&&(this._decalEl=null)},t.prototype.getDecalElement=function(){return this._decalEl},t.prototype._init=function(u){var c=keys$2(u);this.shape=this.getDefaultShape();var ee=this.getDefaultStyle();ee&&this.useStyle(ee);for(var te=0;te<c.length;te++){var ae=c[te],ne=u[ae];ae==="style"?this.style?extend(this.style,ne):this.useStyle(ne):ae==="shape"?extend(this.shape,ne):n.prototype.attrKV.call(this,ae,ne)}this.style||this.useStyle({})},t.prototype.getDefaultStyle=function(){return null},t.prototype.getDefaultShape=function(){return{}},t.prototype.canBeInsideText=function(){return this.hasFill()},t.prototype.getInsideTextFill=function(){var u=this.style.fill;if(u!=="none"){if(isString(u)){var c=lum(u,0);return c>.5?DARK_LABEL_COLOR:c>.2?LIGHTER_LABEL_COLOR:LIGHT_LABEL_COLOR}else if(u)return LIGHT_LABEL_COLOR}return DARK_LABEL_COLOR},t.prototype.getInsideTextStroke=function(u){var c=this.style.fill;if(isString(c)){var ee=this.__zr,te=!!(ee&&ee.isDarkMode()),ae=lum(u,0)<DARK_MODE_THRESHOLD;if(te===ae)return c}},t.prototype.buildPath=function(u,c,ee){},t.prototype.pathUpdated=function(){this.__dirty&=-5},t.prototype.getUpdatedPathProxy=function(u){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,u),this.path},t.prototype.createPathProxy=function(){this.path=new PathProxy(!1)},t.prototype.hasStroke=function(){var u=this.style,c=u.stroke;return!(c==null||c==="none"||!(u.lineWidth>0))},t.prototype.hasFill=function(){var u=this.style,c=u.fill;return c!=null&&c!=="none"},t.prototype.getBoundingRect=function(){var u=this._rect,c=this.style,ee=!u;if(ee){var te=!1;this.path||(te=!0,this.createPathProxy());var ae=this.path;(te||this.__dirty&SHAPE_CHANGED_BIT)&&(ae.beginPath(),this.buildPath(ae,this.shape,!1),this.pathUpdated()),u=ae.getBoundingRect()}if(this._rect=u,this.hasStroke()&&this.path&&this.path.len()>0){var ne=this._rectStroke||(this._rectStroke=u.clone());if(this.__dirty||ee){ne.copy(u);var oe=c.strokeNoScale?this.getLineScale():1,ie=c.lineWidth;if(!this.hasFill()){var se=this.strokeContainThreshold;ie=Math.max(ie,se??4)}oe>1e-10&&(ne.width+=ie/oe,ne.height+=ie/oe,ne.x-=ie/oe/2,ne.y-=ie/oe/2)}return ne}return u},t.prototype.contain=function(u,c){var ee=this.transformCoordToLocal(u,c),te=this.getBoundingRect(),ae=this.style;if(u=ee[0],c=ee[1],te.contain(u,c)){var ne=this.path;if(this.hasStroke()){var oe=ae.lineWidth,ie=ae.strokeNoScale?this.getLineScale():1;if(ie>1e-10&&(this.hasFill()||(oe=Math.max(oe,this.strokeContainThreshold)),containStroke(ne,oe/ie,u,c)))return!0}if(this.hasFill())return contain$1(ne,u,c)}return!1},t.prototype.dirtyShape=function(){this.__dirty|=SHAPE_CHANGED_BIT,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},t.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},t.prototype.animateShape=function(u){return this.animate("shape",u)},t.prototype.updateDuringAnimation=function(u){u==="style"?this.dirtyStyle():u==="shape"?this.dirtyShape():this.markRedraw()},t.prototype.attrKV=function(u,c){u==="shape"?this.setShape(c):n.prototype.attrKV.call(this,u,c)},t.prototype.setShape=function(u,c){var ee=this.shape;return ee||(ee=this.shape={}),typeof u=="string"?ee[u]=c:extend(ee,u),this.dirtyShape(),this},t.prototype.shapeChanged=function(){return!!(this.__dirty&SHAPE_CHANGED_BIT)},t.prototype.createStyle=function(u){return createObject(DEFAULT_PATH_STYLE,u)},t.prototype._innerSaveToNormal=function(u){n.prototype._innerSaveToNormal.call(this,u);var c=this._normalState;u.shape&&!c.shape&&(c.shape=extend({},this.shape))},t.prototype._applyStateObj=function(u,c,ee,te,ae,ne){n.prototype._applyStateObj.call(this,u,c,ee,te,ae,ne);var oe=!(c&&te),ie;if(c&&c.shape?ae?te?ie=c.shape:(ie=extend({},ee.shape),extend(ie,c.shape)):(ie=extend({},te?this.shape:ee.shape),extend(ie,c.shape)):oe&&(ie=ee.shape),ie)if(ae){this.shape=extend({},this.shape);for(var se={},ue=keys$2(ie),le=0;le<ue.length;le++){var ce=ue[le];typeof ie[ce]=="object"?this.shape[ce]=ie[ce]:se[ce]=ie[ce]}this._transitionState(u,{shape:se},ne)}else this.shape=ie,this.dirtyShape()},t.prototype._mergeStates=function(u){for(var c=n.prototype._mergeStates.call(this,u),ee,te=0;te<u.length;te++){var ae=u[te];ae.shape&&(ee=ee||{},this._mergeStyle(ee,ae.shape))}return ee&&(c.shape=ee),c},t.prototype.getAnimationStyleProps=function(){return DEFAULT_PATH_ANIMATION_PROPS},t.prototype.isZeroArea=function(){return!1},t.extend=function(u){var c=function(te){__extends(ae,te);function ae(ne){var oe=te.call(this,ne)||this;return u.init&&u.init.call(oe,ne),oe}return ae.prototype.getDefaultStyle=function(){return clone$3(u.style)},ae.prototype.getDefaultShape=function(){return clone$3(u.shape)},ae}(t);for(var ee in u)typeof u[ee]=="function"&&(c.prototype[ee]=u[ee]);return c},t.initDefaultProps=function(){var u=t.prototype;u.type="path",u.strokeContainThreshold=5,u.segmentIgnoreThreshold=0,u.subPixelOptimize=!1,u.autoBatch=!1,u.__dirty=REDRAW_BIT|STYLE_CHANGED_BIT|SHAPE_CHANGED_BIT}(),t}(Displayable),DEFAULT_TSPAN_STYLE=defaults({strokeFirst:!0,font:DEFAULT_FONT,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},DEFAULT_PATH_STYLE),TSpan=function(n){__extends(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.hasStroke=function(){var u=this.style,c=u.stroke;return c!=null&&c!=="none"&&u.lineWidth>0},t.prototype.hasFill=function(){var u=this.style,c=u.fill;return c!=null&&c!=="none"},t.prototype.createStyle=function(u){return createObject(DEFAULT_TSPAN_STYLE,u)},t.prototype.setBoundingRect=function(u){this._rect=u},t.prototype.getBoundingRect=function(){var u=this.style;if(!this._rect){var c=u.text;c!=null?c+="":c="";var ee=getBoundingRect(c,u.font,u.textAlign,u.textBaseline);if(ee.x+=u.x||0,ee.y+=u.y||0,this.hasStroke()){var te=u.lineWidth;ee.x-=te/2,ee.y-=te/2,ee.width+=te,ee.height+=te}this._rect=ee}return this._rect},t.initDefaultProps=function(){var u=t.prototype;u.dirtyRectTolerance=10}(),t}(Displayable);TSpan.prototype.type="tspan";var DEFAULT_IMAGE_STYLE=defaults({x:0,y:0},DEFAULT_COMMON_STYLE),DEFAULT_IMAGE_ANIMATION_PROPS={style:defaults({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},DEFAULT_COMMON_ANIMATION_PROPS.style)};function isImageLike$1(n){return!!(n&&typeof n!="string"&&n.width&&n.height)}var ZRImage=function(n){__extends(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.createStyle=function(u){return createObject(DEFAULT_IMAGE_STYLE,u)},t.prototype._getSize=function(u){var c=this.style,ee=c[u];if(ee!=null)return ee;var te=isImageLike$1(c.image)?c.image:this.__image;if(!te)return 0;var ae=u==="width"?"height":"width",ne=c[ae];return ne==null?te[u]:te[u]/te[ae]*ne},t.prototype.getWidth=function(){return this._getSize("width")},t.prototype.getHeight=function(){return this._getSize("height")},t.prototype.getAnimationStyleProps=function(){return DEFAULT_IMAGE_ANIMATION_PROPS},t.prototype.getBoundingRect=function(){var u=this.style;return this._rect||(this._rect=new BoundingRect(u.x||0,u.y||0,this.getWidth(),this.getHeight())),this._rect},t}(Displayable);ZRImage.prototype.type="image";function buildPath$2(n,t){var u=t.x,c=t.y,ee=t.width,te=t.height,ae=t.r,ne,oe,ie,se;ee<0&&(u=u+ee,ee=-ee),te<0&&(c=c+te,te=-te),typeof ae=="number"?ne=oe=ie=se=ae:ae instanceof Array?ae.length===1?ne=oe=ie=se=ae[0]:ae.length===2?(ne=ie=ae[0],oe=se=ae[1]):ae.length===3?(ne=ae[0],oe=se=ae[1],ie=ae[2]):(ne=ae[0],oe=ae[1],ie=ae[2],se=ae[3]):ne=oe=ie=se=0;var ue;ne+oe>ee&&(ue=ne+oe,ne*=ee/ue,oe*=ee/ue),ie+se>ee&&(ue=ie+se,ie*=ee/ue,se*=ee/ue),oe+ie>te&&(ue=oe+ie,oe*=te/ue,ie*=te/ue),ne+se>te&&(ue=ne+se,ne*=te/ue,se*=te/ue),n.moveTo(u+ne,c),n.lineTo(u+ee-oe,c),oe!==0&&n.arc(u+ee-oe,c+oe,oe,-Math.PI/2,0),n.lineTo(u+ee,c+te-ie),ie!==0&&n.arc(u+ee-ie,c+te-ie,ie,0,Math.PI/2),n.lineTo(u+se,c+te),se!==0&&n.arc(u+se,c+te-se,se,Math.PI/2,Math.PI),n.lineTo(u,c+ne),ne!==0&&n.arc(u+ne,c+ne,ne,Math.PI,Math.PI*1.5)}var round$1=Math.round;function subPixelOptimizeLine$1(n,t,u){if(t){var c=t.x1,ee=t.x2,te=t.y1,ae=t.y2;n.x1=c,n.x2=ee,n.y1=te,n.y2=ae;var ne=u&&u.lineWidth;return ne&&(round$1(c*2)===round$1(ee*2)&&(n.x1=n.x2=subPixelOptimize$1(c,ne,!0)),round$1(te*2)===round$1(ae*2)&&(n.y1=n.y2=subPixelOptimize$1(te,ne,!0))),n}}function subPixelOptimizeRect$1(n,t,u){if(t){var c=t.x,ee=t.y,te=t.width,ae=t.height;n.x=c,n.y=ee,n.width=te,n.height=ae;var ne=u&&u.lineWidth;return ne&&(n.x=subPixelOptimize$1(c,ne,!0),n.y=subPixelOptimize$1(ee,ne,!0),n.width=Math.max(subPixelOptimize$1(c+te,ne,!1)-n.x,te===0?0:1),n.height=Math.max(subPixelOptimize$1(ee+ae,ne,!1)-n.y,ae===0?0:1)),n}}function subPixelOptimize$1(n,t,u){if(!t)return n;var c=round$1(n*2);return(c+round$1(t))%2===0?c/2:(c+(u?1:-1))/2}var RectShape=function(){function n(){this.x=0,this.y=0,this.width=0,this.height=0}return n}(),subPixelOptimizeOutputShape$1={},Rect=function(n){__extends(t,n);function t(u){return n.call(this,u)||this}return t.prototype.getDefaultShape=function(){return new RectShape},t.prototype.buildPath=function(u,c){var ee,te,ae,ne;if(this.subPixelOptimize){var oe=subPixelOptimizeRect$1(subPixelOptimizeOutputShape$1,c,this.style);ee=oe.x,te=oe.y,ae=oe.width,ne=oe.height,oe.r=c.r,c=oe}else ee=c.x,te=c.y,ae=c.width,ne=c.height;c.r?buildPath$2(u,c):u.rect(ee,te,ae,ne)},t.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},t}(Path);Rect.prototype.type="rect";var DEFAULT_RICH_TEXT_COLOR={fill:"#000"},DEFAULT_STROKE_LINE_WIDTH=2,DEFAULT_TEXT_ANIMATION_PROPS={style:defaults({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},DEFAULT_COMMON_ANIMATION_PROPS.style)},ZRText=function(n){__extends(t,n);function t(u){var c=n.call(this)||this;return c.type="text",c._children=[],c._defaultStyle=DEFAULT_RICH_TEXT_COLOR,c.attr(u),c}return t.prototype.childrenRef=function(){return this._children},t.prototype.update=function(){n.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var u=0;u<this._children.length;u++){var c=this._children[u];c.zlevel=this.zlevel,c.z=this.z,c.z2=this.z2,c.culling=this.culling,c.cursor=this.cursor,c.invisible=this.invisible}},t.prototype.updateTransform=function(){var u=this.innerTransformable;u?(u.updateTransform(),u.transform&&(this.transform=u.transform)):n.prototype.updateTransform.call(this)},t.prototype.getLocalTransform=function(u){var c=this.innerTransformable;return c?c.getLocalTransform(u):n.prototype.getLocalTransform.call(this,u)},t.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),n.prototype.getComputedTransform.call(this)},t.prototype._updateSubTexts=function(){this._childCursor=0,normalizeTextStyle(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},t.prototype.addSelfToZr=function(u){n.prototype.addSelfToZr.call(this,u);for(var c=0;c<this._children.length;c++)this._children[c].__zr=u},t.prototype.removeSelfFromZr=function(u){n.prototype.removeSelfFromZr.call(this,u);for(var c=0;c<this._children.length;c++)this._children[c].__zr=null},t.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var u=new BoundingRect(0,0,0,0),c=this._children,ee=[],te=null,ae=0;ae<c.length;ae++){var ne=c[ae],oe=ne.getBoundingRect(),ie=ne.getLocalTransform(ee);ie?(u.copy(oe),u.applyTransform(ie),te=te||u.clone(),te.union(u)):(te=te||oe.clone(),te.union(oe))}this._rect=te||u}return this._rect},t.prototype.setDefaultTextStyle=function(u){this._defaultStyle=u||DEFAULT_RICH_TEXT_COLOR},t.prototype.setTextContent=function(u){},t.prototype._mergeStyle=function(u,c){if(!c)return u;var ee=c.rich,te=u.rich||ee&&{};return extend(u,c),ee&&te?(this._mergeRich(te,ee),u.rich=te):te&&(u.rich=te),u},t.prototype._mergeRich=function(u,c){for(var ee=keys$2(c),te=0;te<ee.length;te++){var ae=ee[te];u[ae]=u[ae]||{},extend(u[ae],c[ae])}},t.prototype.getAnimationStyleProps=function(){return DEFAULT_TEXT_ANIMATION_PROPS},t.prototype._getOrCreateChild=function(u){var c=this._children[this._childCursor];return(!c||!(c instanceof u))&&(c=new u),this._children[this._childCursor++]=c,c.__zr=this.__zr,c.parent=this,c},t.prototype._updatePlainTexts=function(){var u=this.style,c=u.font||DEFAULT_FONT,ee=u.padding,te=getStyleText(u),ae=parsePlainText(te,u),ne=needDrawBackground(u),oe=!!u.backgroundColor,ie=ae.outerHeight,se=ae.outerWidth,ue=ae.contentWidth,le=ae.lines,ce=ae.lineHeight,de=this._defaultStyle;this.isTruncated=!!ae.isTruncated;var fe=u.x||0,pe=u.y||0,me=u.align||de.align||"left",ge=u.verticalAlign||de.verticalAlign||"top",De=fe,Ce=adjustTextY(pe,ae.contentHeight,ge);if(ne||ee){var we=adjustTextX(fe,se,me),xe=adjustTextY(pe,ie,ge);ne&&this._renderBackground(u,u,we,xe,se,ie)}Ce+=ce/2,ee&&(De=getTextXForPadding(fe,me,ee),ge==="top"?Ce+=ee[0]:ge==="bottom"&&(Ce-=ee[2]));for(var Re=0,Be=!1,Se=getFill("fill"in u?u.fill:(Be=!0,de.fill)),Te=getStroke("stroke"in u?u.stroke:!oe&&(!de.autoStroke||Be)?(Re=DEFAULT_STROKE_LINE_WIDTH,de.stroke):null),Ae=u.textShadowBlur>0,he=u.width!=null&&(u.overflow==="truncate"||u.overflow==="break"||u.overflow==="breakAll"),ve=ae.calculatedLineHeight,ye=0;ye<le.length;ye++){var be=this._getOrCreateChild(TSpan),_e=be.createStyle();be.useStyle(_e),_e.text=le[ye],_e.x=De,_e.y=Ce,_e.textAlign=me,_e.textBaseline="middle",_e.opacity=u.opacity,_e.strokeFirst=!0,Ae&&(_e.shadowBlur=u.textShadowBlur||0,_e.shadowColor=u.textShadowColor||"transparent",_e.shadowOffsetX=u.textShadowOffsetX||0,_e.shadowOffsetY=u.textShadowOffsetY||0),_e.stroke=Te,_e.fill=Se,Te&&(_e.lineWidth=u.lineWidth||Re,_e.lineDash=u.lineDash,_e.lineDashOffset=u.lineDashOffset||0),_e.font=c,setSeparateFont(_e,u),Ce+=ce,he&&be.setBoundingRect(new BoundingRect(adjustTextX(_e.x,ue,_e.textAlign),adjustTextY(_e.y,ve,_e.textBaseline),ue,ve))}},t.prototype._updateRichTexts=function(){var u=this.style,c=getStyleText(u),ee=parseRichText(c,u),te=ee.width,ae=ee.outerWidth,ne=ee.outerHeight,oe=u.padding,ie=u.x||0,se=u.y||0,ue=this._defaultStyle,le=u.align||ue.align,ce=u.verticalAlign||ue.verticalAlign;this.isTruncated=!!ee.isTruncated;var de=adjustTextX(ie,ae,le),fe=adjustTextY(se,ne,ce),pe=de,me=fe;oe&&(pe+=oe[3],me+=oe[0]);var ge=pe+te;needDrawBackground(u)&&this._renderBackground(u,u,de,fe,ae,ne);for(var De=!!u.backgroundColor,Ce=0;Ce<ee.lines.length;Ce++){for(var we=ee.lines[Ce],xe=we.tokens,Re=xe.length,Be=we.lineHeight,Se=we.width,Te=0,Ae=pe,he=ge,ve=Re-1,ye=void 0;Te<Re&&(ye=xe[Te],!ye.align||ye.align==="left");)this._placeToken(ye,u,Be,me,Ae,"left",De),Se-=ye.width,Ae+=ye.width,Te++;for(;ve>=0&&(ye=xe[ve],ye.align==="right");)this._placeToken(ye,u,Be,me,he,"right",De),Se-=ye.width,he-=ye.width,ve--;for(Ae+=(te-(Ae-pe)-(ge-he)-Se)/2;Te<=ve;)ye=xe[Te],this._placeToken(ye,u,Be,me,Ae+ye.width/2,"center",De),Ae+=ye.width,Te++;me+=Be}},t.prototype._placeToken=function(u,c,ee,te,ae,ne,oe){var ie=c.rich[u.styleName]||{};ie.text=u.text;var se=u.verticalAlign,ue=te+ee/2;se==="top"?ue=te+u.height/2:se==="bottom"&&(ue=te+ee-u.height/2);var le=!u.isLineHolder&&needDrawBackground(ie);le&&this._renderBackground(ie,c,ne==="right"?ae-u.width:ne==="center"?ae-u.width/2:ae,ue-u.height/2,u.width,u.height);var ce=!!ie.backgroundColor,de=u.textPadding;de&&(ae=getTextXForPadding(ae,ne,de),ue-=u.height/2-de[0]-u.innerHeight/2);var fe=this._getOrCreateChild(TSpan),pe=fe.createStyle();fe.useStyle(pe);var me=this._defaultStyle,ge=!1,De=0,Ce=getFill("fill"in ie?ie.fill:"fill"in c?c.fill:(ge=!0,me.fill)),we=getStroke("stroke"in ie?ie.stroke:"stroke"in c?c.stroke:!ce&&!oe&&(!me.autoStroke||ge)?(De=DEFAULT_STROKE_LINE_WIDTH,me.stroke):null),xe=ie.textShadowBlur>0||c.textShadowBlur>0;pe.text=u.text,pe.x=ae,pe.y=ue,xe&&(pe.shadowBlur=ie.textShadowBlur||c.textShadowBlur||0,pe.shadowColor=ie.textShadowColor||c.textShadowColor||"transparent",pe.shadowOffsetX=ie.textShadowOffsetX||c.textShadowOffsetX||0,pe.shadowOffsetY=ie.textShadowOffsetY||c.textShadowOffsetY||0),pe.textAlign=ne,pe.textBaseline="middle",pe.font=u.font||DEFAULT_FONT,pe.opacity=retrieve3(ie.opacity,c.opacity,1),setSeparateFont(pe,ie),we&&(pe.lineWidth=retrieve3(ie.lineWidth,c.lineWidth,De),pe.lineDash=retrieve2(ie.lineDash,c.lineDash),pe.lineDashOffset=c.lineDashOffset||0,pe.stroke=we),Ce&&(pe.fill=Ce);var Re=u.contentWidth,Be=u.contentHeight;fe.setBoundingRect(new BoundingRect(adjustTextX(pe.x,Re,pe.textAlign),adjustTextY(pe.y,Be,pe.textBaseline),Re,Be))},t.prototype._renderBackground=function(u,c,ee,te,ae,ne){var oe=u.backgroundColor,ie=u.borderWidth,se=u.borderColor,ue=oe&&oe.image,le=oe&&!ue,ce=u.borderRadius,de=this,fe,pe;if(le||u.lineHeight||ie&&se){fe=this._getOrCreateChild(Rect),fe.useStyle(fe.createStyle()),fe.style.fill=null;var me=fe.shape;me.x=ee,me.y=te,me.width=ae,me.height=ne,me.r=ce,fe.dirtyShape()}if(le){var ge=fe.style;ge.fill=oe||null,ge.fillOpacity=retrieve2(u.fillOpacity,1)}else if(ue){pe=this._getOrCreateChild(ZRImage),pe.onload=function(){de.dirtyStyle()};var De=pe.style;De.image=oe.image,De.x=ee,De.y=te,De.width=ae,De.height=ne}if(ie&&se){var ge=fe.style;ge.lineWidth=ie,ge.stroke=se,ge.strokeOpacity=retrieve2(u.strokeOpacity,1),ge.lineDash=u.borderDash,ge.lineDashOffset=u.borderDashOffset||0,fe.strokeContainThreshold=0,fe.hasFill()&&fe.hasStroke()&&(ge.strokeFirst=!0,ge.lineWidth*=2)}var Ce=(fe||pe).style;Ce.shadowBlur=u.shadowBlur||0,Ce.shadowColor=u.shadowColor||"transparent",Ce.shadowOffsetX=u.shadowOffsetX||0,Ce.shadowOffsetY=u.shadowOffsetY||0,Ce.opacity=retrieve3(u.opacity,c.opacity,1)},t.makeFont=function(u){var c="";return hasSeparateFont(u)&&(c=[u.fontStyle,u.fontWeight,parseFontSize(u.fontSize),u.fontFamily||"sans-serif"].join(" ")),c&&trim$1(c)||u.textFont||u.font},t}(Displayable),VALID_TEXT_ALIGN={left:!0,right:1,center:1},VALID_TEXT_VERTICAL_ALIGN={top:1,bottom:1,middle:1},FONT_PARTS=["fontStyle","fontWeight","fontSize","fontFamily"];function parseFontSize(n){return typeof n=="string"&&(n.indexOf("px")!==-1||n.indexOf("rem")!==-1||n.indexOf("em")!==-1)?n:isNaN(+n)?DEFAULT_FONT_SIZE+"px":n+"px"}function setSeparateFont(n,t){for(var u=0;u<FONT_PARTS.length;u++){var c=FONT_PARTS[u],ee=t[c];ee!=null&&(n[c]=ee)}}function hasSeparateFont(n){return n.fontSize!=null||n.fontFamily||n.fontWeight}function normalizeTextStyle(n){return normalizeStyle(n),each$3(n.rich,normalizeStyle),n}function normalizeStyle(n){if(n){n.font=ZRText.makeFont(n);var t=n.align;t==="middle"&&(t="center"),n.align=t==null||VALID_TEXT_ALIGN[t]?t:"left";var u=n.verticalAlign;u==="center"&&(u="middle"),n.verticalAlign=u==null||VALID_TEXT_VERTICAL_ALIGN[u]?u:"top";var c=n.padding;c&&(n.padding=normalizeCssArray$1(n.padding))}}function getStroke(n,t){return n==null||t<=0||n==="transparent"||n==="none"?null:n.image||n.colorStops?"#000":n}function getFill(n){return n==null||n==="none"?null:n.image||n.colorStops?"#000":n}function getTextXForPadding(n,t,u){return t==="right"?n-u[1]:t==="center"?n+u[3]/2-u[1]/2:n+u[3]}function getStyleText(n){var t=n.text;return t!=null&&(t+=""),t}function needDrawBackground(n){return!!(n.backgroundColor||n.lineHeight||n.borderWidth&&n.borderColor)}var getECData=makeInner(),setCommonECData=function(n,t,u,c){if(c){var ee=getECData(c);ee.dataIndex=u,ee.dataType=t,ee.seri