l}`:Pt.gt(He)&&(xe.value.inputAmount=`Insufficient Bridging fees: ~${Ze.toReadable(Pt).substring(0,10)} ${Dt.value.token.symbol} required`);return}je.sort((Ke,Ge)=>Ge.toTokenAmount.gt(Ke.toTokenAmount)?1:-1),fe.value=new SwapToken(ce.value).toReadable(je[0].toTokenAmount),Re.value=je,Ce.value=!1},Mt={current:{id:0,aborter:new AbortController}};function Kt(){oe.value&&ce.value&&ie.value&&!isNaN(ie.value)&&Number(ie.value)>0?Vt():(Ce.value=!1,fe.value="")}const Vt=()=>{Ce.value=!0,fe.value="",Re.value=[],xe.value.noProviders=!1;const qe=new SwapToken(oe.value);if(ie.value==null)return;let Ye;try{Ye=qe.toRaw(ie.value)}catch(He){throw console.warn(`Failed to convert amount to raw: ${He}  fromAmount.value=${ie.value} (${typeof ie.value})`),He}trackSwapEvents(SwapEventType.SwapRate,{network:te.network.name,fromToken:oe.value.name,toToken:ce.value.name}),ce.value||console.warn("No destination token selected yet, yet requesting a quote??"),Mt.current.aborter.abort();const Ze={id:Mt.current.id+1,aborter:new AbortController};Mt.current=Ze,t(`[swap/index.vue] Starting quote update  id=${Ze.id}`),Fe.getQuotes({amount:Ye,fromAddress:te.network.displayAddress(te.accountInfo.selectedAccount.address),fromToken:oe.value,toToken:ce.value,toAddress:we.value.displayAddress(Be.value)},{signal:Ze.aborter.signal}).then(He=>{if(Ze.aborter.signal.aborted){t(`[swap/index.vue] Dropping quotes due to new update  id=${Ze.id}`);return}He.length?(t(`[swap/index.vue] Found ${He.length} quotes  id=${Ze.id}`),$t(Ye,He)):(t(`[swap/index.vue] No quotes  id=${Ze.id}`),Ce.value=!1,xe.value.noProviders=!0)}).catch(He=>{if(He===Ze.aborter.signal.reason){t(`[swap/index.vue] Ignoring error due to quote request context abort  id=${Ze.id}`);return}throw He})};watch([oe,ce,ie],lodashExports.debounce(Kt,300));const Ht=qe=>{oe.value=qe,ie.value="",xe.value.inputAmount="",Ft(),ke()},$e=async qe=>{await getNetworkByName(qe.id).then(Ye=>{Ye?we.value={displayAddress:Ye.displayAddress,identicon:Ye.identicon,networkName:qe.name}:we.value={displayAddress:Ze=>Ze,identicon:()=>"",networkName:qe.name}}),ue.value=qe,ze("")},Pe=qe=>{he.value=[],Be.value="",Wt(),$e(qe).then(()=>{ke()})},Ne=qe=>{ce.value=qe,Oe(),be.value=!1},We=async qe=>{ie.value=qe,Me.value=!1,xe.value.inputAmount=""},Xe=qe=>{Be.value=qe,Oe(),Te.value=!1},Wt=()=>{le.value=!le.value},Ft=()=>{ye.value=!ye.value},jt=()=>{be.value=!be.value},ea=()=>{_e.value=!_e.value},Xt=()=>{ge.value=!ge.value,(me.value===SwapError.NETWORK_NOT_SUPPORTED||me.value===SwapError.TEMP_NOT_SUPPORTED)&&!ge.value&&u.go(-1)},Yt=computed(()=>!ie.value||ie.value==="0"||xe.value.inputAmount?"Enter valid amount":ce.value?!Be.value||!Se.value?"Enter address":"Preview swap":"Select To Token"),Rt=computed(()=>!!(!ie.value||ie.value==="0"||xe.value.inputAmount||!ce.value||!Be.value||!Se.value||!Re.value.length)),Le=async()=>{ea();const qe=new MarketData;let Ye;oe.value.cgId?Ye=await qe.getMarketData([oe.value.cgId]).then(na=>na[0].current_price):(console.warn(`Source token ${oe.value.symbol} (${oe.value.name}) ${oe.value.address} has no CoinGecko ID, setting price to 0`),Ye=0);let Ze;ce.value.cgId?Ze=await qe.getMarketData([ce.value.cgId]).then(na=>na[0].current_price):(console.warn(`Destination token ${ce.value.symbol} (${ce.value.name}) ${ce.value.address} has no CoinGecko ID, setting price to 0`),Ze=0);const He={...oe.value},je={...ce.value};He.price=Ye??void 0,je.price=Ze??void 0,He.balance=Re.value[0].fromTokenAmount,je.balance=Re.value[0].toTokenAmount;const Ke=new SwapToken(je),Ge=new SwapToken(He),Pt=BigNumber$1(Ge.getFiatTotal()).div(Ke.getFiatTotal()).toString(),Gt=Re.value.map(na=>Fe.getSwap(na.quote)),Zt=await Promise.all(Gt).then(na=>na.filter(ra=>!!ra)),aa=Zt.map(na=>na.getStatusObject({transactions:[]})),ta=await Promise.all(aa);if(Zt.forEach((na,ra)=>na.status=ta[ra]),!Zt.length){me.value=SwapError.NO_TRADES,ea(),Xt();return}const ia={trades:Zt,fromToken:He,toToken:je,priceDifference:Pt,nativeBalance:Dt.value.getBalanceRaw()||libExports.toBN("0"),nativePrice:Dt.value.getFiatValue()||0,existentialDeposit:te.network.existentialDeposit||libExports.toBN("0"),fromAddress:te.accountInfo.selectedAccount.address,toAddress:Be.value},oa=u.resolve({name:routes.swapBestOffer.name,query:{id:ae,swapData:Buffer.from(JSON.stringify(ia),"utf8").toString("base64")}});te.accountInfo.selectedAccount.isHardware?(await Browser$1.windows.create({url:Browser$1.runtime.getURL(getUiPath(`${RouteNames.swapVerifyHW.path}?id=${oa.query.id}&swapData=${oa.query.swapData}`,ProviderName.enkrypt)),type:"popup",focused:!0,height:600,width:460}),window.close()):u.push(oa)};return(qe,Ye)=>(openBlock(),createElementBlock("div",null,[createBaseVNode("div",_hoisted_1$x,[unref(ae)?(openBlock(),createElementBlock("div",_hoisted_2$s,[createBaseVNode("div",_hoisted_3$p,[Ye[3]||(Ye[3]=createBaseVNode("h3",null,"Swap",-1)),createBaseVNode("a",{class:"swap__close",onClick:Ye[0]||(Ye[0]=Ze=>unref(u).go(-1))},[createVNode$1(CloseIcon)])]),createBaseVNode("div",_hoisted_4$l,[oe.value?(openBlock(),createBlock(SwapTokenAmountInput,{key:0,value:ie.value||"",token:oe.value,autofocus:!0,"error-message":xe.value.inputAmount,"onUpdate:inputMax":Ve,"onToggle:select":Ft,"onUpdate:value":We},null,8,["value","token","error-message"])):createCommentVNode("",!0),createBaseVNode("a",_hoisted_5$d,[createVNode$1(SwapArrows)]),ue.value?(openBlock(),createBlock(_sfc_main$B,{key:1,network:ue.value,"onToggle:select":Wt},null,8,["network"])):createCommentVNode("",!0),createVNode$1(SwapTokenToAmount,{token:ce.value,"is-finding-rate":Ce.value,"fast-list":pe.value,"total-tokens":de.value.length-pe.value.length,amount:fe.value,"no-providers":xe.value.noProviders,"onUpdate:selectAsset":Ne,"onToggle:select":jt},null,8,["token","is-finding-rate","fast-list","total-tokens","amount","no-providers"]),createVNode$1(_sfc_main$E,{ref_key:"addressInput",ref:Ae,value:Be.value,"is-valid-address":Se.value,"network-name":we.value.networkName,"display-address":we.value.displayAddress,identicon:we.value.identicon,"onUpdate:inputAddress":ze,"onToggle:showContacts":Ue},null,8,["value","is-valid-address","network-name","display-address","identicon"]),createVNode$1(_sfc_main$C,{"show-accounts":Te.value,accounts:he.value,address:Be.value,"display-address":we.value.displayAddress,identicon:we.value.identicon,"onSelected:account":Xe,"onUpdate:pasteFromClipboard":Ye[1]||(Ye[1]=Ze=>Ae.value.pasteFromClipboard()),onClose:Ue},null,8,["show-accounts","accounts","address","display-address","identicon"])]),createBaseVNode("div",_hoisted_6$9,[createBaseVNode("div",_hoisted_7$2,[createVNode$1(_sfc_main$2W,{title:"Cancel","no-background":!0,onClick:Ye[2]||(Ye[2]=Ze=>unref(u).go(-1))})]),createBaseVNode("div",_hoisted_8,[createVNode$1(_sfc_main$2W,{title:Yt.value,click:Le,disabled:Rt.value},null,8,["title","disabled"])])])])):createCommentVNode("",!0)]),le.value?(openBlock(),createBlock(_sfc_main$G,{key:0,assets:se.value,onClose:Wt,"onUpdate:selectAsset":Pe},null,8,["assets"])):createCommentVNode("",!0),ye.value?(openBlock(),createBlock(_sfc_main$I,{key:1,assets:ne.value,onClose:Ft,"onUpdate:selectAsset":Ht},null,8,["assets"])):createCommentVNode("",!0),withDirectives(createVNode$1(_sfc_main$I,{"is-select-to-token":!0,assets:de.value,"is-loading":ve.value,onClose:jt,"onUpdate:selectAsset":Ne},null,8,["assets","is-loading"]),[[vShow,be.value]]),withDirectives(createVNode$1(SwapLooking,{"loading-type":De.value,close:ea},null,8,["loading-type"]),[[vShow,_e.value]]),ge.value?(openBlock(),createBlock(SwapErrorPopup,{key:2,error:me.value,"network-name":n.network.name_long,close:Xt},null,8,["error","network-name"])):createCommentVNode("",!0)]))}}),Swap=_export_sfc(_sfc_main$A,[["__scopeId","data-v-b746e42d"]]),_hoisted_1$w={class:"send-alert"},_sfc_main$z=defineComponent({__name:"send-alert",props:{errorMsg:{}},setup(n){return(t,u)=>(openBlock(),createElementBlock("div",_hoisted_1$w,[createVNode$1(AlertIcon),createBaseVNode("p",null,toDisplayString$1(t.errorMsg),1)]))}}),_hoisted_1$v={key:0,class:"verify-transaction"},_hoisted_2$r={class:"verify-transaction__error"},_hoisted_3$o={class:"verify-transaction__buttons-cancel"},_hoisted_4$k={class:"verify-transaction__buttons-send"},_sfc_main$y=defineComponent({__name:"index",setup(n,{expose:t}){const u=ref(!1),c=ref(),ee=ref(),te=ref(),ae=new PublicKeyRing,ne=useRoute(),oe=useRouter(),ie=ne.query.id,se=JSON.parse(Buffer.from(ne.query.txData,"base64").toString("utf8")),ue=ref(""),le=ref(!1),ce=getCurrentContext()==="new-window",de=ref(!1),fe=ref();t({verifyScrollRef:fe});const pe=ref(DEFAULT_KADENA_NETWORK);onBeforeMount(async()=>{pe.value=await getNetworkByName(ie),c.value=await ae.getAccount(se.fromAddress),ee.value=se.chainId,de.value=c.value.isHardware,te.value=new KDAToken({icon:pe.value.icon,balance:"0",price:"0",name:"loading",symbol:"loading",decimals:pe.value.decimals})});const me=()=>{getCurrentContext()==="popup"?oe.go(-1):window.close()},ge=async()=>{le.value=!0;try{const Ce=await te.value.buildTransaction(se.toAddress,c.value,se.TransactionData.value,pe.value,ee.value),xe=await(await pe.value.api()).sendTransaction(Ce,ee.value),Re={from:pe.value.displayAddress(se.fromAddress),to:pe.value.displayAddress(se.toAddress),isIncoming:se.fromAddress===se.toAddress,network:pe.value.name,status:ActivityStatus.pending,chainId:ee.value,timestamp:new Date().getTime(),token:{decimals:se.toToken.decimals,icon:se.toToken.icon,name:se.toToken.name,symbol:se.toToken.symbol,price:se.toToken.price},type:ActivityType.transaction,value:se.toToken.amount,transactionHash:xe.requestKey};await new ActivityState().addActivities([Re],{address:pe.value.displayAddress(se.fromAddress),network:pe.value.name}),u.value=!0,getCurrentContext()==="popup"?setTimeout(()=>{le.value=!1,oe.push({name:"activity",params:{id:pe.value.name}})},2500):setTimeout(()=>{le.value=!1,window.close()},1500)}catch(Ce){le.value=!1,console.error("error",Ce),ue.value=`Error: ${Ce.message||"Could not send the transaction"}`}},De=()=>fe.value?fe.value.$el.classList.contains("ps--active-y"):!1;return(Ce,we)=>(openBlock(),createElementBlock("div",{class:normalizeClass$1(["container",{popup:ce}])},[unref(ie)?(openBlock(),createElementBlock("div",_hoisted_1$v,[createVNode$1(CustomScrollbar,{ref_key:"verifyScrollRef",ref:fe,class:"verify-transaction__scroll-area"},{default:withCtx(()=>{var xe;return[createBaseVNode("div",{class:normalizeClass$1(["verify-transaction__header",{popup:ce}])},[we[0]||(we[0]=createBaseVNode("h3",null,"Verify Transaction",-1)),ce?createCommentVNode("",!0):(openBlock(),createElementBlock("a",{key:0,class:"verify-transaction__close",onClick:me},[createVNode$1(CloseIcon)]))],2),createVNode$1(_sfc_main$31,{"wallet-type":(xe=c.value)==null?void 0:xe.walletType},null,8,["wallet-type"]),createBaseVNode("p",{class:normalizeClass$1(["verify-transaction__description",{popup:ce}])}," Double check the information and confirm transaction ",2),createBaseVNode("div",{class:normalizeClass$1(["verify-transaction__info",{popup:ce,border:De()}])},[createVNode$1(_sfc_main$32,{network:pe.value},null,8,["network"]),createVNode$1(_sfc_main$33,{name:unref(se).fromAddressName,address:pe.value.displayAddress(unref(se).fromAddress),from:!0,network:pe.value},null,8,["name","address","network"]),createVNode$1(_sfc_main$33,{address:pe.value.displayAddress(unref(se).toAddress),network:pe.value},null,8,["address","network"]),createVNode$1(_sfc_main$34,{token:unref(se).toToken},null,8,["token"]),createVNode$1(_sfc_main$35,{fee:unref(se).txFee},null,8,["fee"])],2)]}),_:1},512),createBaseVNode("div",_hoisted_2$r,[withDirectives(createVNode$1(_sfc_main$z,{"error-msg":ue.value},null,8,["error-msg"]),[[vShow,ue.value]])]),createBaseVNode("div",{class:normalizeClass$1(["verify-transaction__buttons",{popup:ce,border:De()}])},[createBaseVNode("div",_hoisted_3$o,[createVNode$1(_sfc_main$2W,{title:"Back",click:me,gray:!0,disabled:le.value},null,8,["disabled"])]),createBaseVNode("div",_hoisted_4$k,[createVNode$1(_sfc_main$2W,{title:"Confirm and send",click:ge,disabled:le.value},null,8,["disabled"])])],2)])):createCommentVNode("",!0),le.value?(openBlock(),createBlock(SendProcess,{key:1,"is-done":u.value,"is-nft":!1,"to-address":unref(se).toAddress,network:pe.value,token:unref(se).toToken,"is-window-popup":de.value},null,8,["is-done","to-address","network","token","is-window-popup"])):createCommentVNode("",!0)],2))}}),VerifyTransactionKadena=_export_sfc(_sfc_main$y,[["__scopeId","data-v-7d88f5e7"]]),_sfc_main$x=defineComponent({__name:"index",setup(n){const t={[ProviderName.ethereum]:ethHWVerify,[ProviderName.polkadot]:dotHWVerify,[ProviderName.bitcoin]:btcHWVerify,[ProviderName.kadena]:VerifyTransactionKadena,[ProviderName.solana]:solHWVerify,[ProviderName.enkrypt]:null},u=shallowRef(),ee=useRoute().query.id;return getNetworkByName(ee).then(te=>{te&&(u.value=t[te.provider])}),(te,ae)=>(openBlock(),createBlock(resolveDynamicComponent(u.value),normalizeProps$1(guardReactiveProps(te.$props)),null,16))}}),_hoisted_1$u={class:"send-address-input__avatar"},_hoisted_2$q=["src"],_hoisted_3$n={class:"send-address-input__address"},_hoisted_4$j={key:0},_hoisted_5$c={key:1},_hoisted_6$8=["disabled"],_sfc_main$w=defineComponent({__name:"send-address-input",props:{value:{type:String,default:()=>""},from:{type:Boolean,default:!1},network:{type:Object,default:()=>({})},disableDirectInput:Boolean},emits:["update:inputAddress","toggle:showContacts"],setup(n,{expose:t,emit:u}){const c=u,ee=n,te=ref(),ae=ref(!1);t({addressInput:te,pasteFromClipboard:()=>{var ue;(ue=te.value)==null||ue.focus(),document.execCommand("paste")}});const oe=computed({get:()=>{try{return ae.value&&ie.value?ee.network.displayAddress(ee.value):ie.value?replaceWithEllipsis(ee.network.displayAddress(ee.value),6,6):ee.value}catch{return ee.value}},set:ue=>{ue&&c("update:inputAddress",ue)}}),ie=computed(()=>{try{return encodeAddress(ee.value),!0}catch{return!1}}),se=ue=>{ae.value=ue.type==="focus",ae.value&&c("toggle:showContacts",ae.value)};return(ue,le)=>(openBlock(),createElementBlock("div",{class:normalizeClass$1(["send-address-input",{focus:ae.value}])},[createBaseVNode("div",_hoisted_1$u,[ie.value?(openBlock(),createElementBlock("img",{key:0,src:n.network.identicon(n.value),alt:""},null,8,_hoisted_2$q)):createCommentVNode("",!0)]),createBaseVNode("div",_hoisted_3$n,[n.from?(openBlock(),createElementBlock("p",_hoisted_5$c,"From:")):(openBlock(),createElementBlock("p",_hoisted_4$j,"To:")),withDirectives(createBaseVNode("input",{ref_key:"addressInput",ref:te,"onUpdate:modelValue":le[0]||(le[0]=ce=>oe.value=ce),type:"text",disabled:n.disableDirectInput,placeholder:"address",style:normalizeStyle$2({color:ie.value?"black":"red"}),onFocus:se,onBlur:se},null,44,_hoisted_6$8),[[vModelText,oe.value]])])],2))}}),_hoisted_1$t={class:"send-address-item__info"},_hoisted_2$p=["src"],_hoisted_3$m={class:"send-address-item__name"},_hoisted_4$i={key:0},_sfc_main$v=defineComponent({__name:"send-address-item",props:{network:{type:Object,default:()=>({})},account:{type:Object,default:()=>({})},isChecked:{type:Boolean,default:!1}},emits:["selected:account"],setup(n,{emit:t}){const u=t;return(c,ee)=>(openBlock(),createElementBlock("a",{class:"send-address-item",onClick:ee[0]||(ee[0]=te=>u("selected:account",n.account.address))},[createBaseVNode("div",_hoisted_1$t,[createBaseVNode("img",{src:n.network.identicon(n.network.displayAddress(n.account.address))},null,8,_hoisted_2$p),createBaseVNode("div",_hoisted_3$m,[n.account.name!=null?(openBlock(),createElementBlock("h4",_hoisted_4$i,toDisplayString$1(n.account.name),1)):createCommentVNode("",!0),createBaseVNode("p",null,toDisplayString$1(c.$filters.replaceWithEllipsis(n.network.displayAddress(n.account.address),6,4)),1)])]),withDirectives(createVNode$1(DoneIcon,{class:"send-address-item__checked"},null,512),[[vShow,n.isChecked]])]))}}),_sfc_main$u={},_hoisted_1$s={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$1(n,t){return openBlock(),createElementBlock("svg",_hoisted_1$s,t[0]||(t[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10 2.66663L10.8 2.66663C11.9201 2.66663 12.4802 2.66663 12.908 2.88461C13.2843 3.07636 13.5903 3.38232 13.782 3.75865C14 4.18647 14 4.74652 14 5.86663V11.4666C14 12.5867 14 13.1468 13.782 13.5746C13.5903 13.9509 13.2843 14.2569 12.908 14.4486C12.4802 14.6666 11.9201 14.6666 10.8 14.6666H5.2C4.0799 14.6666 3.51984 14.6666 3.09202 14.4486C2.71569 14.2569 2.40973 13.9509 2.21799 13.5746C2 13.1468 2 12.5867 2 11.4666V5.86663C2 4.74652 2 4.18647 2.21799 3.75865C2.40973 3.38232 2.71569 3.07636 3.09202 2.88461C3.51984 2.66663 4.0799 2.66663 5.2 2.66663L6 2.66663C6 1.56206 6.89543 0.666626 8 0.666626C9.10457 0.666626 10 1.56206 10 2.66663ZM11.1698 5.18095C11.305 4.91578 11.3284 4.58289 11.3325 4.00117C11.6197 4.00321 11.8314 4.00859 12.005 4.02278C12.1292 4.03293 12.2044 4.04567 12.25 4.05642C12.2717 4.06153 12.2851 4.06582 12.2923 4.06839C12.2992 4.07087 12.3021 4.07235 12.3027 4.07262C12.4281 4.13654 12.5301 4.23852 12.594 4.36397C12.5943 4.3645 12.5958 4.36741 12.5982 4.37434C12.6008 4.38156 12.6051 4.39492 12.6102 4.41663C12.621 4.46226 12.6337 4.5374 12.6438 4.66161C12.6656 4.92822 12.6667 5.28457 12.6667 5.86663V11.4666C12.6667 12.0487 12.6656 12.405 12.6438 12.6716C12.6337 12.7958 12.621 12.871 12.6102 12.9166C12.6051 12.9383 12.6008 12.9517 12.5982 12.9589C12.5958 12.9658 12.5943 12.9687 12.594 12.9693C12.5301 13.0947 12.4281 13.1967 12.3027 13.2606C12.3021 13.2609 12.2992 13.2624 12.2923 13.2649C12.2851 13.2674 12.2717 13.2717 12.25 13.2768C12.2044 13.2876 12.1292 13.3003 12.005 13.3105C11.7384 13.3323 11.3821 13.3333 10.8 13.3333H5.2C4.61795 13.3333 4.26159 13.3323 3.99498 13.3105C3.87078 13.3003 3.79563 13.2876 3.75 13.2768C3.72829 13.2717 3.71494 13.2674 3.70772 13.2649C3.70078 13.2624 3.69788 13.2609 3.69734 13.2606C3.5719 13.1967 3.46991 13.0947 3.406 12.9693C3.40572 12.9687 3.40424 12.9658 3.40177 12.9589C3.39919 12.9517 3.39491 12.9383 3.38979 12.9166C3.37905 12.871 3.3663 12.7958 3.35615 12.6716C3.33437 12.405 3.33333 12.0487 3.33333 11.4666V5.86663C3.33333 5.28457 3.33437 4.92822 3.35615 4.66161C3.3663 4.5374 3.37905 4.46226 3.38979 4.41663C3.39491 4.39492 3.39919 4.38156 3.40177 4.37434C3.40424 4.36741 3.40572 4.3645 3.406 4.36397C3.46991 4.23852 3.5719 4.13654 3.69734 4.07262C3.69788 4.07235 3.70078 4.07087 3.70772 4.06839C3.71494 4.06582 3.72829 4.06153 3.75 4.05642C3.79563 4.04567 3.87078 4.03293 3.99498 4.02278C4.16859 4.00859 4.38026 4.00321 4.66752 4.00117C4.67159 4.58289 4.69505 4.91578 4.83016 5.18095C4.97397 5.46319 5.20344 5.69266 5.48568 5.83647C5.80655 5.99996 6.22659 5.99996 7.06666 5.99996H8.93333C9.77341 5.99996 10.1935 5.99996 10.5143 5.83647C10.7966 5.69266 11.026 5.46319 11.1698 5.18095ZM8 3.33329C8.36819 3.33329 8.66667 3.03482 8.66667 2.66663C8.66667 2.29844 8.36819 1.99996 8 1.99996C7.63181 1.99996 7.33333 2.29844 7.33333 2.66663C7.33333 3.03482 7.63181 3.33329 8 3.33329Z",fill:"black"},null,-1)]))}const PasteIcon=_export_sfc(_sfc_main$u,[["render",_sfc_render$1],["__scopeId","data-v-872f187a"]]);var an;class RecentlySentAddressesState{constructor(){un(this,an);Ki(this,an,new BrowserStorage(InternalStorageNamespace.recentlySentAddresses))}async addRecentlySentAddress(t,u){const c=t.name,ee=await Qa(this,an).get(c),te={...ee,addresses:Array.from(new Set([t.displayAddress(u),...(ee==null?void 0:ee.addresses)??[]])).slice(0,5)};await Qa(this,an).set(c,te)}async getRecentlySentAddresses(t){const u=t,c=await Qa(this,an).get(u);return c?c.addresses:[]}}an=new WeakMap;const _hoisted_1$r={key:0,class:"send-contacts-list__block"},_hoisted_2$o={class:"send-contacts-list__buttons"},_hoisted_3$l={class:"send-contacts-list__list"},_hoisted_4$h={class:"send-contacts-list__list"},_hoisted_5$b={key:1,class:"send-contacts-list__block"},_hoisted_6$7={class:"send-contacts-list__block-header"},_hoisted_7$1={class:"send-contacts-list__list"},_sfc_main$t=defineComponent({__name:"send-contacts-list",props:{showAccounts:Boolean,accountInfo:{type:Object,default:()=>({})},network:{type:Object,default:()=>({})},address:{type:String,default:""}},emits:["update:pasteFromClipboard","close"],setup(n,{emit:t}){const u=t,c=ref(!1),ee=n,te=new RecentlySentAddressesState,ae=ref(null),ne=le=>{try{return!!ee.address&&ee.network.displayAddress(ee.address)===ee.network.displayAddress(le)}catch(ce){return console.error("Error checking if address is checked",ce),!1}};onMounted(async function(){let le=!1;const ce=setTimeout(function(){console.error("Timed out getting recently sent addresses"),ae.value=[],le=!0},500);try{const de=await te.getRecentlySentAddresses(ee.network.name);le||(ae.value=Array.from(new Set(de.map(fe=>ee.network.displayAddress(fe)))))}catch(de){console.error("Error getting recently sent addresses",de),ae.value=[]}finally{clearTimeout(ce)}});const oe=()=>{u("close",!1)},ie=()=>{c.value=!0},se=()=>{c.value=!1},ue=()=>{u("update:pasteFromClipboard")};return(le,ce)=>(openBlock(),createElementBlock("div",{class:normalizeClass$1(["send-contacts-list",{show:n.showAccounts}])},[createBaseVNode("div",{class:"send-contacts-list__overlay",onClick:oe}),createBaseVNode("div",{class:normalizeClass$1(["send-contacts-list__wrap",{show:n.showAccounts,header:c.value}])},[createVNode$1(CustomScrollbar,{class:"send-contacts-list__scroll-area",settings:unref(scrollSettings)({suppressScrollX:!0})},{default:withCtx(()=>[ae.value&&!c.value?(openBlock(),createElementBlock("div",_hoisted_1$r,[createBaseVNode("div",_hoisted_2$o,[createVNode$1(_sfc_main$2W,{title:"Send to my address",click:ie}),createBaseVNode("a",{class:"send-contacts-list__buttons-paste",onClick:ue},[createVNode$1(PasteIcon),ce[1]||(ce[1]=createTextVNode(" Paste "))])]),ae.value.length?(openBlock(),createElementBlock(Fragment,{key:0},[ce[2]||(ce[2]=createBaseVNode("h3",null,"Recent",-1)),createBaseVNode("div",_hoisted_3$l,[(openBlock(!0),createElementBlock(Fragment,null,renderList(ae.value,(de,fe)=>{var pe;return openBlock(),createBlock(_sfc_main$v,mergeProps({key:fe,account:{address:de,name:(pe=n.accountInfo.activeAccounts.find(me=>n.network.displayAddress(me.address)===n.network.displayAddress(de)))==null?void 0:pe.name},network:n.network,ref_for:!0},le.$attrs,{"is-checked":ne(de)}),null,16,["account","network","is-checked"])}),128))])],64)):createCommentVNode("",!0),ce[3]||(ce[3]=createBaseVNode("h3",null,"My accounts",-1)),createBaseVNode("div",_hoisted_4$h,[(openBlock(!0),createElementBlock(Fragment,null,renderList(n.accountInfo.activeAccounts,(de,fe)=>(openBlock(),createBlock(_sfc_main$v,mergeProps({key:fe,account:de,network:n.network,ref_for:!0},le.$attrs,{"is-checked":ne(de.address)}),null,16,["account","network","is-checked"]))),128))])])):createCommentVNode("",!0),c.value?(openBlock(),createElementBlock("div",_hoisted_5$b,[createBaseVNode("div",_hoisted_6$7,[createBaseVNode("a",{class:"send-contacts-list__block-back",onClick:ce[0]||(ce[0]=de=>se())},[createVNode$1(ArrowBack)]),ce[4]||(ce[4]=createBaseVNode("h4",null,"My accounts",-1))]),createBaseVNode("div",_hoisted_7$1,[(openBlock(!0),createElementBlock(Fragment,null,renderList(n.accountInfo.activeAccounts,(de,fe)=>(openBlock(),createBlock(_sfc_main$v,mergeProps({key:fe,account:de,network:n.network,ref_for:!0},le.$attrs,{"is-checked":ne(de.address)}),null,16,["account","network","is-checked"]))),128))])])):createCommentVNode("",!0)]),_:1},8,["settings"])],2)],2))}}),SendContactsList=_export_sfc(_sfc_main$t,[["__scopeId","data-v-f44297cc"]]),_sfc_main$s=defineComponent({__name:"send-from-contacts-list",props:{showAccounts:Boolean,accountInfo:{type:Object,default:()=>({})},network:{type:Object,default:()=>({})},address:{type:String,default:""}},emits:["update:pasteFromClipboard","close"],setup(n,{emit:t}){const u=t,c=()=>{u("close",!1)};return(ee,te)=>(openBlock(),createElementBlock("div",{class:normalizeClass$1(["send-from-contacts-list",{show:n.showAccounts}])},[createBaseVNode("div",{class:"send-from-contacts-list__overlay",onClick:c}),createBaseVNode("div",{class:normalizeClass$1(["send-from-contacts-list__wrap",{show:n.showAccounts}])},[createVNode$1(CustomScrollbar,{class:"send-from-contacts-list__scroll-area",settings:unref(scrollSettings)({suppressScrollX:!0})},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(n.accountInfo.activeAccounts,(ae,ne)=>(openBlock(),createBlock(_sfc_main$v,mergeProps({key:ne,account:ae,network:n.network,ref_for:!0},ee.$attrs,{"is-checked":n.address==ae.address}),null,16,["account","network","is-checked"]))),128))]),_:1},8,["settings"])],2)],2))}}),_hoisted_1$q={class:"send-token-select__image"},_hoisted_2$n=["src"],_hoisted_3$k={class:"send-token-select__info"},_hoisted_4$g={class:"send-token-select__arrow"},_sfc_main$r=defineComponent({__name:"send-token-select",props:{token:{}},emits:["update:toggleTokenSelect"],setup(n,{emit:t}){const u=t,c=n,ee=computed(()=>c.token&&c.token.balance?fromBase(c.token.balance,c.token.decimals):void 0);return(te,ae)=>(openBlock(),createElementBlock("a",{class:"send-token-select",onClick:ae[0]||(ae[0]=ne=>u("update:toggleTokenSelect"))},[createBaseVNode("div",_hoisted_1$q,[createBaseVNode("img",{src:te.token.icon,alt:""},null,8,_hoisted_2$n)]),createBaseVNode("div",_hoisted_3$k,[createBaseVNode("h5",null,toDisplayString$1(te.token.name),1),createBaseVNode("p",null,[createTextVNode(toDisplayString$1(ee.value?te.$filters.formatFloatingPointValue(ee.value).value:"~")+" ",1),createBaseVNode("span",null,toDisplayString$1(te.token.symbol),1)])]),createBaseVNode("div",_hoisted_4$g,[createVNode$1(SwitchArrow)])]))}}),_sfc_main$q={},_hoisted_1$p={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render(n,t){return openBlock(),createElementBlock("svg",_hoisted_1$p,t[0]||(t[0]=[createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.6667 3.99998C11.0349 3.99998 11.3334 4.29846 11.3334 4.66665L11.3331 10.39L12.0809 9.64296C12.3212 9.40264 12.6994 9.38415 12.9609 9.5875L13.0237 9.64296C13.264 9.88329 13.2825 10.2614 13.0792 10.523L13.0237 10.5858L11.1381 12.4714C11.038 12.5715 10.9139 12.6331 10.7843 12.6563L10.706 12.6655H10.6273C10.4963 12.6578 10.3671 12.6116 10.2581 12.5268L10.1953 12.4714L8.30966 10.5858C8.04931 10.3254 8.04931 9.90331 8.30966 9.64296C8.54999 9.40264 8.92814 9.38415 9.18967 9.5875L9.25247 9.64296L9.99973 10.39L10 4.66665C10 4.29846 10.2985 3.99998 10.6667 3.99998ZM5.37271 3.33447C5.52998 3.34372 5.68459 3.40842 5.80476 3.52858L7.69037 5.4142C7.95072 5.67455 7.95072 6.09666 7.69037 6.35701C7.43003 6.61736 7.00792 6.61736 6.74757 6.35701L5.99973 5.60932L6.00002 11.3333C6.00002 11.7015 5.70154 12 5.33335 12C4.96516 12 4.66668 11.7015 4.66668 11.3333L4.6664 5.60932L3.91914 6.35701C3.65879 6.61736 3.23668 6.61736 2.97633 6.35701C2.71598 6.09666 2.71598 5.67455 2.97633 5.4142L4.86195 3.52858C4.98211 3.40842 5.13673 3.34372 5.294 3.33447H5.37271Z",fill:"#202124"},null,-1)]))}const SwitchArrowIcon=_export_sfc(_sfc_main$q,[["render",_sfc_render],["__scopeId","data-v-74f7803a"]]),_hoisted_1$o={class:"send-input-amount__fiat"},_sfc_main$p=defineComponent({__name:"send-input-amount",props:{hasEnoughBalance:{type:Boolean,default:!1},fiatValue:{type:String,default:"1"},amount:{type:String,default:""},showMax:{type:Boolean,default:!0}},emits:["update:inputAmount","update:inputSetMax"],setup(n,{expose:t,emit:u}){const c=u,ee=ref(!1),te=ref();t({inputRef:te});const ae=n,ne=computed(()=>new BigNumber$1(ae.fiatValue).times(ae.amount).toString()),oe=computed({get:()=>ae.amount,set:ue=>{let le=ue.toString();le==="."&&(le="0."),c("update:inputAmount",le)}}),ie=ue=>{const le=ue.keyCode?ue.keyCode:ue.which;le>=48&&le<=57||le===46&&oe.value.indexOf(".")===-1||ue.preventDefault()},se=()=>{ee.value=!ee.value};return(ue,le)=>(openBlock(),createElementBlock("div",{class:normalizeClass$1(["send-input-amount",{focus:ee.value}])},[withDirectives(createBaseVNode("input",{ref_key:"inputRef",ref:te,"onUpdate:modelValue":le[0]||(le[0]=ce=>oe.value=ce),type:"text",placeholder:"0",style:normalizeStyle$2({color:n.hasEnoughBalance?"black":"red"}),onKeypress:ie,onFocus:se,onBlur:se},null,36),[[vModelText,oe.value]]),createBaseVNode("div",_hoisted_1$o,[createVNode$1(SwitchArrowIcon),createBaseVNode("span",null,"$"+toDisplayString$1(ue.$filters.formatFiatValue(ne.value).value),1)]),withDirectives(createBaseVNode("a",{class:"send-input-amount__max",onClick:le[1]||(le[1]=ce=>c("update:inputSetMax"))}," Max ",512),[[vShow,n.showMax]])],2))}}),_hoisted_1$n={class:"send-fee-select__value"},_hoisted_2$m={class:"send-fee-select__value-fiat"},_hoisted_3$j={class:"send-fee-select__value-crypto"},_sfc_main$o=defineComponent({__name:"send-fee-select",props:{fee:{type:Object,default:()=>({})},inSwap:{type:Boolean,default:()=>!1}},setup(n){return(t,u)=>(openBlock(),createElementBlock("a",{class:normalizeClass$1(["send-fee-select",{swap:n.inSwap}])},[createBaseVNode("div",_hoisted_1$n,[createBaseVNode("p",_hoisted_2$m," Fee: "+toDisplayString$1(n.fee.fiatValue?t.$filters.formatFiatValue(n.fee.fiatValue).value:"")+" "+toDisplayString$1(n.fee.fiatSymbol??""),1),createBaseVNode("p",_hoisted_3$j,[createTextVNode(toDisplayString$1(n.fee.nativeValue?t.$filters.formatFloatingPointValue(n.fee.nativeValue).value:"~")+" ",1),createBaseVNode("span",null,toDisplayString$1(n.fee.nativeSymbol),1)])])],2))}});var AlertType=(n=>(n[n.ED_WARN=0]="ED_WARN",n[n.DESTINATION_BALANCE=1]="DESTINATION_BALANCE",n))(AlertType||{});const _hoisted_1$m={class:"send-alert"},_hoisted_2$l={key:0},_hoisted_3$i={key:1},_sfc_main$n=defineComponent({__name:"send-alert",props:{alertType:{type:Number,default:()=>0},existentialBalance:{type:String,default:()=>"0"}},setup(n){return(t,u)=>(openBlock(),createElementBlock("div",_hoisted_1$m,[createVNode$1(AlertIcon),n.alertType===unref(AlertType).ED_WARN?(openBlock(),createElementBlock("p",_hoisted_2$l,u[0]||(u[0]=[createTextVNode(" Your balance will go the minimum balance, which will drop your remaining balance to 0."),createBaseVNode("br",null,null,-1),createBaseVNode("a",{target:"_blank",rel:"noreferrer",href:"https://support.polkadot.network/support/solutions/articles/65000168651-what-is-the-existential-deposit-#:~:text=Print&text=On%20the%20Polkadot%20network%2C%20an,the%20Existential%20Deposit%20(ED)."},"What is Existential Deposit?",-1)]))):createCommentVNode("",!0),n.alertType===unref(AlertType).DESTINATION_BALANCE?(openBlock(),createElementBlock("p",_hoisted_3$i,[createTextVNode(" Destination address doesnt have minimum balance, please send "+toDisplayString$1(n.existentialBalance)+" before sending any tokens.",1),u[1]||(u[1]=createBaseVNode("br",null,null,-1))])):createCommentVNode("",!0)]))}}),_hoisted_1$l={class:"container"},_hoisted_2$k={key:0,class:"send-transaction"},_hoisted_3$h={class:"send-transaction__header"},_hoisted_4$f={class:"send-transaction__buttons"},_hoisted_5$a={class:"send-transaction__buttons-cancel"},_hoisted_6$6={class:"send-transaction__buttons-send"},_sfc_main$m=defineComponent({__name:"index",props:{network:{type:Object,default:()=>({})},accountInfo:{type:Object,default:()=>({})}},setup(n){const t=n,u=useRoute(),c=useRouter(),ee=new GenericNameResolver,te=ref(),ae=ref(),ne=ref(!1),oe=ref(!1),ie=ref(t.accountInfo.selectedAccount.address),se=ref(""),ue=ref(!1),le=ref(),ce=ref(null),de=ref([]),fe=ref(new SubstrateNativeToken({icon:t.network.icon,balance:"0",price:"0",name:"loading",symbol:"loading",decimals:12})),pe=ref(!1),me=ref(!0),ge=ref(!1),De=ref("0"),Ce=u.params.id,we=ref(!0),xe=computed(()=>{if(!ce.value)return;if(!le.value||!isValidDecimals(le.value??"0",fe.value.decimals))return!1;const Dt=libExports.toBN(toBase(isNumericPositive(le.value.toString())?le.value.toString():"0",fe.value.decimals??0)),$t=fe.value.existentialDeposit??libExports.toBN(0),Mt=libExports.toBN(fe.value.balance??0);if(!ge.value&&Mt.sub(Dt).lte($t))return!0;const Kt=libExports.toBN(toBase(ce.value.nativeValue,fe.value.decimals));return!!(!ge.value&&Mt.sub(Kt).sub(Dt).lt($t))}),Re=computed(()=>{try{return encodeAddress(se.value),!0}catch{return!1}});onMounted(()=>{we.value=!0,De.value=`${fromBase(t.network.existentialDeposit.toString(),t.network.decimals)} ${t.network.currencyName}`,trackSendEvents(SendEventType.SendOpen,{network:t.network.name}),Se()});const Be=async()=>{if(fe.value&&Re.value){if(me.value=!0,!isValidDecimals(le.value||"0",fe.value.decimals)){pe.value=!1;return}const Dt=(await t.network.api()).api;await Dt.isReady;let $t=libExports.toBN(toBase(le.value&&isNumericPositive(le.value.toString())?le.value.toString():"0",fe.value.decimals));const Mt=ge.value?{type:"all"}:void 0;(await Dt.query.system.account(se.value).then(Wt=>{const{data:{free:Ft}}=Wt;return Ft})).lt(t.network.existentialDeposit)&&(me.value=!1);const Vt=await fe.value.send(Dt,se.value,$t.toString(),Mt),{partialFee:Ht}=(await Vt.paymentInfo(t.accountInfo.selectedAccount.address)).toJSON(),$e=libExports.toBN((Ht==null?void 0:Ht.toString())??"0"),Pe=libExports.toBN(fe.value.balance);ge.value&&fe.value.name===de.value[0].name&&($t=$t.sub($e),$t.gtn(0)&&(le.value=fromBase($t.toString(),fe.value.decimals)));const Ne=de.value[0];$t.ltn(0)||Ne.symbol===fe.value.symbol&&$t.add($e).gt(Pe)||Ne.symbol!==fe.value.symbol&&$t.gt(Pe)?pe.value=!1:pe.value=!0;const We=fromBase((Ht==null?void 0:Ht.toString())??"",Ne.decimals),Xe=new BigNumber$1(Ne.price).times(We);ce.value={fiatSymbol:"USD",fiatValue:Xe.toString(),nativeSymbol:Ne.symbol??"",nativeValue:We.toString()}}};watch([fe,se],Be),watch(ie,()=>{Se()});const Se=async()=>{const Dt=await t.network.api(),$t=await t.network.getAllTokens(ie.value),Mt=$t.map(Vt=>Vt.getLatestPrice()),Kt=$t.map(Vt=>Vt.balance?Promise.resolve(Vt.balance):Vt.getLatestUserBalance(Dt.api,ie.value));Promise.all([...Mt,...Kt]).then(()=>{const Vt=$t.filter(Ht=>!libExports.toBN(Ht.balance??"0").isZero());Vt.length==0&&Vt.push($t[0]),fe.value=Vt[0],de.value=Vt,we.value=!1})},Te=()=>{trackSendEvents(SendEventType.SendDecline,{network:t.network.name}),c.go(-1)},Ae=Dt=>{ie.value=Dt},he=Dt=>{lodashExports.debounce(()=>{ee.resolveName(Dt,[t.network.name,"DOT","KSM"]).then(Mt=>{Mt&&(se.value=Mt)})},500)(),se.value=Dt},ve=Dt=>{ne.value=Dt},ye=Dt=>{oe.value=Dt},be=()=>{ue.value=!ue.value},_e=Dt=>{ie.value=Dt,ne.value=!1},Me=Dt=>{se.value=Dt,oe.value=!1},Ie=Dt=>{fe.value=Dt,ue.value=!1},Fe=Dt=>{Dt===""&&(Dt="0");const $t=new BigNumber$1(Dt);ge.value=!1,le.value=$t.lt(0)?"0":Dt,Be()},Ee=computed(()=>{var $t;let Dt="Send";return parseInt(le.value??"0")>0&&(Dt="Send "+formatFloatingPointValue(le.value).value+" "+(($t=fe.value)==null?void 0:$t.symbol.toUpperCase())),Dt}),ke=()=>{if(fe.value){const Dt=fromBase(fe.value.balance,fe.value.decimals);le.value=Dt,Be(),ge.value=!0}},Ve=computed(()=>{var Dt;if(fe.value&&de.value&&de.value.length){if(fe.value.symbol!==de.value[0].symbol)return me.value;{const $t=((Dt=le.value)==null?void 0:Dt.toString())??"0",Mt=libExports.toBN(toBase(isNumericPositive($t)?$t:"0",fe.value.decimals??0));return me.value||Mt.gte(t.network.existentialDeposit)}}return!0}),ze=computed(()=>{let Dt=!0,$t=!1;try{t.network.displayAddress(se.value),$t=!0}catch{$t=!1}return le.value!==void 0&&le.value!==""&&isNumericPositive(le.value)&&pe.value&&$t&&!xe.value&&xe.value!==void 0&&Ve.value&&(Dt=!1),Dt}),Ue=new RecentlySentAddressesState,Oe=async()=>{var Ne;await Ue.addRecentlySentAddress(t.network,se.value);const Dt=toBase(le.value,fe.value.decimals),$t=ge.value?{type:"all"}:void 0,Mt=(await t.network.api()).api;await Mt.isReady;const Kt=await((Ne=fe.value)==null?void 0:Ne.send(Mt,se.value,Dt,$t)),Ht=await new PublicKeyRing().getAccount(encodeAddress(ie.value)),$e={TransactionData:{from:Ht.address,to:se.value,data:Kt.toHex(),value:le.value},toToken:{amount:toBase(le.value,fe.value.decimals),decimals:fe.value.decimals,icon:fe.value.icon,symbol:fe.value.symbol||"unknown",valueUSD:new BigNumber$1(fe.value.price||"0").times(le.value).toFixed(),name:fe.value.name||"",price:fe.value.price||"0"},fromAddress:Ht.address,fromAddressName:Ht.name,txFee:ce.value,toAddress:se.value},Pe=c.resolve({name:routes.verify.name,query:{id:Ce,txData:Buffer.from(JSON.stringify($e),"utf8").toString("base64")}});Ht.isHardware?(await Browser$1.windows.create({url:Browser$1.runtime.getURL(getUiPath(`dot-hw-verify?id=${Pe.query.id}&txData=${Pe.query.txData}`,ProviderName.polkadot)),type:"popup",focused:!0,height:600,width:460}),window.close()):c.push(Pe)};return(Dt,$t)=>(openBlock(),createElementBlock("div",_hoisted_1$l,[unref(Ce)?(openBlock(),createElementBlock("div",_hoisted_2$k,[createBaseVNode("div",_hoisted_3$h,[$t[2]||($t[2]=createBaseVNode("h3",null,"Send",-1)),createBaseVNode("a",{class:"send-transaction__close",onClick:Te},[createVNode$1(CloseIcon)])]),createVNode$1(_sfc_main$w,{ref_key:"addressInputFrom",ref:ae,from:!0,value:ie.value,network:n.network,"disable-direct-input":!0,onClick:$t[0]||($t[0]=Mt=>ve(!0)),"onUpdate:inputAddress":Ae,"onToggle:showContacts":ve},null,8,["value","network"]),createVNode$1(_sfc_main$s,{"show-accounts":ne.value,"account-info":n.accountInfo,address:ie.value,network:n.network,"onSelected:account":_e,onClose:ve},null,8,["show-accounts","account-info","address","network"]),createVNode$1(_sfc_main$w,{ref_key:"addressInputTo",ref:te,value:se.value,network:n.network,"onUpdate:inputAddress":he,"onToggle:showContacts":ye},null,8,["value","network"]),createVNode$1(SendContactsList,{"show-accounts":oe.value,"account-info":n.accountInfo,address:se.value,network:n.network,"onSelected:account":Me,"onUpdate:pasteFromClipboard":$t[1]||($t[1]=Mt=>te.value.pasteFromClipboard()),onClose:ye},null,8,["show-accounts","account-info","address","network"]),createVNode$1(_sfc_main$r,{token:fe.value,"onUpdate:toggleTokenSelect":be},null,8,["token"]),withDirectives(createVNode$1(_sfc_main$J,{"is-send":!0,assets:de.value,"is-loading":we.value,onClose:be,"onUpdate:selectAsset":Ie},null,8,["assets","is-loading"]),[[vShow,ue.value]]),createVNode$1(_sfc_main$p,{amount:le.value,"show-max":!0,"fiat-value":fe.value.price,"has-enough-balance":pe.value,"onUpdate:inputAmount":Fe,"onUpdate:inputSetMax":ke},null,8,["amount","fiat-value","has-enough-balance"]),xe.value?createCommentVNode("",!0):(openBlock(),createBlock(_sfc_main$o,{key:0,fee:ce.value??{nativeSymbol:t.network.currencyName}},null,8,["fee"])),xe.value?(openBlock(),createBlock(_sfc_main$n,{key:1,"alert-type":unref(AlertType).ED_WARN,"existential-balance":De.value},null,8,["alert-type","existential-balance"])):createCommentVNode("",!0),Ve.value?createCommentVNode("",!0):(openBlock(),createBlock(_sfc_main$n,{key:2,"alert-type":unref(AlertType).DESTINATION_BALANCE,"existential-balance":De.value},null,8,["alert-type","existential-balance"])),createBaseVNode("div",_hoisted_4$f,[createBaseVNode("div",_hoisted_5$a,[createVNode$1(_sfc_main$2W,{title:"Cancel",click:Te,"no-background":!0})]),createBaseVNode("div",_hoisted_6$6,[createVNode$1(_sfc_main$2W,{title:Ee.value,click:Oe,disabled:ze.value},null,8,["title","disabled"])])])])):createCommentVNode("",!0)]))}}),SendTransactionSubstrate=_export_sfc(_sfc_main$m,[["__scopeId","data-v-fe6e41ba"]]),_hoisted_1$k={class:"send-transaction__header"},_hoisted_2$j={class:"send-transaction__selector"},_hoisted_3$g={key:0},_hoisted_4$e={key:1},_hoisted_5$9={class:"send-transaction__dropdown"},_sfc_main$l=defineComponent({__name:"send-header",props:{isSendToken:{type:Boolean,default:()=>!1},isNftAvailable:{type:Boolean,default:!1}},emits:["close","toggleType"],setup(n,{emit:t}){const u=ref(!1),c=t,ee=()=>{u.value=!u.value},te=ae=>{u.value=!1,c("toggleType",ae)};return(ae,ne)=>(openBlock(),createElementBlock("div",_hoisted_1$k,[createBaseVNode("a",_hoisted_2$j,[n.isSendToken?(openBlock(),createElementBlock("span",_hoisted_3$g,"Send token")):(openBlock(),createElementBlock("span",_hoisted_4$e,"Send NFT")),n.isNftAvailable?(openBlock(),createBlock(SwitchArrow,{key:2,onClick:ee})):createCommentVNode("",!0)]),withDirectives(createBaseVNode("div",_hoisted_5$9,[createBaseVNode("a",{class:"send-transaction__dropdown-item",onClick:ne[0]||(ne[0]=oe=>te(!0))},[ne[3]||(ne[3]=createBaseVNode("p",null,"Send token",-1)),withDirectives(createVNode$1(DoneIcon,null,null,512),[[vShow,n.isSendToken]])]),createBaseVNode("a",{class:"send-transaction__dropdown-item",onClick:ne[1]||(ne[1]=oe=>te(!1))},[ne[4]||(ne[4]=createBaseVNode("p",null,"Send NFT",-1)),withDirectives(createVNode$1(DoneIcon,null,null,512),[[vShow,!n.isSendToken]])])],512),[[vShow,u.value]]),createBaseVNode("a",{class:"send-transaction__close",onClick:ne[2]||(ne[2]=oe=>ae.$emit("close"))},[createVNode$1(CloseIcon)])]))}}),SendHeader=_export_sfc(_sfc_main$l,[["__scopeId","data-v-e2361323"]]),_hoisted_1$j={class:"send-address-input__avatar"},_hoisted_2$i=["src"],_hoisted_3$f={class:"send-address-input__address"},_hoisted_4$d={key:0},_hoisted_5$8={key:1},_hoisted_6$5=["disabled"],_sfc_main$k=defineComponent({__name:"send-address-input",props:{value:{type:String,default:()=>""},network:{type:Object,default:()=>({})},from:{type:Boolean,default:!1},disableDirectInput:Boolean},emits:["update:inputAddress","toggle:showContacts"],setup(n,{expose:t,emit:u}){const c=ref(!1),ee=ref();t({addressInput:ee,pasteFromClipboard:()=>{var ue;(ue=ee.value)==null||ue.focus(),ee.value&&(ee.value.value=""),document.execCommand("paste")}});const ae=n,ne=u,oe=computed(()=>{let ue=ae.value;return ae.network.isAddress(ue)&&(ue=ae.network.displayAddress(ae.value)),c.value?ue:replaceWithEllipsis(ue,6,6)}),ie=computed({get:()=>oe.value,set:ue=>ne("update:inputAddress",ue)}),se=ue=>{c.value=ue.type==="focus",c.value&&ne("toggle:showContacts",c.value)};return(ue,le)=>(openBlock(),createElementBlock("div",{class:normalizeClass$1(["send-address-input",{focus:c.value}])},[createBaseVNode("div",_hoisted_1$j,[n.network.isAddress(n.value)?(openBlock(),createElementBlock("img",{key:0,src:n.network.identicon(n.value),alt:""},null,8,_hoisted_2$i)):createCommentVNode("",!0)]),createBaseVNode("div",_hoisted_3$f,[n.from?(openBlock(),createElementBlock("p",_hoisted_5$8,"From:")):(openBlock(),createElementBlock("p",_hoisted_4$d,"To:")),withDirectives(createBaseVNode("input",{ref_key:"addressInput",ref:ee,"onUpdate:modelValue":le[0]||(le[0]=ce=>ie.value=ce),type:"text",disabled:n.disableDirectInput,placeholder:"0x… address",style:normalizeStyle$2({color:n.network.isAddress(n.value)?"black":"red"}),onFocus:se,onBlur:se},null,44,_hoisted_6$5),[[vModelText,ie.value]])])],2))}}),_hoisted_1$i={class:"nft-select-list__token-info"},_hoisted_2$h=["src"],_hoisted_3$e={class:"nft-select-list__token-info-name"},_sfc_main$j=defineComponent({__name:"nft-select-list-item",props:{item:{type:Object,default:()=>({})}},emits:["selectNft"],setup(n){return(t,u)=>(openBlock(),createElementBlock("a",{class:"nft-select-list__token",onClick:u[1]||(u[1]=c=>t.$emit("selectNft",n.item))},[createBaseVNode("div",_hoisted_1$i,[createBaseVNode("img",{src:n.item.image,onError:u[0]||(u[0]=(...c)=>unref(imageLoadError)&&unref(imageLoadError)(...c))},null,40,_hoisted_2$h),createBaseVNode("div",_hoisted_3$e,[createBaseVNode("h4",null,toDisplayString$1(t.$filters.truncate(n.item.name,25)),1),createBaseVNode("p",null,toDisplayString$1(t.$filters.truncate(n.item.collectionName,50)),1)])])]))}}),_hoisted_1$h={class:"nft-select-list-search"},_sfc_main$i=defineComponent({__name:"nft-select-list-search",setup(n){return(t,u)=>(openBlock(),createElementBlock("div",_hoisted_1$h,[createVNode$1(SearchIcon),u[0]||(u[0]=createBaseVNode("input",{type:"text",placeholder:"Search NFT",autocomplete:"off"},null,-1))]))}}),NftSelectListSearch=_export_sfc(_sfc_main$i,[["__scopeId","data-v-09f8a107"]]),_hoisted_1$g={class:"nft-select-list"},_hoisted_2$g={class:"nft-select-list__header"},_sfc_main$h=defineComponent({__name:"index",props:{network:{type:Object,default:()=>({})},address:{type:String,default:""},selectedNft:{type:Object,default:()=>({})}},emits:["selectNft","close"],setup(n,{emit:t}){const u=n,c=t,ee=ref([]),te=computed(()=>{const ne=[];return ee.value.forEach(oe=>{oe.items.forEach(ie=>{ne.push({...ie,collectionName:oe.name})})}),ne}),ae=()=>{u.network.NFTHandler&&u.network.NFTHandler(u.network,u.address).then(ne=>{if(ee.value=ne,te.value.length){for(const oe of te.value)if(u.selectedNft.contract===oe.contract&&u.selectedNft.id===oe.id){c("selectNft",oe);return}c("selectNft",te.value[0])}else c("selectNft",{id:"",contract:"",image:"",name:"No NFTs found",url:"",collectionName:"",type:NFTType.ERC721})})};return watch(()=>u.address,()=>{ae()}),onMounted(()=>{ae()}),(ne,oe)=>(openBlock(),createElementBlock("div",_hoisted_1$g,[createBaseVNode("div",_hoisted_2$g,[oe[2]||(oe[2]=createBaseVNode("h3",null,"Select NFT to send",-1)),createBaseVNode("a",{class:"nft-select-list__close",onClick:oe[0]||(oe[0]=ie=>c("close",!1))},[createVNode$1(CloseIcon)])]),createVNode$1(NftSelectListSearch),createVNode$1(CustomScrollbar,{class:"nft-select-list__scroll-area",settings:unref(scrollSettings)({suppressScrollX:!0})},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(te.value,(ie,se)=>(openBlock(),createBlock(_sfc_main$j,{key:se,item:ie,onSelectNft:oe[1]||(oe[1]=ue=>c("selectNft",ue))},null,8,["item"]))),128))]),_:1},8,["settings"])]))}}),_hoisted_1$f={class:"send-token-select__image"},_hoisted_2$f=["src"],_hoisted_3$d={class:"send-token-select__info"},_hoisted_4$c={class:"send-token-select__arrow"},_sfc_main$g=defineComponent({__name:"send-token-select",props:{token:{type:Object,default:()=>({})}},emits:["update:toggleTokenSelect"],setup(n,{emit:t}){const u=t,c=n,ee=computed(()=>c.token&&c.token.balance?fromBase(c.token.balance,c.token.decimals):void 0);return(te,ae)=>(openBlock(),createElementBlock("a",{class:"send-token-select",onClick:ae[0]||(ae[0]=ne=>u("update:toggleTokenSelect"))},[createBaseVNode("div",_hoisted_1$f,[createBaseVNode("img",{src:n.token.icon,alt:""},null,8,_hoisted_2$f)]),createBaseVNode("div",_hoisted_3$d,[createBaseVNode("h5",null,toDisplayString$1(n.token.name),1),createBaseVNode("p",null,[createTextVNode(toDisplayString$1(ee.value?te.$filters.formatFloatingPointValue(ee.value).value:"~")+" ",1),createBaseVNode("span",null,toDisplayString$1(n.token.symbol),1)])]),createBaseVNode("div",_hoisted_4$c,[createVNode$1(SwitchArrow)])]))}}),_hoisted_1$e={class:"send-alert",role:"alert","aria-live":"polite"},_hoisted_2$e={"aria-label":"Error message"},_sfc_main$f=defineComponent({__name:"send-alert",props:{errorMsg:{}},setup(n){return(t,u)=>(openBlock(),createElementBlock("div",_hoisted_1$e,[createVNode$1(AlertIcon),createBaseVNode("p",_hoisted_2$e,toDisplayString$1(t.errorMsg),1)]))}}),_hoisted_1$d={class:"send-nft-select__wrap"},_hoisted_2$d={class:"send-nft-select__image"},_hoisted_3$c=["src"],_hoisted_4$b={class:"send-nft-select__info"},_hoisted_5$7={class:"send-nft-select__arrow"},_hoisted_6$4=["src"],_hoisted_7={key:1,class:"send-nft-select__text"},_sfc_main$e=defineComponent({__name:"send-nft-select",props:{item:{type:Object,default:()=>({})},isSendingDisabled:{type:Boolean,default:()=>!1}},emits:["toggleSelect"],setup(n){return(t,u)=>(openBlock(),createElementBlock("div",_hoisted_1$d,[createBaseVNode("a",{class:"send-nft-select",onClick:u[1]||(u[1]=c=>t.$emit("toggleSelect",n.item.id!==""))},[createBaseVNode("div",_hoisted_2$d,[createBaseVNode("img",{src:n.item.image,alt:"",onError:u[0]||(u[0]=(...c)=>unref(imageLoadError)&&unref(imageLoadError)(...c))},null,40,_hoisted_3$c)]),createBaseVNode("div",_hoisted_4$b,[createBaseVNode("h5",null,toDisplayString$1(t.$filters.truncate(n.item.name,25)),1),createBaseVNode("p",null,toDisplayString$1(t.$filters.truncate(n.item.collectionName,50)),1)]),createBaseVNode("div",_hoisted_5$7,[createVNode$1(SwitchArrow)])]),createBaseVNode("div",null,[n.item.image!==""?(openBlock(),createElementBlock("img",{key:0,class:"send-nft-select__view",src:n.item.image,alt:""},null,8,_hoisted_6$4)):createCommentVNode("",!0),n.isSendingDisabled?(openBlock(),createElementBlock("p",_hoisted_7," This NFT is not transferable! ")):createCommentVNode("",!0)])]))}}),erc721=[{constant:!1,inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"mint",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"safeTransferFrom",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{inputs:[],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{constant:!0,inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"}],erc1155=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256[]",name:"ids",type:"uint256[]"},{indexed:!1,internalType:"uint256[]",name:"values",type:"uint256[]"}],name:"TransferBatch",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"id",type:"uint256"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"TransferSingle",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"value",type:"string"},{indexed:!0,internalType:"uint256",name:"id",type:"uint256"}],name:"URI",type:"event"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"id",type:"uint256"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address[]",name:"accounts",type:"address[]"},{internalType:"uint256[]",name:"ids",type:"uint256[]"}],name:"balanceOfBatch",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256[]",name:"ids",type:"uint256[]"},{internalType:"uint256[]",name:"amounts",type:"uint256[]"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeBatchTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"id",type:"uint256"}],name:"uri",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}],_hoisted_1$c={class:"container"},_hoisted_2$c={key:0,class:"send-transaction"},_hoisted_3$b={class:"send-transaction__buttons"},_hoisted_4$a={class:"send-transaction__buttons-cancel"},_hoisted_5$6={class:"send-transaction__buttons-send"},_sfc_main$d=defineComponent({__name:"index",props:{network:{type:Object,default:()=>({})},accountInfo:{type:Object,default:()=>({})}},setup(n){var je;const t=n,u=new Erc20Token({icon:t.network.icon,symbol:"Loading",balance:"0",price:"0",name:"loading",contract:"0x0",decimals:18}),c=useRoute(),ee=useRouter(),te=new GenericNameResolver,ae=ref(),ne=c.params.id,oe=JSON.parse(c.params.tokenData?c.params.tokenData:"{}"),ie=ref(JSON.parse(c.params.isToken)),se=ref([]),ue=ref(u),le=ref(""),ce=ref(!0),de=computed(()=>isValidDecimals(me.value,ue.value.decimals)),fe=computed(()=>isNumericPositive(me.value)),pe=computed(()=>!de.value||!fe.value||!isNumericPositive(me.value)||libExports.toBN(toBase(Ce.value[De.value].nativeValue,t.network.decimals)).gt(libExports.toBN(Te.value))?!1:libExports.toBN(ue.value.balance??"0").gte(libExports.toBN(toBase(me.value??"0",ue.value.decimals)))),me=computed(()=>le.value&&le.value!==""?le.value:"0"),ge=ref(!1),De=ref(t.network.name===NetworkNames.Ethereum||NetworkNames.Binance?GasPriceTypes.REGULAR:GasPriceTypes.ECONOMY),Ce=ref(defaultGasCostVals),we=ref(((je=t.accountInfo.selectedAccount)==null?void 0:je.address)??""),xe=ref(""),Re=ref(!0),Be=ref({id:"",contract:"",image:"",name:"Loading",url:"",collectionName:"",type:NFTType.ERC721}),Se=computed(()=>ue.value.contract!==NATIVE_TOKEN_ADDRESS?!0:!MAX_UNAVAILABLE_NETWORKS.includes(t.network.name)),Te=computed(()=>{const Ke=t.accountInfo.activeAccounts.findIndex(Ge=>Ge.address===we.value);if(Ke!==-1){const Ge=t.accountInfo.activeBalances[Ke];if(Ge!=="~")return toBase(Ge,t.network.decimals)}return"0"});onMounted(async()=>{trackSendEvents(SendEventType.SendOpen,{network:t.network.name}),Ee().then(Fe)});const Ae=computed(()=>{const Ke=new Web3Eth,Ge=ie.value&&ue.value.contract===NATIVE_TOKEN_ADDRESS?libExports.numberToHex(toBase(me.value,t.network.decimals)):"0x0",Pt=ie.value&&ue.value.contract===NATIVE_TOKEN_ADDRESS?xe.value:ie.value?ue.value.contract:Be.value.contract,Gt=new Ke.Contract(erc20),Zt=new Ke.Contract(erc721),aa=new Ke.Contract(erc1155),ta=ie.value&&ue.value.contract===NATIVE_TOKEN_ADDRESS?"0x":ie.value?Gt.methods.transfer(xe.value,toBase(me.value,ue.value.decimals)).encodeABI():Be.value.type===NFTType.ERC721?Zt.methods.transferFrom(we.value,xe.value,Be.value.id).encodeABI():aa.methods.safeTransferFrom(we.value,xe.value,Be.value.id,1,[]).encodeABI();return{chainId:t.network.chainID,from:we.value,value:Ge,to:Pt,data:ta}}),he=computed(()=>{const Ke=new Web3Eth(t.network.node);return new Transaction$1(Ae.value,Ke)}),ve=computed(()=>{if(ie.value&&Te.value&&ue.value&&ue.value.contract&&le.value!==""&&isValidDecimals(me.value,ue.value.decimals)){let Ke=libExports.toBN(Te.value);if(ue.value.contract===NATIVE_TOKEN_ADDRESS){const Ge=isNumericPositive(le.value)?le.value:"0",Pt=libExports.toBN(toBase(Ge??"0",ue.value.decimals));Ke=Ke.sub(Pt)}return Ke=Ke.sub(libExports.toBN(toBase(Ce.value[De.value].nativeValue,t.network.decimals))),Ke}else if(!ie.value&&Te.value&&Be.value.id){let Ke=libExports.toBN(Te.value);return Ke=Ke.sub(libExports.toBN(toBase(Ce.value[De.value].nativeValue,t.network.decimals))),Ke}return libExports.toBN(0)}),ye=computed(()=>fromBase(ve.value.abs().toString(),t.network.decimals)),be=computed(()=>{var Ke;return((Ke=se.value[0])==null?void 0:Ke.price)||"0"}),_e=computed(()=>new BigNumber$1(ye.value.toString()).times(be.value??"0").toFixed()),Me=computed(()=>de.value?fe.value?!pe.value&&ve.value.isNeg()?`Not enough funds. You are
      ~${formatFloatingPointValue(ye.value).value}
      ${t.network.currencyName} ($ ${formatFiatValue(_e.value).value}) short.`:!t.network.isAddress(xe.value)&&xe.value!==""?"Invalid to address.":ie.value&&!isValidDecimals(me.value,ue.value.decimals)?`Invalid decimals for ${ue.value.symbol}.`:!ie.value&&!Be.value.id?"Invalid NFT selected.":new BigNumber$1(me.value).gt(Ht.value)?"Not enough balance.":"":"Invalid amount.":"Too many decimals."),Ie=Ke=>Ke.getGasCosts().then(async Ge=>{const Pt=Zt=>fromBase(Ge[Zt],t.network.decimals),Gt=se.value[0].price||"0";Ce.value={[GasPriceTypes.ECONOMY]:{nativeValue:Pt(GasPriceTypes.ECONOMY),fiatValue:new BigNumber$1(Pt(GasPriceTypes.ECONOMY)).times(Gt).toString(),nativeSymbol:t.network.currencyName,fiatSymbol:"USD"},[GasPriceTypes.REGULAR]:{nativeValue:Pt(GasPriceTypes.REGULAR),fiatValue:new BigNumber$1(Pt(GasPriceTypes.REGULAR)).times(Gt).toString(),nativeSymbol:t.network.currencyName,fiatSymbol:"USD"},[GasPriceTypes.FAST]:{nativeValue:Pt(GasPriceTypes.FAST),fiatValue:new BigNumber$1(Pt(GasPriceTypes.FAST)).times(Gt).toString(),nativeSymbol:t.network.currencyName,fiatSymbol:"USD"},[GasPriceTypes.FASTEST]:{nativeValue:Pt(GasPriceTypes.FASTEST),fiatValue:new BigNumber$1(Pt(GasPriceTypes.FASTEST)).times(Gt).toString(),nativeSymbol:t.network.currencyName,fiatSymbol:"USD"}},ce.value=!0}).catch(()=>{ce.value=!1}),Fe=()=>{const Ke=new Web3Eth(t.network.node),Ge=new Transaction$1({chainId:t.network.chainID,from:t.accountInfo.selectedAccount.address,value:"0x0",to:NATIVE_TOKEN_ADDRESS},Ke);Ue(Ge)},Ee=()=>(se.value=[],ue.value=u,Re.value=!0,t.network.getAllTokens(we.value).then(Ke=>{se.value=Ke,ue.value=Ke[0],Re.value=!1})),ke=computed(()=>{var Ge;let Ke="Send";return parseInt(me.value)>0&&(Ke="Send "+formatFloatingPointValue(me.value).value+" "+((Ge=ue.value)==null?void 0:Ge.symbol.toUpperCase())),ie.value||(Ke="Send NFT"),Ke}),Ve=computed(()=>!(!ze.value||ve.value.isNeg()||!ce.value)),ze=computed(()=>{if(!t.network.isAddress(xe.value)||ie.value&&!isValidDecimals(me.value,ue.value.decimals)||!ie.value&&!Be.value.id)return!1;const Ke=new BigNumber$1(me.value);return!(Ke.isNaN()||Ke.gt(Ht.value)||Ce.value.REGULAR.nativeValue==="0"||!isNumericPositive(me.value))}),Ue=Ke=>{ge.value&&(le.value=""),Ie(Ke).then(()=>{ge.value&&(le.value=parseFloat(Ht.value)<0?"0":Ht.value)})},Oe=ref(!1),Dt=ref(!1),$t=ref(!1),Mt=ref(!1),Kt=ref(!1);watch([ze,xe,ue,Be,ie],()=>{ze.value&&Ue(he.value)}),watch([ie],()=>{Xt("0")});const Vt=()=>{trackSendEvents(SendEventType.SendDecline,{network:t.network.name}),ee.go(-1)},Ht=computed(()=>ie.value?ue.value.contract===NATIVE_TOKEN_ADDRESS?fromBase(libExports.toBN(ue.value.balance||"0").sub(libExports.toBN(toBase(Ce.value[De.value].nativeValue,ue.value.decimals))).toString(),ue.value.decimals):fromBase(ue.value.balance,ue.value.decimals):"0"),$e=()=>{ge.value=!0,ze.value&&Ue(he.value)},Pe=Ke=>{we.value=Ke},Ne=async Ke=>{lodashExports.debounce(()=>{te.resolveName(Ke,[t.network.name,"ETH"]).then(Pt=>{Pt&&(xe.value=Pt)})},500)(),xe.value=Ke},We=Ke=>{Oe.value=Ke},Xe=Ke=>{Dt.value=Ke},Wt=()=>{$t.value=!$t.value},Ft=Ke=>{we.value=Ke,Oe.value=!1,Ee()},jt=Ke=>{xe.value=Ke,Dt.value=!1},ea=Ke=>{Xt("0"),ue.value=Ke,$t.value=!1},Xt=Ke=>{Ke===""&&(Ke="0");const Ge=new BigNumber$1(Ke);ge.value=!1,le.value=Ge.lt(0)?"0":Ke,ze.value&&Ue(he.value)},Yt=()=>{Mt.value=!Mt.value},Rt=Ke=>{De.value=Ke,Mt.value=!1,ge.value&&ze.value&&Ue(he.value)},Le=new RecentlySentAddressesState,qe=async()=>{await Le.addRecentlySentAddress(t.network,xe.value);const Ge=await new PublicKeyRing().getAccount(we.value.toLowerCase()),Pt={TransactionData:Ae.value,isNFT:!ie.value,NFTData:ie.value?void 0:Be.value,toToken:{amount:toBase(me.value,ue.value.decimals),decimals:ue.value.decimals,icon:ue.value.icon,symbol:ue.value.symbol||"unknown",valueUSD:new BigNumber$1(ue.value.price||"0").times(me.value).toString(),name:ue.value.name||"",price:ue.value.price||"0"},fromAddress:Ge.address,fromAddressName:Ge.name,gasFee:Ce.value[De.value],gasPriceType:De.value,toAddress:xe.value},Gt=ee.resolve({name:routes.verify.name,query:{id:ne,txData:Buffer.from(JSON.stringify(Pt),"utf8").toString("base64")}});Ge.isHardware?(await Browser$1.windows.create({url:Browser$1.runtime.getURL(getUiPath(`eth-hw-verify?id=${Gt.query.id}&txData=${Gt.query.txData}`,ProviderName.ethereum)),type:"popup",focused:!0,height:600,width:460}),window.close()):ee.push(Gt)},Ye=Ke=>{ie.value=Ke},Ze=Ke=>{Kt.value=Ke},He=Ke=>{Be.value=Ke,Kt.value=!1};return(Ke,Ge)=>(openBlock(),createElementBlock("div",_hoisted_1$c,[unref(ne)?(openBlock(),createElementBlock("div",_hoisted_2$c,[createVNode$1(SendHeader,{"is-send-token":ie.value,"is-nft-available":!!n.network.NFTHandler,onClose:Vt,onToggleType:Ye},null,8,["is-send-token","is-nft-available"]),createVNode$1(_sfc_main$k,{ref:"addressInputFrom",from:!0,value:we.value,network:n.network,"disable-direct-input":!0,onClick:Ge[0]||(Ge[0]=Pt=>We(!0)),"onUpdate:inputAddress":Pe,"onToggle:showContacts":We},null,8,["value","network"]),createVNode$1(_sfc_main$s,{"show-accounts":Oe.value,"account-info":n.accountInfo,address:we.value,network:n.network,"onSelected:account":Ft,onClose:We},null,8,["show-accounts","account-info","address","network"]),createVNode$1(_sfc_main$k,{ref_key:"addressInputTo",ref:ae,value:xe.value,network:n.network,"onUpdate:inputAddress":Ne,"onToggle:showContacts":Xe},null,8,["value","network"]),createVNode$1(SendContactsList,{"show-accounts":Dt.value,"account-info":n.accountInfo,address:xe.value,network:n.network,"onSelected:account":jt,"onUpdate:pasteFromClipboard":Ge[1]||(Ge[1]=()=>{ae.value.pasteFromClipboard(),Xe(!1)}),onClose:Xe},null,8,["show-accounts","account-info","address","network"]),ie.value?(openBlock(),createBlock(_sfc_main$g,{key:0,token:ue.value,"onUpdate:toggleTokenSelect":Wt},null,8,["token"])):createCommentVNode("",!0),withDirectives(createVNode$1(_sfc_main$J,{"is-send":!0,assets:se.value,"is-loading":Re.value,onClose:Wt,"onUpdate:selectAsset":ea},null,8,["assets","is-loading"]),[[vShow,$t.value]]),ie.value?createCommentVNode("",!0):(openBlock(),createBlock(_sfc_main$e,{key:1,item:Be.value,"is-sending-disabled":ze.value&&!ce.value,onToggleSelect:Ze},null,8,["item","is-sending-disabled"])),withDirectives(createVNode$1(_sfc_main$h,{address:we.value,network:n.network,"selected-nft":unref(oe),onClose:Ze,onSelectNft:He},null,8,["address","network","selected-nft"]),[[vShow,Kt.value]]),ie.value?(openBlock(),createBlock(_sfc_main$p,{key:2,amount:le.value,"show-max":Se.value,"fiat-value":ue.value.price,"has-enough-balance":pe.value,"onUpdate:inputAmount":Xt,"onUpdate:inputSetMax":$e},null,8,["amount","show-max","fiat-value","has-enough-balance"])):createCommentVNode("",!0),createVNode$1(SendFeeSelect,{"in-swap":!1,selected:De.value,fee:Ce.value[De.value],onOpenPopup:Yt},null,8,["selected","fee"]),createVNode$1(_sfc_main$36,{fees:Ce.value,"show-fees":Mt.value,selected:De.value,"is-header":!0,onClosePopup:Yt,onGasTypeChanged:Rt},null,8,["fees","show-fees","selected"]),withDirectives(createVNode$1(_sfc_main$f,{"error-msg":Me.value},null,8,["error-msg"]),[[vShow,Me.value]]),createBaseVNode("div",_hoisted_3$b,[createBaseVNode("div",_hoisted_4$a,[createVNode$1(_sfc_main$2W,{title:"Cancel",click:Vt,"no-background":!0})]),createBaseVNode("div",_hoisted_5$6,[createVNode$1(_sfc_main$2W,{title:ke.value,click:qe,disabled:!Ve.value},null,8,["title","disabled"])])])])):createCommentVNode("",!0)]))}}),SendTransactionEVM=_export_sfc(_sfc_main$d,[["__scopeId","data-v-41706487"]]),_hoisted_1$b={class:"send-address-input__avatar"},_hoisted_2$b=["src"],_hoisted_3$a={class:"send-address-input__address"},_hoisted_4$9={key:0},_hoisted_5$5={key:1},_hoisted_6$3=["disabled"],_sfc_main$c=defineComponent({__name:"send-address-input",props:{value:{type:String,default:()=>""},network:{type:Object,default:()=>({})},from:{type:Boolean,default:!1},disableDirectInput:Boolean},emits:["update:inputAddress","toggle:showContacts"],setup(n,{expose:t,emit:u}){const c=ref(!1),ee=ref();t({addressInput:ee,pasteFromClipboard:()=>{var ue;(ue=ee.value)==null||ue.focus(),document.execCommand("paste")}});const ae=n,ne=u,oe=computed(()=>ae.value&&ae.value.length>66?ae.network.displayAddress(ae.value):ae.value),ie=computed({get:()=>c.value?oe.value:replaceWithEllipsis(oe.value,6,6),set:ue=>ne("update:inputAddress",ue)}),se=ue=>{c.value=ue.type==="focus",c.value&&ne("toggle:showContacts",c.value)};return(ue,le)=>(openBlock(),createElementBlock("div",{class:normalizeClass$1(["send-address-input",{focus:c.value}])},[createBaseVNode("div",_hoisted_1$b,[unref(isAddress$1)(oe.value,n.network.networkInfo)?(openBlock(),createElementBlock("img",{key:0,src:n.network.identicon(oe.value),alt:""},null,8,_hoisted_2$b)):createCommentVNode("",!0)]),createBaseVNode("div",_hoisted_3$a,[n.from?(openBlock(),createElementBlock("p",_hoisted_5$5,"From:")):(openBlock(),createElementBlock("p",_hoisted_4$9,"To:")),withDirectives(createBaseVNode("input",{ref_key:"addressInput",ref:ee,"onUpdate:modelValue":le[0]||(le[0]=ce=>ie.value=ce),type:"text",disabled:n.disableDirectInput,placeholder:"address",style:normalizeStyle$2({color:unref(isAddress$1)(oe.value,n.network.networkInfo)?"black":"red"}),onFocus:se,onBlur:se},null,44,_hoisted_6$3),[[vModelText,ie.value]])])],2))}}),_hoisted_1$a={class:"send-token-select"},_hoisted_2$a={class:"send-token-select__image"},_hoisted_3$9=["src"],_hoisted_4$8={class:"send-token-select__info"},_sfc_main$b=defineComponent({__name:"send-token-select",props:{token:{type:Object,default:()=>({})}},setup(n){const t=n,u=computed(()=>t.token&&t.token.balance?fromBase(t.token.balance,t.token.decimals):void 0);return(c,ee)=>(openBlock(),createElementBlock("div",_hoisted_1$a,[createBaseVNode("div",_hoisted_2$a,[createBaseVNode("img",{src:n.token.icon},null,8,_hoisted_3$9)]),createBaseVNode("div",_hoisted_4$8,[createBaseVNode("h5",null,toDisplayString$1(n.token.name),1),createBaseVNode("p",null,[createTextVNode(toDisplayString$1(u.value?c.$filters.formatFloatingPointValue(u.value).value:"~")+" ",1),createBaseVNode("span",null,toDisplayString$1(n.token.symbol),1)])])]))}}),_hoisted_1$9={class:"send-alert"},_hoisted_2$9={key:0},_hoisted_3$8={key:1},_hoisted_4$7={key:2},_sfc_main$a=defineComponent({__name:"send-alert",props:{nativeSymbol:{},nativeValue:{},price:{},notEnough:{type:Boolean},belowDust:{type:Boolean},isBalanceZero:{type:Boolean},dust:{}},setup(n){const t=n,u=computed(()=>new BigNumber$1(t.nativeValue).times(t.price??"0").toFixed());return(c,ee)=>(openBlock(),createElementBlock("div",_hoisted_1$9,[createVNode$1(AlertIcon),c.isBalanceZero?(openBlock(),createElementBlock("p",_hoisted_2$9,"Not enough balance.")):c.belowDust?(openBlock(),createElementBlock("p",_hoisted_3$8,"Minimum amount: "+toDisplayString$1(c.dust),1)):c.notEnough?(openBlock(),createElementBlock("p",_hoisted_4$7,[ee[0]||(ee[0]=createTextVNode(" Not enough funds. You are")),ee[1]||(ee[1]=createBaseVNode("br",null,null,-1)),createTextVNode("~"+toDisplayString$1(c.$filters.formatFloatingPointValue(c.nativeValue).value)+" "+toDisplayString$1(c.nativeSymbol)+" ($"+toDisplayString$1(c.$filters.formatFiatValue(u.value).value)+") short. ",1)])):createCommentVNode("",!0)]))}}),_hoisted_1$8={class:"container"},_hoisted_2$8={key:0,class:"send-transaction"},_hoisted_3$7={class:"send-transaction__buttons"},_hoisted_4$6={class:"send-transaction__buttons-cancel"},_hoisted_5$4={class:"send-transaction__buttons-send"},_sfc_main$9=defineComponent({__name:"index",props:{network:{type:Object,default:()=>({})},accountInfo:{type:Object,default:()=>({})}},setup(n){var Pe;const t=n,u=new BTCToken({icon:t.network.icon,symbol:"Loading",balance:"0",price:"0",name:"loading",decimals:t.network.decimals}),c=ref(),ee=useRoute(),te=useRouter(),ae=ee.params.id,ne=JSON.parse(ee.params.tokenData?ee.params.tokenData:"{}"),oe=ref(JSON.parse(ee.params.isToken)),ie=ref(u),se=ref(""),ue=ref([]),le=ref(!1),ce=computed(()=>se.value&&se.value!==""?se.value:"0"),de=ref(!1),fe=ref(GasPriceTypes.REGULAR),pe=ref(defaultGasCostVals),me=ref(((Pe=t.accountInfo.selectedAccount)==null?void 0:Pe.address)??""),ge=ref(""),De=ref(!0);onMounted(async()=>{trackSendEvents(SendEventType.SendOpen,{network:t.network.name}),Be().then(xe)});const Ce=computed(()=>isNumericPositive(ce.value)?ie.value&&isValidDecimals(ce.value,ie.value.decimals)?_e.value.sub(libExports.toBN(toBase(ce.value??"0",ie.value.decimals)).add(libExports.toBN(toBase(pe.value[fe.value].nativeValue,ie.value.decimals)))):libExports.toBN(0):libExports.toBN(0)),we=Ne=>{const We=ie.value.price||"0";getGasCostValues(t.network,Ne,We,t.network.decimals,t.network.currencyName).then(Xe=>pe.value=Xe)},xe=()=>{Re().then(()=>{de.value&&Ie()})},Re=async()=>(await t.network.api()).getUTXOs(me.value).then(We=>{ue.value=We;const Xe=calculateSizeBasedOnType(ue.value.length+(oe.value?0:1),2,t.network.networkInfo.paymentType);we(Math.ceil(Xe))}),Be=()=>(ie.value=u,De.value=!0,t.network.getAllTokens(me.value).then(Ne=>{ie.value=Ne[0],De.value=!1})),Se=computed(()=>{var We;let Ne="Send";return parseInt(ce.value)>0&&(Ne="Send "+formatFloatingPointValue(ce.value).value+" "+((We=ie.value)==null?void 0:We.symbol.toUpperCase())),Ne}),Te=computed(()=>{if(!isAddress$1(ge.value,t.network.networkInfo)||oe.value&&!isValidDecimals(ce.value,ie.value.decimals)||!oe.value&&!ye.value.id||Number(ce.value)<t.network.dust&&oe.value)return!1;const Ne=new BigNumber$1(ce.value);return!(Ne.isNaN()||Ne.gt(Me.value))});watch([me],()=>{me.value&&Be().then(xe)});const Ae=ref(!1),he=ref(!1),ve=ref(!1),ye=ref({id:"",contract:"",image:"",name:"Loading",url:"",collectionName:"",type:NFTType.Ordinals}),be=()=>{trackSendEvents(SendEventType.SendDecline,{network:t.network.name}),te.go(-1)},_e=computed(()=>libExports.toBN(ue.value.reduce((Ne,We)=>Ne+We.value,0))),Me=computed(()=>fromBase(_e.value.sub(libExports.toBN(toBase(pe.value[fe.value].nativeValue,ie.value.decimals))).toString(),ie.value.decimals)),Ie=()=>{de.value=!0,se.value=parseFloat(Me.value)<0?"0":Me.value},Fe=Ne=>{me.value=Ne},Ee=Ne=>{ge.value=Ne},ke=Ne=>{Ae.value=Ne},Ve=Ne=>{he.value=Ne},ze=Ne=>{me.value=Ne,Ae.value=!1,Be()},Ue=Ne=>{ge.value=t.network.displayAddress(Ne),he.value=!1},Oe=Ne=>{Ne===""&&(Ne="0");const We=new BigNumber$1(Ne);de.value=!1,se.value=We.lt(0)?"0":Ne},Dt=()=>{ve.value=!ve.value},$t=Ne=>{fe.value=Ne,ve.value=!1,de.value&&Ie()},Mt=Ne=>{le.value=Ne},Kt=Ne=>{ye.value=Ne,le.value=!1},Vt=new RecentlySentAddressesState,Ht=async()=>{await Vt.addRecentlySentAddress(t.network,ge.value);const We=await new PublicKeyRing().getAccount(me.value),Xe=libExports.toBN(toBase(pe.value[fe.value].nativeValue,ie.value.decimals));let Wt=getTxInfo(ue.value),Ft=libExports.toBN(toBase(ce.value,ie.value.decimals));if(oe.value)Wt.outputs.push({address:ge.value,value:Ft.toNumber()});else{const Yt=await t.network.api(),[Rt,Le]=ye.value.id.split(":"),qe=await Yt.getTransactionStatus(Rt),Ye=qe.outputs[parseInt(Le)];Wt=getTxInfo(ue.value,{address:Ye.address,block:{height:qe.blockNumber},index:parseInt(Le),pkscript:Ye.pkscript,txid:Rt,value:Ye.value}),Ft=libExports.toBN(Ye.value),Wt.outputs.push({address:ge.value,value:Ye.value})}const jt=_e.value.sub(Ft).sub(Xe);jt.gtn(0)&&Wt.outputs.push({address:t.network.displayAddress(me.value),value:jt.toNumber()});const ea={TxInfo:JSON.stringify(Wt),isNFT:!oe.value,NFTData:oe.value?void 0:ye.value,toToken:{amount:Ft.toString(),decimals:ie.value.decimals,icon:ie.value.icon,symbol:ie.value.symbol,valueUSD:new BigNumber$1(ie.value.price||"0").times(ce.value).toString(),name:ie.value.name,price:ie.value.price||"0"},fromAddress:We.address,fromAddressName:We.name,gasFee:pe.value[fe.value],gasPriceType:fe.value,toAddress:ge.value},Xt=te.resolve({name:routes.verify.name,query:{id:ae,txData:Buffer.from(JSON.stringify(ea),"utf8").toString("base64")}});We.isHardware?(await Browser$1.windows.create({url:Browser$1.runtime.getURL(getUiPath(`btc-hw-verify?id=${Xt.query.id}&txData=${Xt.query.txData}`,ProviderName.bitcoin)),type:"popup",focused:!0,height:600,width:460}),window.close()):te.push(Xt)},$e=Ne=>{oe.value=Ne};return(Ne,We)=>(openBlock(),createElementBlock("div",_hoisted_1$8,[unref(ae)?(openBlock(),createElementBlock("div",_hoisted_2$8,[createVNode$1(SendHeader,{"is-send-token":oe.value,"is-nft-available":!!n.network.NFTHandler,onClose:be,onToggleType:$e},null,8,["is-send-token","is-nft-available"]),createVNode$1(_sfc_main$c,{ref:"addressInputFrom",from:!0,value:me.value,network:n.network,"disable-direct-input":!0,onClick:We[0]||(We[0]=Xe=>ke(!0)),"onUpdate:inputAddress":Fe,"onToggle:showContacts":ke},null,8,["value","network"]),createVNode$1(_sfc_main$s,{"show-accounts":Ae.value,"account-info":n.accountInfo,address:me.value,network:n.network,"onSelected:account":ze,onClose:ke},null,8,["show-accounts","account-info","address","network"]),createVNode$1(_sfc_main$c,{ref_key:"addressInputTo",ref:c,value:ge.value,network:n.network,"onUpdate:inputAddress":Ee,"onToggle:showContacts":Ve},null,8,["value","network"]),createVNode$1(SendContactsList,{"show-accounts":he.value,"account-info":n.accountInfo,address:ge.value,network:n.network,"onSelected:account":Ue,"onUpdate:pasteFromClipboard":We[1]||(We[1]=Xe=>c.value.pasteFromClipboard()),onClose:Ve},null,8,["show-accounts","account-info","address","network"]),oe.value?(openBlock(),createBlock(_sfc_main$b,{key:0,token:ie.value},null,8,["token"])):createCommentVNode("",!0),oe.value?createCommentVNode("",!0):(openBlock(),createBlock(_sfc_main$e,{key:1,item:ye.value,"is-sending-disabled":!1,onToggleSelect:Mt},null,8,["item"])),withDirectives(createVNode$1(_sfc_main$h,{address:me.value,network:n.network,"selected-nft":unref(ne),onClose:Mt,onSelectNft:Kt},null,8,["address","network","selected-nft"]),[[vShow,le.value]]),oe.value?(openBlock(),createBlock(_sfc_main$p,{key:2,amount:se.value,"fiat-value":ie.value.price,"has-enough-balance":!Ce.value.isNeg(),"onUpdate:inputAmount":Oe,"onUpdate:inputSetMax":Ie},null,8,["amount","fiat-value","has-enough-balance"])):createCommentVNode("",!0),createVNode$1(SendFeeSelect,{"in-swap":!1,selected:fe.value,fee:pe.value[fe.value],onOpenPopup:Dt},null,8,["selected","fee"]),createVNode$1(_sfc_main$36,{fees:pe.value,"show-fees":ve.value,selected:fe.value,"is-header":!0,onClosePopup:Dt,onGasTypeChanged:$t},null,8,["fees","show-fees","selected"]),withDirectives(createVNode$1(_sfc_main$a,{"native-symbol":n.network.name,price:ie.value.price||"0","is-balance-zero":_e.value.isZero(),"native-value":unref(fromBase)(Ce.value.abs().toString(),n.network.decimals),decimals:n.network.decimals,"below-dust":Number(ce.value)<t.network.dust,dust:t.network.dust.toString(),"not-enough":Ce.value.isNeg()},null,8,["native-symbol","price","is-balance-zero","native-value","decimals","below-dust","dust","not-enough"]),[[vShow,Ce.value.isNeg()||Number(ce.value)<t.network.dust&&Number(ce.value)>0]]),createBaseVNode("div",_hoisted_3$7,[createBaseVNode("div",_hoisted_4$6,[createVNode$1(_sfc_main$2W,{title:"Cancel",click:be,"no-background":!0})]),createBaseVNode("div",_hoisted_5$4,[createVNode$1(_sfc_main$2W,{title:Se.value,click:Ht,disabled:!Te.value},null,8,["title","disabled"])])])])):createCommentVNode("",!0)]))}}),SendTransactionBTC=_export_sfc(_sfc_main$9,[["__scopeId","data-v-36a3795c"]]),_hoisted_1$7={class:"send-address-input__avatar"},_hoisted_2$7=["src"],_hoisted_3$6={class:"send-address-input__address"},_hoisted_4$5={key:0},_hoisted_5$3={key:1},_hoisted_6$2=["disabled"],_sfc_main$8=defineComponent({__name:"send-address-input",props:{value:{type:String,default:()=>""},from:{type:Boolean,default:!1},network:{type:Object,default:()=>({})},disableDirectInput:Boolean,isAddress:{type:Boolean,default:!1}},emits:["update:inputAddress","toggle:showContacts"],setup(n,{expose:t,emit:u}){const c=u,ee=n,te=ref(),ae=ref(!1);t({addressInput:te,pasteFromClipboard:()=>{var se;(se=te.value)==null||se.focus(),document.execCommand("paste")}});const oe=computed({get:()=>{try{return ae.value&&ee.isAddress?ee.network.displayAddress(ee.value):ee.isAddress?replaceWithEllipsis(ee.network.displayAddress(ee.value),6,6):ee.value}catch{return ee.value}},set:se=>{c("update:inputAddress",se)}}),ie=se=>{ae.value=se.type==="focus",ae.value&&c("toggle:showContacts",ae.value)};return(se,ue)=>(openBlock(),createElementBlock("div",{class:normalizeClass$1(["send-address-input",{focus:ae.value}])},[createBaseVNode("div",_hoisted_1$7,[n.isAddress?(openBlock(),createElementBlock("img",{key:0,src:n.network.identicon(n.network.displayAddress(n.value)),alt:""},null,8,_hoisted_2$7)):createCommentVNode("",!0)]),createBaseVNode("div",_hoisted_3$6,[n.from?(openBlock(),createElementBlock("p",_hoisted_5$3,"From:")):(openBlock(),createElementBlock("p",_hoisted_4$5,"To:")),withDirectives(createBaseVNode("input",{ref_key:"addressInput",ref:te,"onUpdate:modelValue":ue[0]||(ue[0]=le=>oe.value=le),type:"text",disabled:n.disableDirectInput,placeholder:"address",style:normalizeStyle$2({color:n.isAddress?"black":"red"}),onFocus:ie,onBlur:ie},null,44,_hoisted_6$2),[[vModelText,oe.value]])])],2))}}),_hoisted_1$6={class:"send-token-select__image"},_hoisted_2$6=["src"],_hoisted_3$5={class:"send-token-select__info"},_hoisted_4$4={class:"send-token-select__arrow"},_sfc_main$7=defineComponent({__name:"send-token-select",props:{token:{}},emits:["update:toggleTokenSelect"],setup(n,{emit:t}){const u=t,c=n,ee=computed(()=>c.token&&c.token.balance?fromBase(c.token.balance,c.token.decimals):void 0);return(te,ae)=>(openBlock(),createElementBlock("a",{class:"send-token-select",onClick:ae[0]||(ae[0]=ne=>u("update:toggleTokenSelect"))},[createBaseVNode("div",_hoisted_1$6,[createBaseVNode("img",{src:te.token.icon,alt:""},null,8,_hoisted_2$6)]),createBaseVNode("div",_hoisted_3$5,[createBaseVNode("h5",null,toDisplayString$1(te.token.name),1),createBaseVNode("p",null,[createTextVNode(toDisplayString$1(ee.value?te.$filters.formatFloatingPointValue(ee.value).value:"~")+" ",1),createBaseVNode("span",null,toDisplayString$1(te.token.symbol),1)])]),createBaseVNode("div",_hoisted_4$4,[createVNode$1(SwitchArrow)])]))}}),_hoisted_1$5={class:"send-fee-select__value"},_hoisted_2$5={class:"send-fee-select__value-fiat"},_hoisted_3$4={class:"send-fee-select__value-crypto"},_sfc_main$6=defineComponent({__name:"send-fee-select",props:{fee:{type:Object,default:()=>({})},inSwap:{type:Boolean,default:()=>!1}},setup(n){return(t,u)=>(openBlock(),createElementBlock("a",{class:normalizeClass$1(["send-fee-select",{swap:n.inSwap}])},[createBaseVNode("div",_hoisted_1$5,[createBaseVNode("p",_hoisted_2$5," Fee: "+toDisplayString$1(n.fee.fiatValue?t.$filters.formatFiatValue(n.fee.fiatValue).value:"")+" "+toDisplayString$1(n.fee.fiatSymbol??""),1),createBaseVNode("p",_hoisted_3$4,[createTextVNode(toDisplayString$1(n.fee.nativeValue?t.$filters.formatFloatingPointValue(n.fee.nativeValue).value:"~")+" ",1),createBaseVNode("span",null,toDisplayString$1(n.fee.nativeSymbol),1)])])],2))}}),_hoisted_1$4={class:"container"},_hoisted_2$4={key:0,class:"send-transaction"},_hoisted_3$3={class:"send-transaction__header"},_hoisted_4$3={class:"send-transaction__buttons"},_hoisted_5$2={class:"send-transaction__buttons-cancel"},_hoisted_6$1={class:"send-transaction__buttons-send"},_sfc_main$5=defineComponent({__name:"index",props:{network:{type:Object,default:()=>({})},accountInfo:{type:Object,default:()=>({})}},setup(n){const t=n,u=useRoute(),c=useRouter(),ee=new GenericNameResolver,te=ref(""),ae=ref(),ne=ref(),oe=ref(!1),ie=ref(!1),se=ref(t.accountInfo.selectedAccount.address),ue=ref(""),le=ref(!1),ce=ref(),de=ref(null),fe=ref([]),pe=ref(new KDAToken({icon:t.network.icon,balance:"0",price:"0",name:"loading",symbol:"loading",decimals:t.network.decimals})),me=ref(!1),ge=ref({addressTo:!1,amount:!1}),De=u.params.id,Ce=ref(!0),we=computed(()=>ue.value.length>3&&ue.value.length<256);onMounted(()=>{Ce.value=!0,Re()});const xe=async()=>{var ze,Ue,Oe,Dt;if(te.value="",de.value=null,ge.value={addressTo:!0,amount:!0},!!pe.value)try{if(we.value){const Kt=t.network.displayAddress(ue.value),Vt=t.network.displayAddress(se.value);if((await fe.value[0].getAccountDetails(Vt,t.network)).error){te.value="Not enough balance";return}if(!t.network.isAddress(Kt)&&(await fe.value[0].getAccountDetails(Kt,t.network)).error){ge.value.addressTo=!1,te.value='Invalid "To" address';return}if(Kt==Vt){ge.value.addressTo=!1,te.value='"To" address cannot be the same as "From" address';return}}else{ge.value.addressTo=!1;return}let $t=libExports.toBN(toBase("0",pe.value.decimals));const Mt=libExports.toBN(toBase("0.000001",t.network.decimals));if(ce.value){if(!isValidDecimals(ce.value,pe.value.decimals)){ge.value.amount=!1,te.value=`Amount cannot have more than ${pe.value.decimals} decimals`;return}if(!isNumericPositive(ce.value)){ge.value.amount=!1,te.value="Invalid amount. Amount has to be greater than 0";return}if($t=libExports.toBN(toBase(ce.value.toString(),pe.value.decimals)),$t.lt(Mt)){ge.value.amount=!1,te.value="Amount must be greater than 0.000001";return}}if(ce.value||me.value){const Kt=await pe.value.buildTransaction(ue.value,t.accountInfo.selectedAccount,me.value?fromBase(Mt.toString(),t.network.decimals):ce.value,t.network),Ht=await(await t.network.api()).sendLocalTransaction(Kt).catch(ea=>ea.message.includes("Insufficient funds")?{result:{status:"error",error:{message:"Insufficient funds"}}}:{result:{status:"error",error:{message:"An error occurred"}}});if(Ht.result.status!=="success"){ge.value.amount=!1,te.value=Ht.result.error.message.replace(/"/g,"").replace(Ht.reqKey,"")||"An error occurred";return}const $e=(Ue=(ze=Ht.metaData)==null?void 0:ze.publicMeta)==null?void 0:Ue.gasLimit,Pe=(Dt=(Oe=Ht.metaData)==null?void 0:Oe.publicMeta)==null?void 0:Dt.gasPrice,Ne=$e&&Pe?$e*Pe:0,We=libExports.toBN(toBase(Ne.toString(),pe.value.decimals)),Xe=libExports.toBN(pe.value.balance);if(me.value&&pe.value.name===fe.value[0].name&&($t=Xe.sub(We),$t.gtn(0)&&(ce.value=fromBase($t.toString(),pe.value.decimals))),$t.add(We).gt(Xe)){ge.value.amount=!1,te.value="Not enough balance.";return}const Wt=fe.value[0],Ft=fromBase((We==null?void 0:We.toString())??"",Wt.decimals),jt=new BigNumber$1(Wt.price).times(Ft);de.value={fiatSymbol:"USD",fiatValue:jt.toString(),nativeSymbol:Wt.symbol??"",nativeValue:Ft.toString()}}}catch($t){te.value=$t.message||"An error occurred"}};watch([pe,ue,ce],xe),watch(se,()=>{Re()});const Re=async()=>{const ze=await t.network.api(),Ue=await t.network.getAllTokens(se.value),Oe=Ue.map($t=>$t.getLatestPrice()),Dt=Ue.map($t=>$t.balance?Promise.resolve($t.balance):$t.getBalance(ze.api,se.value));Promise.all([...Oe,...Dt]).then(()=>{const $t=Ue.filter(Mt=>!libExports.toBN(Mt.balance??"0").isZero());$t.length==0&&$t.push(Ue[0]),pe.value=$t[0],fe.value=$t,Ce.value=!1})},Be=()=>{c.go(-1)},Se=ze=>{se.value=ze},Te=ze=>{lodashExports.debounce(()=>{ee.resolveName(ze,[t.network.name]).then(Oe=>{Oe&&(ue.value=Oe)})},500)(),ue.value=ze},Ae=ze=>{oe.value=ze},he=ze=>{ie.value=ze},ve=()=>{le.value=!le.value},ye=ze=>{se.value=ze,oe.value=!1},be=ze=>{ue.value=ze,ie.value=!1},_e=ze=>{pe.value=ze,le.value=!1},Me=ze=>{ze===""&&(ze="0");const Ue=new BigNumber$1(ze);me.value=!1,ce.value=Ue.lt(0)?"0":ze},Ie=computed(()=>{var Ue;let ze="Send";return!Ee.value&&ce.value&&(ze="Send "+formatFloatingPointValue(ce.value).value+" "+((Ue=pe.value)==null?void 0:Ue.symbol.toUpperCase())),ze}),Fe=()=>{me.value=!0,xe()},Ee=computed(()=>!ue.value||!ce.value||!ge.value.amount||!ge.value.addressTo||!de.value),ke=new RecentlySentAddressesState,Ve=async()=>{await ke.addRecentlySentAddress(t.network,ue.value);const Ue=await new PublicKeyRing().getAccount(se.value),Dt=await(await t.network.api()).getChainId(),$t={TransactionData:{from:Ue.address,to:ue.value,data:"0x",value:ce.value},toToken:{amount:toBase(ce.value,pe.value.decimals),decimals:pe.value.decimals,icon:pe.value.icon,symbol:pe.value.symbol||"unknown",valueUSD:new BigNumber$1(pe.value.price||"0").times(ce.value).toFixed(),name:pe.value.name||"",price:pe.value.price||"0"},chainId:Dt,fromAddress:Ue.address,fromAddressName:Ue.name,txFee:de.value,toAddress:ue.value},Mt=c.resolve({name:routes.verify.name,query:{id:De,txData:Buffer.from(JSON.stringify($t),"utf8").toString("base64")}});Ue.isHardware?(await Browser$1.windows.create({url:Browser$1.runtime.getURL(getUiPath(`dot-hw-verify?id=${Mt.query.id}&txData=${Mt.query.txData}`,ProviderName.kadena)),type:"popup",focused:!0,height:600,width:460}),window.close()):c.push(Mt)};return(ze,Ue)=>(openBlock(),createElementBlock("div",_hoisted_1$4,[unref(De)?(openBlock(),createElementBlock("div",_hoisted_2$4,[createBaseVNode("div",_hoisted_3$3,[Ue[2]||(Ue[2]=createBaseVNode("h3",null,"Send",-1)),createBaseVNode("a",{class:"send-transaction__close",onClick:Be},[createVNode$1(CloseIcon)])]),createVNode$1(_sfc_main$8,{ref_key:"addressInputFrom",ref:ne,from:!0,value:se.value,network:n.network,"disable-direct-input":!0,"is-address":!0,onClick:Ue[0]||(Ue[0]=Oe=>Ae(!0)),"onUpdate:inputAddress":Se,"onToggle:showContacts":Ae},null,8,["value","network"]),createVNode$1(_sfc_main$s,{"show-accounts":oe.value,"account-info":n.accountInfo,address:se.value,network:n.network,"onSelected:account":ye,onClose:Ae},null,8,["show-accounts","account-info","address","network"]),createVNode$1(_sfc_main$8,{ref_key:"addressInputTo",ref:ae,value:ue.value,network:n.network,"is-address":ge.value.addressTo,"onUpdate:inputAddress":Te,"onToggle:showContacts":he},null,8,["value","network","is-address"]),createVNode$1(SendContactsList,{"show-accounts":ie.value,"account-info":n.accountInfo,address:ue.value,network:n.network,"onSelected:account":be,"onUpdate:pasteFromClipboard":Ue[1]||(Ue[1]=Oe=>ae.value.pasteFromClipboard()),onClose:he},null,8,["show-accounts","account-info","address","network"]),createVNode$1(_sfc_main$7,{token:pe.value,"onUpdate:toggleTokenSelect":ve},null,8,["token"]),withDirectives(createVNode$1(_sfc_main$J,{"is-send":!0,assets:fe.value,"is-loading":Ce.value,onClose:ve,"onUpdate:selectAsset":_e},null,8,["assets","is-loading"]),[[vShow,le.value]]),createVNode$1(_sfc_main$p,{amount:ce.value,"show-max":!0,"fiat-value":pe.value.price,"has-enough-balance":ge.value.amount,"onUpdate:inputAmount":Me,"onUpdate:inputSetMax":Fe},null,8,["amount","fiat-value","has-enough-balance"]),createVNode$1(_sfc_main$6,{fee:de.value??{nativeSymbol:t.network.currencyName}},null,8,["fee"]),withDirectives(createVNode$1(_sfc_main$z,{"error-msg":te.value},null,8,["error-msg"]),[[vShow,te.value]]),createBaseVNode("div",_hoisted_4$3,[createBaseVNode("div",_hoisted_5$2,[createVNode$1(_sfc_main$2W,{title:"Cancel",click:Be,"no-background":!0})]),createBaseVNode("div",_hoisted_6$1,[createVNode$1(_sfc_main$2W,{title:Ie.value,click:Ve,disabled:Ee.value},null,8,["title","disabled"])])])])):createCommentVNode("",!0)]))}}),SendTransactionKadena=_export_sfc(_sfc_main$5,[["__scopeId","data-v-4821a8e0"]]),_hoisted_1$3={class:"send-address-input__avatar"},_hoisted_2$3=["src"],_hoisted_3$2={class:"send-address-input__address"},_hoisted_4$2={key:0},_hoisted_5$1={key:1},_hoisted_6=["disabled"],_sfc_main$4=defineComponent({__name:"send-address-input",props:{value:{type:String,default:()=>""},network:{type:Object,default:()=>({})},from:{type:Boolean,default:!1},disableDirectInput:Boolean},emits:["update:inputAddress","toggle:showContacts"],setup(n,{expose:t,emit:u}){const c=ref(!1),ee=ref();t({addressInput:ee,pasteFromClipboard:()=>{var ue;(ue=ee.value)==null||ue.focus(),document.execCommand("paste")}});const ae=n,ne=u,oe=computed(()=>ae.value?ae.network.displayAddress(ae.value):ae.value),ie=computed({get:()=>c.value?oe.value:replaceWithEllipsis(oe.value,6,6),set:ue=>ne("update:inputAddress",ue)}),se=ue=>{c.value=ue.type==="focus",c.value&&ne("toggle:showContacts",c.value)};return(ue,le)=>(openBlock(),createElementBlock("div",{class:normalizeClass$1(["send-address-input",{focus:c.value}])},[createBaseVNode("div",_hoisted_1$3,[n.network.isAddress(oe.value)?(openBlock(),createElementBlock("img",{key:0,src:n.network.identicon(oe.value),alt:""},null,8,_hoisted_2$3)):createCommentVNode("",!0)]),createBaseVNode("div",_hoisted_3$2,[n.from?(openBlock(),createElementBlock("p",_hoisted_5$1,"From:")):(openBlock(),createElementBlock("p",_hoisted_4$2,"To:")),withDirectives(createBaseVNode("input",{ref_key:"addressInput",ref:ee,"onUpdate:modelValue":le[0]||(le[0]=ce=>ie.value=ce),type:"text",disabled:n.disableDirectInput,placeholder:"address",style:normalizeStyle$2({color:n.network.isAddress(oe.value)?"black":"red"}),onFocus:se,onBlur:se},null,44,_hoisted_6),[[vModelText,ie.value]])])],2))}}),_hoisted_1$2={class:"send-token-select__image"},_hoisted_2$2=["src"],_hoisted_3$1={class:"send-token-select__info"},_hoisted_4$1={class:"send-token-select__arrow"},_sfc_main$3=defineComponent({__name:"send-token-select",props:{token:{type:Object,default:()=>({})}},emits:["update:toggleTokenSelect"],setup(n,{emit:t}){const u=t,c=n,ee=computed(()=>c.token&&c.token.balance?fromBase(c.token.balance,c.token.decimals):void 0);return(te,ae)=>(openBlock(),createElementBlock("a",{class:"send-token-select",onClick:ae[0]||(ae[0]=ne=>u("update:toggleTokenSelect"))},[createBaseVNode("div",_hoisted_1$2,[createBaseVNode("img",{src:n.token.icon,alt:""},null,8,_hoisted_2$2)]),createBaseVNode("div",_hoisted_3$1,[createBaseVNode("h5",null,toDisplayString$1(n.token.name),1),createBaseVNode("p",null,[createTextVNode(toDisplayString$1(ee.value?te.$filters.formatFloatingPointValue(ee.value).value:"~")+" ",1),createBaseVNode("span",null,toDisplayString$1(n.token.symbol),1)])]),createBaseVNode("div",_hoisted_4$1,[createVNode$1(SwitchArrow)])]))}}),_hoisted_1$1={class:"send-alert",role:"alert","aria-live":"polite"},_hoisted_2$1={"aria-label":"Error message"},_sfc_main$2=defineComponent({__name:"send-alert",props:{errorMsg:{}},setup(n){return(t,u)=>(openBlock(),createElementBlock("div",_hoisted_1$1,[createVNode$1(AlertIcon),createBaseVNode("p",_hoisted_2$1,toDisplayString$1(t.errorMsg),1)]))}}),some=n=>({__option:"Some",value:n}),none=()=>({__option:"None"}),isOption=n=>n&&typeof n=="object"&&"__option"in n&&(n.__option==="Some"&&"value"in n||n.__option==="None"),isSome=n=>n.__option==="Some",wrapNullable=n=>n!==null?some(n):none();let InvalidBaseStringError$1=class extends Error{constructor(u,c,ee){const te=`Expected a string of base ${c}, got [${u}].`;super(te);Ca(this,"name","InvalidBaseStringError");this.cause=ee}};const baseX$1=n=>{const t=n.length,u=BigInt(t);return{description:`base${t}`,fixedSize:null,maxSize:null,serialize(c){if(!c.match(new RegExp(`^[${n}]*$`)))throw new InvalidBaseStringError$1(c,t);if(c==="")return new Uint8Array;const ee=[...c];let te=ee.findIndex(ue=>ue!==n[0]);te=te===-1?ee.length:te;const ae=Array(te).fill(0);if(te===ee.length)return Uint8Array.from(ae);const ne=ee.slice(te);let oe=0n,ie=1n;for(let ue=ne.length-1;ue>=0;ue-=1)oe+=ie*BigInt(n.indexOf(ne[ue])),ie*=u;const se=[];for(;oe>0n;)se.unshift(Number(oe%256n)),oe/=256n;return Uint8Array.from(ae.concat(se))},deserialize(c,ee=0){if(c.length===0)return["",0];const te=c.slice(ee);let ae=te.findIndex(se=>se!==0);ae=ae===-1?te.length:ae;const ne=n[0].repeat(ae);if(ae===te.length)return[ne,c.length];let oe=te.slice(ae).reduce((se,ue)=>se*256n+BigInt(ue),0n);const ie=[];for(;oe>0n;)ie.unshift(n[Number(oe%u)]),oe/=u;return[ne+ie.join(""),c.length]}}},base58$2=baseX$1("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),mergeBytes=n=>{const t=n.reduce((ee,te)=>ee+te.length,0),u=new Uint8Array(t);let c=0;return n.forEach(ee=>{u.set(ee,c),c+=ee.length}),u},padBytes=(n,t)=>{if(n.length>=t)return n;const u=new Uint8Array(t).fill(0);return u.set(n),u},fixBytes=(n,t)=>padBytes(n.slice(0,t),t);class DeserializingEmptyBufferError extends Error{constructor(u){super(`Serializer [${u}] cannot deserialize empty buffers.`);Ca(this,"name","DeserializingEmptyBufferError")}}class NotEnoughBytesError extends Error{constructor(u,c,ee){super(`Serializer [${u}] expected ${c} bytes, got ${ee}.`);Ca(this,"name","NotEnoughBytesError")}}class ExpectedFixedSizeSerializerError extends Error{constructor(u){u??(u="Expected a fixed-size serializer, got a variable-size one.");super(u);Ca(this,"name","ExpectedFixedSizeSerializerError")}}function fixSerializer$1(n,t,u){return{description:u??`fixed(${t}, ${n.description})`,fixedSize:t,maxSize:t,serialize:c=>fixBytes(n.serialize(c),t),deserialize:(c,ee=0)=>{if(c=c.slice(ee,ee+t),c.length<t)throw new NotEnoughBytesError("fixSerializer",t,c.length);n.fixedSize!==null&&(c=fixBytes(c,n.fixedSize));const[te]=n.deserialize(c,0);return[te,ee+t]}}}function mapSerializer$1(n,t,u){return{description:n.description,fixedSize:n.fixedSize,maxSize:n.maxSize,serialize:c=>n.serialize(t(c)),deserialize:(c,ee=0)=>{const[te,ae]=n.deserialize(c,ee);return u?[u(te,c,ee),ae]:[te,ae]}}}const removeNullCharacters=n=>n.replace(/\u0000/g,""),utf8$1={description:"utf8",fixedSize:null,maxSize:null,serialize(n){return new TextEncoder().encode(n)},deserialize(n,t=0){const u=new TextDecoder().decode(n.slice(t));return[removeNullCharacters(u),n.length]}};class InvalidPublicKeyError extends Error{constructor(u,c){c=c?`. ${c}`:"";super(`The provided public key is invalid: ${u}${c}`);Ca(this,"name","InvalidPublicKeyError");this.invalidPublicKey=u}}const PUBLIC_KEY_LENGTH=32;function publicKey$2(n,t=!0){const u=typeof n=="string"?n:typeof n=="object"&&"publicKey"in n?n.publicKey:typeof n=="object"&&"toBase58"in n?n.toBase58():Array.isArray(n)?n[0]:base58$2.deserialize(n)[0];return t&&assertPublicKey(u),u}const isPublicKey=n=>{try{return assertPublicKey(n),!0}catch{return!1}};function assertPublicKey(n){if(typeof n!="string")throw new InvalidPublicKeyError(n,"Public keys must be strings.");publicKeyBytes(n)}const publicKeyBytes=n=>{if(n.length<32||n.length>44)throw new InvalidPublicKeyError(n,"Public keys must be between 32 and 44 characters.");let t;try{t=base58$2.serialize(n)}catch{throw new InvalidPublicKeyError(n,"Public keys must be base58 encoded.")}if(t.length!==PUBLIC_KEY_LENGTH)throw new InvalidPublicKeyError(n,`Public keys must be ${PUBLIC_KEY_LENGTH} bytes.`);return t};let Endian;(function(n){n.Little="le",n.Big="be"})(Endian||(Endian={}));class NumberOutOfRangeError extends RangeError{constructor(u,c,ee,te){super(`Serializer [${u}] expected number to be between ${c} and ${ee}, got ${te}.`);Ca(this,"name","NumberOutOfRangeError")}}function numberFactory(n){let t,u=n.name;return n.size>1&&(t=!("endian"in n.options)||n.options.endian===Endian.Little,u+=t?"(le)":"(be)"),{description:n.options.description??u,fixedSize:n.size,maxSize:n.size,serialize(c){n.range&&assertRange(n.name,n.range[0],n.range[1],c);const ee=new ArrayBuffer(n.size);return n.set(new DataView(ee),c,t),new Uint8Array(ee)},deserialize(c,ee=0){const te=c.slice(ee,ee+n.size);assertEnoughBytes("i8",te,n.size);const ae=toDataView(te);return[n.get(ae,t),ee+n.size]}}}const toArrayBuffer=n=>n.buffer.slice(n.byteOffset,n.byteLength+n.byteOffset),toDataView=n=>new DataView(toArrayBuffer(n)),assertRange=(n,t,u,c)=>{if(c<t||c>u)throw new NumberOutOfRangeError(n,t,u,c)},assertEnoughBytes=(n,t,u)=>{if(t.length===0)throw new DeserializingEmptyBufferError(n);if(t.length<u)throw new NotEnoughBytesError(n,u,t.length)},f32$1=(n={})=>numberFactory({name:"f32",size:4,set:(t,u,c)=>t.setFloat32(0,Number(u),c),get:(t,u)=>t.getFloat32(0,u),options:n}),f64$1=(n={})=>numberFactory({name:"f64",size:8,set:(t,u,c)=>t.setFloat64(0,Number(u),c),get:(t,u)=>t.getFloat64(0,u),options:n}),i8$1=(n={})=>numberFactory({name:"i8",size:1,range:[-+"0x7f"-1,+"0x7f"],set:(t,u)=>t.setInt8(0,Number(u)),get:t=>t.getInt8(0),options:n}),i16$1=(n={})=>numberFactory({name:"i16",size:2,range:[-+"0x7fff"-1,+"0x7fff"],set:(t,u,c)=>t.setInt16(0,Number(u),c),get:(t,u)=>t.getInt16(0,u),options:n}),i32$1=(n={})=>numberFactory({name:"i32",size:4,range:[-+"0x7fffffff"-1,+"0x7fffffff"],set:(t,u,c)=>t.setInt32(0,Number(u),c),get:(t,u)=>t.getInt32(0,u),options:n}),i64$1=(n={})=>numberFactory({name:"i64",size:8,range:[-BigInt("0x7fffffffffffffff")-1n,BigInt("0x7fffffffffffffff")],set:(t,u,c)=>t.setBigInt64(0,BigInt(u),c),get:(t,u)=>t.getBigInt64(0,u),options:n}),i128$1=(n={})=>numberFactory({name:"i128",size:16,range:[-BigInt("0x7fffffffffffffffffffffffffffffff")-1n,BigInt("0x7fffffffffffffffffffffffffffffff")],set:(t,u,c)=>{const ee=c?8:0,te=c?0:8,ae=0xffffffffffffffffn;t.setBigInt64(ee,BigInt(u)>>64n,c),t.setBigUint64(te,BigInt(u)&ae,c)},get:(t,u)=>{const c=u?8:0,ee=u?0:8,te=t.getBigInt64(c,u),ae=t.getBigUint64(ee,u);return(te<<64n)+ae},options:n}),u8$1=(n={})=>numberFactory({name:"u8",size:1,range:[0,+"0xff"],set:(t,u)=>t.setUint8(0,Number(u)),get:t=>t.getUint8(0),options:n}),u16$1=(n={})=>numberFactory({name:"u16",size:2,range:[0,+"0xffff"],set:(t,u,c)=>t.setUint16(0,Number(u),c),get:(t,u)=>t.getUint16(0,u),options:n}),u32$1=(n={})=>numberFactory({name:"u32",size:4,range:[0,+"0xffffffff"],set:(t,u,c)=>t.setUint32(0,Number(u),c),get:(t,u)=>t.getUint32(0,u),options:n}),u64$1=(n={})=>numberFactory({name:"u64",size:8,range:[0,BigInt("0xffffffffffffffff")],set:(t,u,c)=>t.setBigUint64(0,BigInt(u),c),get:(t,u)=>t.getBigUint64(0,u),options:n}),u128$1=(n={})=>numberFactory({name:"u128",size:16,range:[0,BigInt("0xffffffffffffffffffffffffffffffff")],set:(t,u,c)=>{const ee=c?8:0,te=c?0:8,ae=0xffffffffffffffffn;t.setBigUint64(ee,BigInt(u)>>64n,c),t.setBigUint64(te,BigInt(u)&ae,c)},get:(t,u)=>{const c=u?8:0,ee=u?0:8,te=t.getBigUint64(c,u),ae=t.getBigUint64(ee,u);return(te<<64n)+ae},options:n}),shortU16$1=(n={})=>({description:n.description??"shortU16",fixedSize:null,maxSize:3,serialize:t=>{assertRange("shortU16",0,65535,t);const u=[0];for(let c=0;;c+=1){const ee=t>>c*7;if(ee===0)break;const te=127&ee;u[c]=te,c>0&&(u[c-1]|=128)}return new Uint8Array(u)},deserialize:(t,u=0)=>{let c=0,ee=0;for(;++ee;){const te=ee-1,ae=t[u+te],ne=127&ae;if(c|=ne<<te*7,!(ae&128))break}return[c,u+ee]}});class InvalidNumberOfItemsError extends Error{constructor(u,c,ee){super(`Expected [${u}] to have ${c} items, got ${ee}.`);Ca(this,"name","InvalidNumberOfItemsError")}}class UnrecognizedArrayLikeSerializerSizeError extends Error{constructor(u){super(`Unrecognized array-like serializer size: ${JSON.stringify(u)}`);Ca(this,"name","UnrecognizedArrayLikeSerializerSizeError")}}class InvalidDataEnumVariantError extends Error{constructor(u,c){super(`Invalid data enum variant. Expected one of [${c.join(", ")}], got "${u}".`);Ca(this,"name","InvalidDataEnumVariantError")}}class InvalidScalarEnumVariantError extends Error{constructor(u,c,ee,te){super(`Invalid scalar enum variant. Expected one of [${c.join(", ")}] or a number between ${ee} and ${te}, got "${u}".`);Ca(this,"name","InvalidScalarEnumVariantError")}}class EnumDiscriminatorOutOfRangeError extends RangeError{constructor(u,c,ee){super(`Enum discriminator out of range. Expected a number between ${c} and ${ee}, got ${u}.`);Ca(this,"name","EnumDiscriminatorOutOfRangeError")}}function sumSerializerSizes$1(n){return n.reduce((t,u)=>t===null||u===null?null:t+u,0)}function getResolvedSize(n,t,u){if(typeof n=="number")return[n,u];if(typeof n=="object")return n.deserialize(t,u);throw new UnrecognizedArrayLikeSerializerSizeError(n)}function getSizeDescription(n){return typeof n=="object"?n.description:`${n}`}function getSizeFromChildren(n,t){if(typeof n!="number")return null;if(n===0)return 0;const u=sumSerializerSizes$1(t);return u===null?null:u*n}function getSizePrefix(n,t){return typeof n=="object"?n.serialize(t):new Uint8Array}function array$1(n,t={}){const u=t.size??u32$1();return{description:t.description??`array(${n.description}; ${getSizeDescription(u)})`,fixedSize:getSizeFromChildren(u,[n.fixedSize]),maxSize:getSizeFromChildren(u,[n.maxSize]),serialize:c=>{if(typeof u=="number"&&c.length!==u)throw new InvalidNumberOfItemsError("array",u,c.length);return mergeBytes([getSizePrefix(u,c.length),...c.map(ee=>n.serialize(ee))])},deserialize:(c,ee=0)=>{const te=[];if(typeof u=="object"&&c.slice(ee).length===0)return[te,ee];if(u==="r