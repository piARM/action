=this.base.port,this.url.path=this.base.path.slice(0,this.base.path.length-1),this.state="path",--this.pointer),!0},Kt.prototype["parse relative slash"]=function(Ne){return De(this.url)&&(Ne===47||Ne===92)?(Ne===92&&(this.parseError=!0),this.state="special authority ignore slashes"):Ne===47?this.state="authority":(this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.state="path",--this.pointer),!0},Kt.prototype["parse special authority slashes"]=function(Ne){return Ne===47&&this.input[this.pointer+1]===47?(this.state="special authority ignore slashes",++this.pointer):(this.parseError=!0,this.state="special authority ignore slashes",--this.pointer),!0},Kt.prototype["parse special authority ignore slashes"]=function(Ne){return Ne!==47&&Ne!==92?(this.state="authority",--this.pointer):this.parseError=!0,!0},Kt.prototype["parse authority"]=function(Ne,We){if(Ne===64){this.parseError=!0,this.atFlag&&(this.buffer="%40"+this.buffer),this.atFlag=!0;const Xe=te(this.buffer);for(let Wt=0;Wt<Xe;++Wt){const Ft=this.buffer.codePointAt(Wt);if(Ft===58&&!this.passwordTokenSeenFlag){this.passwordTokenSeenFlag=!0;continue}const jt=ve(Ft,he);this.passwordTokenSeenFlag?this.url.password+=jt:this.url.username+=jt}this.buffer=""}else if(isNaN(Ne)||Ne===47||Ne===63||Ne===35||De(this.url)&&Ne===92){if(this.atFlag&&this.buffer==="")return this.parseError=!0,ee;this.pointer-=te(this.buffer)+1,this.buffer="",this.state="host"}else this.buffer+=We;return!0},Kt.prototype["parse hostname"]=Kt.prototype["parse host"]=function(Ne,We){if(this.stateOverride&&this.url.scheme==="file")--this.pointer,this.state="file host";else if(Ne===58&&!this.arrFlag){if(this.buffer==="")return this.parseError=!0,ee;const Xe=Fe(this.buffer,De(this.url));if(Xe===ee)return ee;if(this.url.host=Xe,this.buffer="",this.state="port",this.stateOverride==="hostname")return!1}else if(isNaN(Ne)||Ne===47||Ne===63||Ne===35||De(this.url)&&Ne===92){if(--this.pointer,De(this.url)&&this.buffer==="")return this.parseError=!0,ee;if(this.stateOverride&&this.buffer===""&&(Dt(this.url)||this.url.port!==null))return this.parseError=!0,!1;const Xe=Fe(this.buffer,De(this.url));if(Xe===ee)return ee;if(this.url.host=Xe,this.buffer="",this.state="path start",this.stateOverride)return!1}else Ne===91?this.arrFlag=!0:Ne===93&&(this.arrFlag=!1),this.buffer+=We;return!0},Kt.prototype["parse port"]=function(Ne,We){if(ne(Ne))this.buffer+=We;else if(isNaN(Ne)||Ne===47||Ne===63||Ne===35||De(this.url)&&Ne===92||this.stateOverride){if(this.buffer!==""){const Xe=parseInt(this.buffer);if(Xe>Math.pow(2,16)-1)return this.parseError=!0,ee;this.url.port=Xe===Ce(this.url.scheme)?null:Xe,this.buffer=""}if(this.stateOverride)return!1;this.state="path start",--this.pointer}else return this.parseError=!0,ee;return!0};const Vt=new Set([47,92,63,35]);Kt.prototype["parse file"]=function(Ne){return this.url.scheme="file",Ne===47||Ne===92?(Ne===92&&(this.parseError=!0),this.state="file slash"):this.base!==null&&this.base.scheme==="file"?isNaN(Ne)?(this.url.host=this.base.host,this.url.path=this.base.path.slice(),this.url.query=this.base.query):Ne===63?(this.url.host=this.base.host,this.url.path=this.base.path.slice(),this.url.query="",this.state="query"):Ne===35?(this.url.host=this.base.host,this.url.path=this.base.path.slice(),this.url.query=this.base.query,this.url.fragment="",this.state="fragment"):(this.input.length-this.pointer-1===0||!ce(Ne,this.input[this.pointer+1])||this.input.length-this.pointer-1>=2&&!Vt.has(this.input[this.pointer+2])?(this.url.host=this.base.host,this.url.path=this.base.path.slice(),Oe(this.url)):this.parseError=!0,this.state="path",--this.pointer):(this.state="path",--this.pointer),!0},Kt.prototype["parse file slash"]=function(Ne){return Ne===47||Ne===92?(Ne===92&&(this.parseError=!0),this.state="file host"):(this.base!==null&&this.base.scheme==="file"&&(fe(this.base.path[0])?this.url.path.push(this.base.path[0]):this.url.host=this.base.host),this.state="path",--this.pointer),!0},Kt.prototype["parse file host"]=function(Ne,We){if(isNaN(Ne)||Ne===47||Ne===92||Ne===63||Ne===35)if(--this.pointer,!this.stateOverride&&de(this.buffer))this.parseError=!0,this.state="path";else if(this.buffer===""){if(this.url.host="",this.stateOverride)return!1;this.state="path start"}else{let Xe=Fe(this.buffer,De(this.url));if(Xe===ee)return ee;if(Xe==="localhost"&&(Xe=""),this.url.host=Xe,this.stateOverride)return!1;this.buffer="",this.state="path start"}else this.buffer+=We;return!0},Kt.prototype["parse path start"]=function(Ne){return De(this.url)?(Ne===92&&(this.parseError=!0),this.state="path",Ne!==47&&Ne!==92&&--this.pointer):!this.stateOverride&&Ne===63?(this.url.query="",this.state="query"):!this.stateOverride&&Ne===35?(this.url.fragment="",this.state="fragment"):Ne!==void 0&&(this.state="path",Ne!==47&&--this.pointer),!0},Kt.prototype["parse path"]=function(Ne){if(isNaN(Ne)||Ne===47||De(this.url)&&Ne===92||!this.stateOverride&&(Ne===63||Ne===35)){if(De(this.url)&&Ne===92&&(this.parseError=!0),le(this.buffer)?(Oe(this.url),Ne!==47&&!(De(this.url)&&Ne===92)&&this.url.path.push("")):ue(this.buffer)&&Ne!==47&&!(De(this.url)&&Ne===92)?this.url.path.push(""):ue(this.buffer)||(this.url.scheme==="file"&&this.url.path.length===0&&de(this.buffer)&&(this.url.host!==""&&this.url.host!==null&&(this.parseError=!0,this.url.host=""),this.buffer=this.buffer[0]+":"),this.url.path.push(this.buffer)),this.buffer="",this.url.scheme==="file"&&(Ne===void 0||Ne===63||Ne===35))for(;this.url.path.length>1&&this.url.path[0]==="";)this.parseError=!0,this.url.path.shift();Ne===63&&(this.url.query="",this.state="query"),Ne===35&&(this.url.fragment="",this.state="fragment")}else Ne===37&&(!se(this.input[this.pointer+1])||!se(this.input[this.pointer+2]))&&(this.parseError=!0),this.buffer+=ve(Ne,Te);return!0},Kt.prototype["parse cannot-be-a-base-URL path"]=function(Ne){return Ne===63?(this.url.query="",this.state="query"):Ne===35?(this.url.fragment="",this.state="fragment"):(!isNaN(Ne)&&Ne!==37&&(this.parseError=!0),Ne===37&&(!se(this.input[this.pointer+1])||!se(this.input[this.pointer+2]))&&(this.parseError=!0),isNaN(Ne)||(this.url.path[0]=this.url.path[0]+ve(Ne,Be))),!0},Kt.prototype["parse query"]=function(Ne,We){if(isNaN(Ne)||!this.stateOverride&&Ne===35){(!De(this.url)||this.url.scheme==="ws"||this.url.scheme==="wss")&&(this.encodingOverride="utf-8");const Xe=new Buffer(this.buffer);for(let Wt=0;Wt<Xe.length;++Wt)Xe[Wt]<33||Xe[Wt]>126||Xe[Wt]===34||Xe[Wt]===35||Xe[Wt]===60||Xe[Wt]===62?this.url.query+=we(Xe[Wt]):this.url.query+=String.fromCodePoint(Xe[Wt]);this.buffer="",Ne===35&&(this.url.fragment="",this.state="fragment")}else Ne===37&&(!se(this.input[this.pointer+1])||!se(this.input[this.pointer+2]))&&(this.parseError=!0),this.buffer+=We;return!0},Kt.prototype["parse fragment"]=function(Ne){return isNaN(Ne)||(Ne===0?this.parseError=!0:(Ne===37&&(!se(this.input[this.pointer+1])||!se(this.input[this.pointer+2]))&&(this.parseError=!0),this.url.fragment+=ve(Ne,Be))),!0};function Ht(Pe,Ne){let We=Pe.scheme+":";if(Pe.host!==null?(We+="//",(Pe.username!==""||Pe.password!=="")&&(We+=Pe.username,Pe.password!==""&&(We+=":"+Pe.password),We+="@"),We+=Ve(Pe.host),Pe.port!==null&&(We+=":"+Pe.port)):Pe.host===null&&Pe.scheme==="file"&&(We+="//"),Pe.cannotBeABaseURL)We+=Pe.path[0];else for(const Xe of Pe.path)We+="/"+Xe;return Pe.query!==null&&(We+="?"+Pe.query),!Ne&&Pe.fragment!==null&&(We+="#"+Pe.fragment),We}function $e(Pe){let Ne=Pe.scheme+"://";return Ne+=Ve(Pe.host),Pe.port!==null&&(Ne+=":"+Pe.port),Ne}n.exports.serializeURL=Ht,n.exports.serializeURLOrigin=function(Pe){switch(Pe.scheme){case"blob":try{return n.exports.serializeURLOrigin(n.exports.parseURL(Pe.path[0]))}catch{return"null"}case"ftp":case"gopher":case"http":case"https":case"ws":case"wss":return $e({scheme:Pe.scheme,host:Pe.host,port:Pe.port});case"file":return"file://";default:return"null"}},n.exports.basicURLParse=function(Pe,Ne){Ne===void 0&&(Ne={});const We=new Kt(Pe,Ne.baseURL,Ne.encodingOverride,Ne.url,Ne.stateOverride);return We.failure?"failure":We.url},n.exports.setTheUsername=function(Pe,Ne){Pe.username="";const We=t.ucs2.decode(Ne);for(let Xe=0;Xe<We.length;++Xe)Pe.username+=ve(We[Xe],he)},n.exports.setThePassword=function(Pe,Ne){Pe.password="";const We=t.ucs2.decode(Ne);for(let Xe=0;Xe<We.length;++Xe)Pe.password+=ve(We[Xe],he)},n.exports.serializeHost=Ve,n.exports.cannotHaveAUsernamePasswordPort=$t,n.exports.serializeInteger=function(Pe){return String(Pe)},n.exports.parseURL=function(Pe,Ne){return Ne===void 0&&(Ne={}),n.exports.basicURLParse(Pe,{baseURL:Ne.baseURL,encodingOverride:Ne.encodingOverride})}}(urlStateMachine)),urlStateMachine.exports}var hasRequiredURLImpl;function requireURLImpl(){if(hasRequiredURLImpl)return URLImpl;hasRequiredURLImpl=1;const n=requireUrlStateMachine();return URLImpl.implementation=class{constructor(u){const c=u[0],ee=u[1];let te=null;if(ee!==void 0&&(te=n.basicURLParse(ee),te==="failure"))throw new TypeError("Invalid base URL");const ae=n.basicURLParse(c,{baseURL:te});if(ae==="failure")throw new TypeError("Invalid URL");this._url=ae}get href(){return n.serializeURL(this._url)}set href(u){const c=n.basicURLParse(u);if(c==="failure")throw new TypeError("Invalid URL");this._url=c}get origin(){return n.serializeURLOrigin(this._url)}get protocol(){return this._url.scheme+":"}set protocol(u){n.basicURLParse(u+":",{url:this._url,stateOverride:"scheme start"})}get username(){return this._url.username}set username(u){n.cannotHaveAUsernamePasswordPort(this._url)||n.setTheUsername(this._url,u)}get password(){return this._url.password}set password(u){n.cannotHaveAUsernamePasswordPort(this._url)||n.setThePassword(this._url,u)}get host(){const u=this._url;return u.host===null?"":u.port===null?n.serializeHost(u.host):n.serializeHost(u.host)+":"+n.serializeInteger(u.port)}set host(u){this._url.cannotBeABaseURL||n.basicURLParse(u,{url:this._url,stateOverride:"host"})}get hostname(){return this._url.host===null?"":n.serializeHost(this._url.host)}set hostname(u){this._url.cannotBeABaseURL||n.basicURLParse(u,{url:this._url,stateOverride:"hostname"})}get port(){return this._url.port===null?"":n.serializeInteger(this._url.port)}set port(u){n.cannotHaveAUsernamePasswordPort(this._url)||(u===""?this._url.port=null:n.basicURLParse(u,{url:this._url,stateOverride:"port"}))}get pathname(){return this._url.cannotBeABaseURL?this._url.path[0]:this._url.path.length===0?"":"/"+this._url.path.join("/")}set pathname(u){this._url.cannotBeABaseURL||(this._url.path=[],n.basicURLParse(u,{url:this._url,stateOverride:"path start"}))}get search(){return this._url.query===null||this._url.query===""?"":"?"+this._url.query}set search(u){const c=this._url;if(u===""){c.query=null;return}const ee=u[0]==="?"?u.substring(1):u;c.query="",n.basicURLParse(ee,{url:c,stateOverride:"query"})}get hash(){return this._url.fragment===null||this._url.fragment===""?"":"#"+this._url.fragment}set hash(u){if(u===""){this._url.fragment=null;return}const c=u[0]==="#"?u.substring(1):u;this._url.fragment="",n.basicURLParse(c,{url:this._url,stateOverride:"fragment"})}toJSON(){return this.href}},URLImpl}var hasRequiredURL;function requireURL(){return hasRequiredURL||(hasRequiredURL=1,function(n){const t=requireLib(),u=requireUtils$2(),c=requireURLImpl(),ee=u.implSymbol;function te(ae){if(!this||this[ee]||!(this instanceof te))throw new TypeError("Failed to construct 'URL': Please use the 'new' operator, this DOM object constructor cannot be called as a function.");if(arguments.length<1)throw new TypeError("Failed to construct 'URL': 1 argument required, but only "+arguments.length+" present.");const ne=[];for(let oe=0;oe<arguments.length&&oe<2;++oe)ne[oe]=arguments[oe];ne[0]=t.USVString(ne[0]),ne[1]!==void 0&&(ne[1]=t.USVString(ne[1])),n.exports.setup(this,ne)}te.prototype.toJSON=function(){if(!this||!n.exports.is(this))throw new TypeError("Illegal invocation");const ne=[];for(let oe=0;oe<arguments.length&&oe<0;++oe)ne[oe]=arguments[oe];return this[ee].toJSON.apply(this[ee],ne)},Object.defineProperty(te.prototype,"href",{get(){return this[ee].href},set(ae){ae=t.USVString(ae),this[ee].href=ae},enumerable:!0,configurable:!0}),te.prototype.toString=function(){if(!this||!n.exports.is(this))throw new TypeError("Illegal invocation");return this.href},Object.defineProperty(te.prototype,"origin",{get(){return this[ee].origin},enumerable:!0,configurable:!0}),Object.defineProperty(te.prototype,"protocol",{get(){return this[ee].protocol},set(ae){ae=t.USVString(ae),this[ee].protocol=ae},enumerable:!0,configurable:!0}),Object.defineProperty(te.prototype,"username",{get(){return this[ee].username},set(ae){ae=t.USVString(ae),this[ee].username=ae},enumerable:!0,configurable:!0}),Object.defineProperty(te.prototype,"password",{get(){return this[ee].password},set(ae){ae=t.USVString(ae),this[ee].password=ae},enumerable:!0,configurable:!0}),Object.defineProperty(te.prototype,"host",{get(){return this[ee].host},set(ae){ae=t.USVString(ae),this[ee].host=ae},enumerable:!0,configurable:!0}),Object.defineProperty(te.prototype,"hostname",{get(){return this[ee].hostname},set(ae){ae=t.USVString(ae),this[ee].hostname=ae},enumerable:!0,configurable:!0}),Object.defineProperty(te.prototype,"port",{get(){return this[ee].port},set(ae){ae=t.USVString(ae),this[ee].port=ae},enumerable:!0,configurable:!0}),Object.defineProperty(te.prototype,"pathname",{get(){return this[ee].pathname},set(ae){ae=t.USVString(ae),this[ee].pathname=ae},enumerable:!0,configurable:!0}),Object.defineProperty(te.prototype,"search",{get(){return this[ee].search},set(ae){ae=t.USVString(ae),this[ee].search=ae},enumerable:!0,configurable:!0}),Object.defineProperty(te.prototype,"hash",{get(){return this[ee].hash},set(ae){ae=t.USVString(ae),this[ee].hash=ae},enumerable:!0,configurable:!0}),n.exports={is(ae){return!!ae&&ae[ee]instanceof c.implementation},create(ae,ne){let oe=Object.create(te.prototype);return this.setup(oe,ae,ne),oe},setup(ae,ne,oe){oe||(oe={}),oe.wrapper=ae,ae[ee]=new c.implementation(ne,oe),ae[ee][u.wrapperSymbol]=ae},interface:te,expose:{Window:{URL:te},Worker:{URL:te}}}}(URL$2)),URL$2.exports}var hasRequiredPublicApi;function requirePublicApi(){return hasRequiredPublicApi||(hasRequiredPublicApi=1,publicApi.URL=requireURL().interface,publicApi.serializeURL=requireUrlStateMachine().serializeURL,publicApi.serializeURLOrigin=requireUrlStateMachine().serializeURLOrigin,publicApi.basicURLParse=requireUrlStateMachine().basicURLParse,publicApi.setTheUsername=requireUrlStateMachine().setTheUsername,publicApi.setThePassword=requireUrlStateMachine().setThePassword,publicApi.serializeHost=requireUrlStateMachine().serializeHost,publicApi.serializeInteger=requireUrlStateMachine().serializeInteger,publicApi.parseURL=requireUrlStateMachine().parseURL),publicApi}var publicApiExports=requirePublicApi();const whatwgUrl=getDefaultExportFromCjs(publicApiExports);var httpsBrowserifyExports=requireHttpsBrowserify();const https=getDefaultExportFromCjs(httpsBrowserifyExports),Readable=Stream.Readable,BUFFER=Symbol("buffer"),TYPE=Symbol("type");let Blob$1=class Hi{constructor(){this[TYPE]="";const t=arguments[0],u=arguments[1],c=[];let ee=0;if(t){const ae=t,ne=Number(ae.length);for(let oe=0;oe<ne;oe++){const ie=ae[oe];let se;ie instanceof Buffer?se=ie:ArrayBuffer.isView(ie)?se=Buffer.from(ie.buffer,ie.byteOffset,ie.byteLength):ie instanceof ArrayBuffer?se=Buffer.from(ie):ie instanceof Hi?se=ie[BUFFER]:se=Buffer.from(typeof ie=="string"?ie:String(ie)),ee+=se.length,c.push(se)}}this[BUFFER]=Buffer.concat(c);let te=u&&u.type!==void 0&&String(u.type).toLowerCase();te&&!/[^\u0020-\u007E]/.test(te)&&(this[TYPE]=te)}get size(){return this[BUFFER].length}get type(){return this[TYPE]}text(){return Promise.resolve(this[BUFFER].toString())}arrayBuffer(){const t=this[BUFFER],u=t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength);return Promise.resolve(u)}stream(){const t=new Readable;return t._read=function(){},t.push(this[BUFFER]),t.push(null),t}toString(){return"[object Blob]"}slice(){const t=this.size,u=arguments[0],c=arguments[1];let ee,te;u===void 0?ee=0:u<0?ee=Math.max(t+u,0):ee=Math.min(u,t),c===void 0?te=t:c<0?te=Math.max(t+c,0):te=Math.min(c,t);const ae=Math.max(te-ee,0),oe=this[BUFFER].slice(ee,ee+ae),ie=new Hi([],{type:arguments[2]});return ie[BUFFER]=oe,ie}};Object.defineProperties(Blob$1.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});Object.defineProperty(Blob$1.prototype,Symbol.toStringTag,{value:"Blob",writable:!1,enumerable:!1,configurable:!0});function FetchError(n,t,u){Error.call(this,n),this.message=n,this.type=t,u&&(this.code=this.errno=u.code),Error.captureStackTrace(this,this.constructor)}FetchError.prototype=Object.create(Error.prototype);FetchError.prototype.constructor=FetchError;FetchError.prototype.name="FetchError";let convert;try{convert=require("encoding").convert}catch(n){}const INTERNALS=Symbol("Body internals"),PassThrough=Stream.PassThrough;function Body(n){var t=this,u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=u.size;let ee=c===void 0?0:c;var te=u.timeout;let ae=te===void 0?0:te;n==null?n=null:isURLSearchParams(n)?n=Buffer.from(n.toString()):isBlob(n)||Buffer.isBuffer(n)||(Object.prototype.toString.call(n)==="[object ArrayBuffer]"?n=Buffer.from(n):ArrayBuffer.isView(n)?n=Buffer.from(n.buffer,n.byteOffset,n.byteLength):n instanceof Stream||(n=Buffer.from(String(n)))),this[INTERNALS]={body:n,disturbed:!1,error:null},this.size=ee,this.timeout=ae,n instanceof Stream&&n.on("error",function(ne){const oe=ne.name==="AbortError"?ne:new FetchError(`Invalid response body while trying to fetch ${t.url}: ${ne.message}`,"system",ne);t[INTERNALS].error=oe})}Body.prototype={get body(){return this[INTERNALS].body},get bodyUsed(){return this[INTERNALS].disturbed},arrayBuffer(){return consumeBody.call(this).then(function(n){return n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength)})},blob(){let n=this.headers&&this.headers.get("content-type")||"";return consumeBody.call(this).then(function(t){return Object.assign(new Blob$1([],{type:n.toLowerCase()}),{[BUFFER]:t})})},json(){var n=this;return consumeBody.call(this).then(function(t){try{return JSON.parse(t.toString())}catch(u){return Body.Promise.reject(new FetchError(`invalid json response body at ${n.url} reason: ${u.message}`,"invalid-json"))}})},text(){return consumeBody.call(this).then(function(n){return n.toString()})},buffer(){return consumeBody.call(this)},textConverted(){var n=this;return consumeBody.call(this).then(function(t){return convertBody(t,n.headers)})}};Object.defineProperties(Body.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}});Body.mixIn=function(n){for(const t of Object.getOwnPropertyNames(Body.prototype))if(!(t in n)){const u=Object.getOwnPropertyDescriptor(Body.prototype,t);Object.defineProperty(n,t,u)}};function consumeBody(){var n=this;if(this[INTERNALS].disturbed)return Body.Promise.reject(new TypeError(`body used already for: ${this.url}`));if(this[INTERNALS].disturbed=!0,this[INTERNALS].error)return Body.Promise.reject(this[INTERNALS].error);let t=this.body;if(t===null)return Body.Promise.resolve(Buffer.alloc(0));if(isBlob(t)&&(t=t.stream()),Buffer.isBuffer(t))return Body.Promise.resolve(t);if(!(t instanceof Stream))return Body.Promise.resolve(Buffer.alloc(0));let u=[],c=0,ee=!1;return new Body.Promise(function(te,ae){let ne;n.timeout&&(ne=setTimeout(function(){ee=!0,ae(new FetchError(`Response timeout while trying to fetch ${n.url} (over ${n.timeout}ms)`,"body-timeout"))},n.timeout)),t.on("error",function(oe){oe.name==="AbortError"?(ee=!0,ae(oe)):ae(new FetchError(`Invalid response body while trying to fetch ${n.url}: ${oe.message}`,"system",oe))}),t.on("data",function(oe){if(!(ee||oe===null)){if(n.size&&c+oe.length>n.size){ee=!0,ae(new FetchError(`content size at ${n.url} over limit: ${n.size}`,"max-size"));return}c+=oe.length,u.push(oe)}}),t.on("end",function(){if(!ee){clearTimeout(ne);try{te(Buffer.concat(u,c))}catch(oe){ae(new FetchError(`Could not create Buffer from response body for ${n.url}: ${oe.message}`,"system",oe))}}})})}function convertBody(n,t){if(typeof convert!="function")throw new Error("The package `encoding` must be installed to use the textConverted() function");const u=t.get("content-type");let c="utf-8",ee,te;return u&&(ee=/charset=([^;]*)/i.exec(u)),te=n.slice(0,1024).toString(),!ee&&te&&(ee=/<meta.+?charset=(['"])(.+?)\1/i.exec(te)),!ee&&te&&(ee=/<meta[\s]+?http-equiv=(['"])content-type\1[\s]+?content=(['"])(.+?)\2/i.exec(te),ee||(ee=/<meta[\s]+?content=(['"])(.+?)\1[\s]+?http-equiv=(['"])content-type\3/i.exec(te),ee&&ee.pop()),ee&&(ee=/charset=(.*)/i.exec(ee.pop()))),!ee&&te&&(ee=/<\?xml.+?encoding=(['"])(.+?)\1/i.exec(te)),ee&&(c=ee.pop(),(c==="gb2312"||c==="gbk")&&(c="gb18030")),convert(n,"UTF-8",c).toString()}function isURLSearchParams(n){return typeof n!="object"||typeof n.append!="function"||typeof n.delete!="function"||typeof n.get!="function"||typeof n.getAll!="function"||typeof n.has!="function"||typeof n.set!="function"?!1:n.constructor.name==="URLSearchParams"||Object.prototype.toString.call(n)==="[object URLSearchParams]"||typeof n.sort=="function"}function isBlob(n){return typeof n=="object"&&typeof n.arrayBuffer=="function"&&typeof n.type=="string"&&typeof n.stream=="function"&&typeof n.constructor=="function"&&typeof n.constructor.name=="string"&&/^(Blob|File)$/.test(n.constructor.name)&&/^(Blob|File)$/.test(n[Symbol.toStringTag])}function clone(n){let t,u,c=n.body;if(n.bodyUsed)throw new Error("cannot clone body after it is used");return c instanceof Stream&&typeof c.getBoundary!="function"&&(t=new PassThrough,u=new PassThrough,c.pipe(t),c.pipe(u),n[INTERNALS].body=t,c=u),c}function extractContentType(n){return n===null?null:typeof n=="string"?"text/plain;charset=UTF-8":isURLSearchParams(n)?"application/x-www-form-urlencoded;charset=UTF-8":isBlob(n)?n.type||null:Buffer.isBuffer(n)||Object.prototype.toString.call(n)==="[object ArrayBuffer]"||ArrayBuffer.isView(n)?null:typeof n.getBoundary=="function"?`multipart/form-data;boundary=${n.getBoundary()}`:n instanceof Stream?null:"text/plain;charset=UTF-8"}function getTotalBytes(n){const t=n.body;return t===null?0:isBlob(t)?t.size:Buffer.isBuffer(t)?t.length:t&&typeof t.getLengthSync=="function"&&(t._lengthRetrievers&&t._lengthRetrievers.length==0||t.hasKnownLength&&t.hasKnownLength())?t.getLengthSync():null}function writeToStream(n,t){const u=t.body;u===null?n.end():isBlob(u)?u.stream().pipe(n):Buffer.isBuffer(u)?(n.write(u),n.end()):u.pipe(n)}Body.Promise=global.Promise;const invalidTokenRegex=/[^\^_`a-zA-Z\-0-9!#$%&'*+.|~]/,invalidHeaderCharRegex=/[^\t\x20-\x7e\x80-\xff]/;function validateName(n){if(n=`${n}`,invalidTokenRegex.test(n)||n==="")throw new TypeError(`${n} is not a legal HTTP header name`)}function validateValue(n){if(n=`${n}`,invalidHeaderCharRegex.test(n))throw new TypeError(`${n} is not a legal HTTP header value`)}function find(n,t){t=t.toLowerCase();for(const u in n)if(u.toLowerCase()===t)return u}const MAP=Symbol("map");class Headers{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;if(this[MAP]=Object.create(null),t instanceof Headers){const u=t.raw(),c=Object.keys(u);for(const ee of c)for(const te of u[ee])this.append(ee,te);return}if(t!=null)if(typeof t=="object"){const u=t[Symbol.iterator];if(u!=null){if(typeof u!="function")throw new TypeError("Header pairs must be iterable");const c=[];for(const ee of t){if(typeof ee!="object"||typeof ee[Symbol.iterator]!="function")throw new TypeError("Each header pair must be iterable");c.push(Array.from(ee))}for(const ee of c){if(ee.length!==2)throw new TypeError("Each header pair must be a name/value tuple");this.append(ee[0],ee[1])}}else for(const c of Object.keys(t)){const ee=t[c];this.append(c,ee)}}else throw new TypeError("Provided initializer must be an object")}get(t){t=`${t}`,validateName(t);const u=find(this[MAP],t);return u===void 0?null:this[MAP][u].join(", ")}forEach(t){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,c=getHeaders(this),ee=0;for(;ee<c.length;){var te=c[ee];const ae=te[0],ne=te[1];t.call(u,ne,ae,this),c=getHeaders(this),ee++}}set(t,u){t=`${t}`,u=`${u}`,validateName(t),validateValue(u);const c=find(this[MAP],t);this[MAP][c!==void 0?c:t]=[u]}append(t,u){t=`${t}`,u=`${u}`,validateName(t),validateValue(u);const c=find(this[MAP],t);c!==void 0?this[MAP][c].push(u):this[MAP][t]=[u]}has(t){return t=`${t}`,validateName(t),find(this[MAP],t)!==void 0}delete(t){t=`${t}`,validateName(t);const u=find(this[MAP],t);u!==void 0&&delete this[MAP][u]}raw(){return this[MAP]}keys(){return createHeadersIterator(this,"key")}values(){return createHeadersIterator(this,"value")}[Symbol.iterator](){return createHeadersIterator(this,"key+value")}}Headers.prototype.entries=Headers.prototype[Symbol.iterator];Object.defineProperty(Headers.prototype,Symbol.toStringTag,{value:"Headers",writable:!1,enumerable:!1,configurable:!0});Object.defineProperties(Headers.prototype,{get:{enumerable:!0},forEach:{enumerable:!0},set:{enumerable:!0},append:{enumerable:!0},has:{enumerable:!0},delete:{enumerable:!0},keys:{enumerable:!0},values:{enumerable:!0},entries:{enumerable:!0}});function getHeaders(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"key+value";return Object.keys(n[MAP]).sort().map(t==="key"?function(c){return c.toLowerCase()}:t==="value"?function(c){return n[MAP][c].join(", ")}:function(c){return[c.toLowerCase(),n[MAP][c].join(", ")]})}const INTERNAL=Symbol("internal");function createHeadersIterator(n,t){const u=Object.create(HeadersIteratorPrototype);return u[INTERNAL]={target:n,kind:t,index:0},u}const HeadersIteratorPrototype=Object.setPrototypeOf({next(){if(!this||Object.getPrototypeOf(this)!==HeadersIteratorPrototype)throw new TypeError("Value of `this` is not a HeadersIterator");var n=this[INTERNAL];const t=n.target,u=n.kind,c=n.index,ee=getHeaders(t,u),te=ee.length;return c>=te?{value:void 0,done:!0}:(this[INTERNAL].index=c+1,{value:ee[c],done:!1})}},Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));Object.defineProperty(HeadersIteratorPrototype,Symbol.toStringTag,{value:"HeadersIterator",writable:!1,enumerable:!1,configurable:!0});function exportNodeCompatibleHeaders(n){const t=Object.assign({__proto__:null},n[MAP]),u=find(n[MAP],"Host");return u!==void 0&&(t[u]=t[u][0]),t}function createHeadersLenient(n){const t=new Headers;for(const u of Object.keys(n))if(!invalidTokenRegex.test(u))if(Array.isArray(n[u]))for(const c of n[u])invalidHeaderCharRegex.test(c)||(t[MAP][u]===void 0?t[MAP][u]=[c]:t[MAP][u].push(c));else invalidHeaderCharRegex.test(n[u])||(t[MAP][u]=[n[u]]);return t}const INTERNALS$1=Symbol("Response internals"),STATUS_CODES=http.STATUS_CODES;class Response{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Body.call(this,t,u);const c=u.status||200,ee=new Headers(u.headers);if(t!=null&&!ee.has("Content-Type")){const te=extractContentType(t);te&&ee.append("Content-Type",te)}this[INTERNALS$1]={url:u.url,status:c,statusText:u.statusText||STATUS_CODES[c],headers:ee,counter:u.counter}}get url(){return this[INTERNALS$1].url||""}get status(){return this[INTERNALS$1].status}get ok(){return this[INTERNALS$1].status>=200&&this[INTERNALS$1].status<300}get redirected(){return this[INTERNALS$1].counter>0}get statusText(){return this[INTERNALS$1].statusText}get headers(){return this[INTERNALS$1].headers}clone(){return new Response(clone(this),{url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected})}}Body.mixIn(Response.prototype);Object.defineProperties(Response.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});Object.defineProperty(Response.prototype,Symbol.toStringTag,{value:"Response",writable:!1,enumerable:!1,configurable:!0});const INTERNALS$2=Symbol("Request internals"),URL$1=api.URL||whatwgUrl.URL,parse_url=api.parse,format_url=api.format;function parseURL(n){return/^[a-zA-Z][a-zA-Z\d+\-.]*:/.exec(n)&&(n=new URL$1(n).toString()),parse_url(n)}const streamDestructionSupported="destroy"in Stream.Readable.prototype;function isRequest(n){return typeof n=="object"&&typeof n[INTERNALS$2]=="object"}function isAbortSignal(n){const t=n&&typeof n=="object"&&Object.getPrototypeOf(n);return!!(t&&t.constructor.name==="AbortSignal")}class Request{constructor(t){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c;isRequest(t)?c=parseURL(t.url):(t&&t.href?c=parseURL(t.href):c=parseURL(`${t}`),t={});let ee=u.method||t.method||"GET";if(ee=ee.toUpperCase(),(u.body!=null||isRequest(t)&&t.body!==null)&&(ee==="GET"||ee==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");let te=u.body!=null?u.body:isRequest(t)&&t.body!==null?clone(t):null;Body.call(this,te,{timeout:u.timeout||t.timeout||0,size:u.size||t.size||0});const ae=new Headers(u.headers||t.headers||{});if(te!=null&&!ae.has("Content-Type")){const oe=extractContentType(te);oe&&ae.append("Content-Type",oe)}let ne=isRequest(t)?t.signal:null;if("signal"in u&&(ne=u.signal),ne!=null&&!isAbortSignal(ne))throw new TypeError("Expected signal to be an instanceof AbortSignal");this[INTERNALS$2]={method:ee,redirect:u.redirect||t.redirect||"follow",headers:ae,parsedURL:c,signal:ne},this.follow=u.follow!==void 0?u.follow:t.follow!==void 0?t.follow:20,this.compress=u.compress!==void 0?u.compress:t.compress!==void 0?t.compress:!0,this.counter=u.counter||t.counter||0,this.agent=u.agent||t.agent}get method(){return this[INTERNALS$2].method}get url(){return format_url(this[INTERNALS$2].parsedURL)}get headers(){return this[INTERNALS$2].headers}get redirect(){return this[INTERNALS$2].redirect}get signal(){return this[INTERNALS$2].signal}clone(){return new Request(this)}}Body.mixIn(Request.prototype);Object.defineProperty(Request.prototype,Symbol.toStringTag,{value:"Request",writable:!1,enumerable:!1,configurable:!0});Object.defineProperties(Request.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0}});function getNodeRequestOptions(n){const t=n[INTERNALS$2].parsedURL,u=new Headers(n[INTERNALS$2].headers);if(u.has("Accept")||u.set("Accept","*/*"),!t.protocol||!t.hostname)throw new TypeError("Only absolute URLs are supported");if(!/^https?:$/.test(t.protocol))throw new TypeError("Only HTTP(S) protocols are supported");if(n.signal&&n.body instanceof Stream.Readable&&!streamDestructionSupported)throw new Error("Cancellation of streamed requests with AbortSignal is not supported in node < 8");let c=null;if(n.body==null&&/^(POST|PUT)$/i.test(n.method)&&(c="0"),n.body!=null){const te=getTotalBytes(n);typeof te=="number"&&(c=String(te))}c&&u.set("Content-Length",c),u.has("User-Agent")||u.set("User-Agent","node-fetch/1.0 (+https://github.com/bitinn/node-fetch)"),n.compress&&!u.has("Accept-Encoding")&&u.set("Accept-Encoding","gzip,deflate");let ee=n.agent;return typeof ee=="function"&&(ee=ee(t)),Object.assign({},t,{method:n.method,headers:exportNodeCompatibleHeaders(u),agent:ee})}function AbortError(n){Error.call(this,n),this.type="aborted",this.message=n,Error.captureStackTrace(this,this.constructor)}AbortError.prototype=Object.create(Error.prototype);AbortError.prototype.constructor=AbortError;AbortError.prototype.name="AbortError";const URL$1$1=api.URL||whatwgUrl.URL,PassThrough$1=Stream.PassThrough,isDomainOrSubdomain=function n(t,u){const c=new URL$1$1(u).hostname,ee=new URL$1$1(t).hostname;return c===ee||c[c.length-ee.length-1]==="."&&c.endsWith(ee)},isSameProtocol=function n(t,u){const c=new URL$1$1(u).protocol,ee=new URL$1$1(t).protocol;return c===ee};function fetch$1(n,t){if(!fetch$1.Promise)throw new Error("native promise missing, set fetch.Promise to your favorite alternative");return Body.Promise=fetch$1.Promise,new fetch$1.Promise(function(u,c){const ee=new Request(n,t),te=getNodeRequestOptions(ee),ae=(te.protocol==="https:"?https:http).request,ne=ee.signal;let oe=null;const ie=function(){let fe=new AbortError("The user aborted a request.");c(fe),ee.body&&ee.body instanceof Stream.Readable&&destroyStream(ee.body,fe),!(!oe||!oe.body)&&oe.body.emit("error",fe)};if(ne&&ne.aborted){ie();return}const se=function(){ie(),ce()},ue=ae(te);let le;ne&&ne.addEventListener("abort",se);function ce(){ue.abort(),ne&&ne.removeEventListener("abort",se),clearTimeout(le)}ee.timeout&&ue.once("socket",function(de){le=setTimeout(function(){c(new FetchError(`network timeout at: ${ee.url}`,"request-timeout")),ce()},ee.timeout)}),ue.on("error",function(de){c(new FetchError(`request to ${ee.url} failed, reason: ${de.message}`,"system",de)),oe&&oe.body&&destroyStream(oe.body,de),ce()}),fixResponseChunkedTransferBadEnding(ue,function(de){ne&&ne.aborted||oe&&oe.body&&destroyStream(oe.body,de)}),parseInt(process$1.version.substring(1))<14&&ue.on("socket",function(de){de.addListener("close",function(fe){const pe=de.listenerCount("data")>0;if(oe&&pe&&!fe&&!(ne&&ne.aborted)){const me=new Error("Premature close");me.code="ERR_STREAM_PREMATURE_CLOSE",oe.body.emit("error",me)}})}),ue.on("response",function(de){clearTimeout(le);const fe=createHeadersLenient(de.headers);if(fetch$1.isRedirect(de.statusCode)){const Ce=fe.get("Location");let we=null;try{we=Ce===null?null:new URL$1$1(Ce,ee.url).toString()}catch{if(ee.redirect!=="manual"){c(new FetchError(`uri requested responds with an invalid redirect URL: ${Ce}`,"invalid-redirect")),ce();return}}switch(ee.redirect){case"error":c(new FetchError(`uri requested responds with a redirect, redirect mode is set to error: ${ee.url}`,"no-redirect")),ce();return;case"manual":if(we!==null)try{fe.set("Location",we)}catch(Re){c(Re)}break;case"follow":if(we===null)break;if(ee.counter>=ee.follow){c(new FetchError(`maximum redirect reached at: ${ee.url}`,"max-redirect")),ce();return}const xe={headers:new Headers(ee.headers),follow:ee.follow,counter:ee.counter+1,agent:ee.agent,compress:ee.compress,method:ee.method,body:ee.body,signal:ee.signal,timeout:ee.timeout,size:ee.size};if(!isDomainOrSubdomain(ee.url,we)||!isSameProtocol(ee.url,we))for(const Re of["authorization","www-authenticate","cookie","cookie2"])xe.headers.delete(Re);if(de.statusCode!==303&&ee.body&&getTotalBytes(ee)===null){c(new FetchError("Cannot follow redirect with body being a readable stream","unsupported-redirect")),ce();return}(de.statusCode===303||(de.statusCode===301||de.statusCode===302)&&ee.method==="POST")&&(xe.method="GET",xe.body=void 0,xe.headers.delete("content-length")),u(fetch$1(new Request(we,xe))),ce();return}}de.once("end",function(){ne&&ne.removeEventListener("abort",se)});let pe=de.pipe(new PassThrough$1);const me={url:ee.url,status:de.statusCode,statusText:de.statusMessage,headers:fe,size:ee.size,timeout:ee.timeout,counter:ee.counter},ge=fe.get("Content-Encoding");if(!ee.compress||ee.method==="HEAD"||ge===null||de.statusCode===204||de.statusCode===304){oe=new Response(pe,me),u(oe);return}const De={flush:zlib.Z_SYNC_FLUSH,finishFlush:zlib.Z_SYNC_FLUSH};if(ge=="gzip"||ge=="x-gzip"){pe=pe.pipe(zlib.createGunzip(De)),oe=new Response(pe,me),u(oe);return}if(ge=="deflate"||ge=="x-deflate"){const Ce=de.pipe(new PassThrough$1);Ce.once("data",function(we){(we[0]&15)===8?pe=pe.pipe(zlib.createInflate()):pe=pe.pipe(zlib.createInflateRaw()),oe=new Response(pe,me),u(oe)}),Ce.on("end",function(){oe||(oe=new Response(pe,me),u(oe))});return}if(ge=="br"&&typeof zlib.createBrotliDecompress=="function"){pe=pe.pipe(zlib.createBrotliDecompress()),oe=new Response(pe,me),u(oe);return}oe=new Response(pe,me),u(oe)}),writeToStream(ue,ee)})}function fixResponseChunkedTransferBadEnding(n,t){let u;n.on("socket",function(c){u=c}),n.on("response",function(c){const ee=c.headers;ee["transfer-encoding"]==="chunked"&&!ee["content-length"]&&c.once("close",function(te){if(u&&u.listenerCount("data")>0&&!te){const ne=new Error("Premature close");ne.code="ERR_STREAM_PREMATURE_CLOSE",t(ne)}})})}function destroyStream(n,t){n.destroy?n.destroy(t):(n.emit("error",t),n.end())}fetch$1.isRedirect=function(n){return n===301||n===302||n===303||n===307||n===308};fetch$1.Promise=global.Promise;function createFetchHttp(){return{send:async n=>{var ie,se;const t=n.headers?Object.entries(n.headers).reduce((ue,[le,ce])=>({...ue,[le.toLowerCase()]:(Array.isArray(ce)?ce.join(", "):ce).toLowerCase()}),{}):{},u=((ie=t["content-type"])==null?void 0:ie.includes("application/json"))??!1;let c;u&&n.data?c=JSON.stringify(n.data):c=n.data;const ee={method:n.method,body:c,headers:t,follow:n.maxRedirects,signal:n.signal,timeout:n.timeout},te=await fetch$1(n.url,ee),ae=((se=te.headers.get("content-type"))==null?void 0:se.includes("application/json"))??!1,ne=await te.text();return{data:(ae?JSON.parse(ne):void 0)??ne,body:ne,ok:te.ok,status:te.status,statusText:te.statusText,headers:Object.fromEntries(te.headers.entries())}}}}const fetchHttp=()=>({install(n){n.http=createFetchHttp()}});class ProgramNotRecognizedError extends SdkError$1{constructor(u,c){const ee=!isPublicKey(u),te=u,ae=c==="*"?"any":`the [${c}]`,ne=`The provided program ${ee?"name":"address"} [${te}] is not recognized in ${ae} cluster. Did you forget to register this program? If so, you may use "context.programs.add(myProgram)" to fix this.`;super(ne);Ca(this,"name","ProgramNotRecognizedError");this.identifier=u,this.cluster=c}}class ProgramErrorNotRecognizedError extends ProgramError$1{constructor(u,c){const ee=c.code?` of code [${c.code}]`:"",te=`The program [${u.name}] at address [${u.publicKey}] raised an error${ee} that is not recognized by the programs registered on the SDK. Please check the underlying program error below for more details.`;super(te,u,c);Ca(this,"name","ProgramErrorNotRecognizedError")}}function createDefaultProgramRepository(n,t=[],u={}){const c=[...t],ee={...u},te=(pe,me="current")=>{const ge=oe(me),De=fe(pe);return isPublicKey(De)?ge.some(Ce=>Ce.publicKey===De):ge.some(Ce=>Ce.name===De)},ae=(pe,me="current")=>{const ge=de(me),De=oe(me),Ce=fe(pe),we=isPublicKey(Ce)?De.find(xe=>xe.publicKey===Ce):De.find(xe=>xe.name===Ce);if(!we)throw new ProgramNotRecognizedError(Ce,ge);return we},ne=(pe,me,ge)=>{try{return ae(pe,ge).publicKey}catch(De){if(me===void 0)throw De;return publicKey$2(me)}},oe=(pe="current")=>{const me=de(pe);return me==="*"?c:c.filter(ge=>ge.isOnCluster(me))},ie=(pe,me=!0)=>{!me&&te(pe.publicKey,"*")||c.unshift(pe)},se=(pe,me)=>{ee[pe]=me,fe(pe)},ue=pe=>{delete ee[pe]},le=()=>createDefaultProgramRepository(n,c,ee),ce=(pe,me)=>{var ve,ye,be,_e;if(!Array.isArray(pe.logs)||pe.logs.length===0)return null;const ge=pe.logs.join(`
`),De=/Error processing Instruction (\d+):/,Ce=((ve=pe.message.match(De))==null?void 0:ve[1])??null,we=/Custom program error: (0x[a-f0-9]+)/i,xe=((ye=ge.match(we))==null?void 0:ye[1])??null,Re=xe?parseInt(xe,16):null;if(Ce===null||Re===null)return null;const Be=parseInt(Ce,10),Se=((_e=(be=me.message.instructions)==null?void 0:be[Be])==null?void 0:_e.programIndex)??null,Te=Se?me.message.accounts[Se]:null;if(!Te)return null;let Ae;try{Ae=ae(Te)}catch{return null}return Ae.getErrorFromCode(Re,pe)??new ProgramErrorNotRecognizedError(Ae,pe)},de=pe=>pe==="current"?n.rpc.getCluster():pe,fe=(pe,me=[])=>{if(isPublicKey(pe)||ee[pe]===void 0)return pe;const ge=[...me,pe];if(me.includes(pe))throw new Error(`Circular binding detected: ${ge.join(" -> ")}`);return fe(ee[pe],ge)};return{has:te,get:ae,getPublicKey:ne,all:oe,add:ie,bind:se,unbind:ue,clone:le,resolveError:ce}}const defaultProgramRepository=()=>({install(n){n.programs=createDefaultProgramRepository(n)}});function createWeb3JsRpc(n,t,u){let c=null;const ee=()=>c||(typeof t=="string"?c=new Connection(t,u):c=t,c),te=resolveClusterFromEndpoint(ee().rpcEndpoint),ae=async(xe,Re={})=>{const Be=await ee().getAccountInfo(toWeb3JsPublicKey(xe),Re);return parseMaybeAccount(Be,xe)},ne=async(xe,Re={})=>(await ee().getMultipleAccountsInfo(xe.map(toWeb3JsPublicKey),Re)).map((Se,Te)=>parseMaybeAccount(Se,xe[Te])),oe=async(xe,Re={})=>{var Se;return(await ee().getProgramAccounts(toWeb3JsPublicKey(xe),{...Re,filters:(Se=Re.filters)==null?void 0:Se.map(Te=>parseDataFilter(Te))})).map(({pubkey:Te,account:Ae})=>parseAccount(Ae,fromWeb3JsPublicKey(Te)))},ie=async(xe,Re={})=>{const Be=await ee().getBlockTime(xe);return Be?dateTime(Be):null},se=async(xe,Re={})=>{const Be=await ee().getBalance(toWeb3JsPublicKey(xe),Re);return lamports(Be)},ue=async()=>await ee().getGenesisHash(),le=async(xe,Re={})=>{const Be=Se=>ee().getMinimumBalanceForRentExemption(Se,Re.commitment);if(Re.includesHeaderBytes??!1){const Se=await Be(0),Te=BigInt(Se)/BigInt(ACCOUNT_HEADER_SIZE);return lamports(Te*BigInt(xe))}return lamports(await Be(xe))},ce=async(xe={})=>ee().getLatestBlockhash(xe),de=async(xe,Re={})=>{var ye,be,_e;const Be=await ee().getTransaction(base58$2.deserialize(xe)[0],{commitment:Re.commitment,maxSupportedTransactionVersion:0});if(!Be)return null;if(!Be.meta)throw new Error("Transaction meta is missing.");const{transaction:Se,meta:Te}=Be,Ae=fromWeb3JsMessage(Se.message),he=Me=>fromWeb3JsPublicKey(new PublicKey(Me)),ve=Me=>({accountIndex:Me.accountIndex,amount:createAmount(Me.uiTokenAmount.amount,"splToken",Me.uiTokenAmount.decimals),mint:he(Me.mint),owner:Me.owner?he(Me.owner):null});return{message:Ae,serializedMessage:n.transactions.serializeMessage(Ae),signatures:Se.signatures.map(base58$2.serialize),meta:{fee:lamports(Te.fee),logs:Te.logMessages??[],preBalances:Te.preBalances.map(lamports),postBalances:Te.postBalances.map(lamports),preTokenBalances:(Te.preTokenBalances??[]).map(ve),postTokenBalances:(Te.postTokenBalances??[]).map(ve),innerInstructions:((ye=Te.innerInstructions)==null?void 0:ye.map(Me=>({index:Me.index,instructions:Me.instructions.map(Ie=>({programIndex:Ie.programIdIndex,accountIndexes:Ie.accounts,data:base58$2.serialize(Ie.data)}))})))??null,loadedAddresses:{writable:(((be=Te.loadedAddresses)==null?void 0:be.writable)??[]).map(fromWeb3JsPublicKey),readonly:(((_e=Te.loadedAddresses)==null?void 0:_e.readonly)??[]).map(fromWeb3JsPublicKey)},computeUnitsConsumed:Te.computeUnitsConsumed?BigInt(Te.computeUnitsConsumed):null,err:Te.err}}},fe=async(xe,Re={})=>(await ee().getSignatureStatuses(xe.map(Se=>base58$2.deserialize(Se)[0]),{searchTransactionHistory:(Re==null?void 0:Re.searchTransactionHistory)??!1})).value.map(Se=>Se?{slot:Se.slot,confirmations:Se.confirmations,error:Se.err,commitment:Se.confirmationStatus??null}:null),pe=async(xe,Re={})=>!isZeroAmount(await se(xe,Re)),me=async(xe,Re,Be={})=>{const Se=await ee().requestAirdrop(toWeb3JsPublicKey(xe),Number(Re.basisPoints));if(Be.strategy){await we(base58$2.serialize(Se),Be);return}await we(base58$2.serialize(Se),{...Be,strategy:{type:"blockhash",...await ce()}})},ge=async(xe,Re,Be={})=>{const Se=ee()._rpcClient,Te=resolveCallParams(Re?[...Re]:[],Be.commitment,Be.extra);return new Promise((Ae,he)=>{const ve=(ye,be)=>ye?he(ye):Ae(be.result);Be.id?Se.request(xe,Te,Be.id,ve):Se.request(xe,Te,ve)})},De=async(xe,Re={})=>{try{const Be=await ee().sendRawTransaction(n.transactions.serialize(xe),Re);return base58$2.serialize(Be)}catch(Be){let Se=null;throw Be instanceof Error&&"logs"in Be&&(Se=n.programs.resolveError(Be,xe)),Se||Be}},Ce=async(xe,Re={})=>{try{const Be=toWeb3JsTransaction(xe);return(await ee().simulateTransaction(Be,{sigVerify:Re.verifySignatures,accounts:{addresses:Re.accounts||[],encoding:"base64"}})).value}catch(Be){let Se=null;throw Be instanceof Error&&"logs"in Be&&(Se=n.programs.resolveError(Be,xe)),Se||Be}},we=async(xe,Re)=>ee().confirmTransaction(parseConfirmStrategy(xe,Re),Re.commitment);return{getEndpoint:()=>ee().rpcEndpoint,getCluster:()=>te,getAccount:ae,getAccounts:ne,getProgramAccounts:oe,getBlockTime:ie,getGenesisHash:ue,getBalance:se,getRent:le,getSlot:async(xe={})=>ee().getSlot(xe),getLatestBlockhash:ce,getTransaction:de,getSignatureStatuses:fe,accountExists:pe,airdrop:me,call:ge,sendTransaction:De,simulateTransaction:Ce,confirmTransaction:we,get connection(){return ee()}}}function parseAccount(n,t){return{executable:n.executable,owner:fromWeb3JsPublicKey(n.owner),lamports:lamports(n.lamports),rentEpoch:n.rentEpoch?BigInt(n.rentEpoch):void 0,publicKey:t,data:new Uint8Array(n.data)}}function parseMaybeAccount(n,t){return n?{...parseAccount(n,t),exists:!0}:{exists:!1,publicKey:t}}function parseDataFilter(n){if(!("memcmp"in n))return n;const{bytes:t,...u}=n.memcmp;return{memcmp:{...u,bytes:base58$2.deserialize(t)[0]}}}function parseConfirmStrategy(n,t){return t.strategy.type==="blockhash"?{...t.strategy,signature:base58$2.deserialize(n)[0]}:{...t.strategy,signature:base58$2.deserialize(n)[0],nonceAccountPubkey:toWeb3JsPublicKey(t.strategy.nonceAccountPubkey)}}function resolveCallParams(n,t,u){if(!t&&!u)return n;let c={};return t&&(c.commitment=t),u&&(c={...c,...u}),n.push(c),n}function web3JsRpc(n,t){return{install(u){u.rpc=typeof n=="string"?createWeb3JsRpc(u,n,t):createWeb3JsRpc(u,n)}}}const createChunkGetAccountsRpc=(n,t=100)=>({...n,getAccounts:async(u,c)=>{const ee=chunk(u,t).map(ae=>n.getAccounts(ae,c));return(await Promise.all(ee)).flat()}}),chunkGetAccountsRpc=(n=100)=>({install(t){t.rpc=createChunkGetAccountsRpc(t.rpc,n)}});function createDataViewSerializer(n={}){return{tuple:tuple$1,array:array$1,map:map$2,set:set$2,option:option$1,nullable:nullable$1,struct:struct$1,enum:scalarEnum$1,dataEnum:dataEnum$1,string:string$2,bool:bool$1,unit:unit$1,u8:u8$1,u16:u16$1,u32:u32$1,u64:u64$1,u128:u128$1,i8:i8$1,i16:i16$1,i32:i32$1,i64:i64$1,i128:i128$1,f32:f32$1,f64:f64$1,bytes:bytes$2,publicKey:publicKey$1}}const dataViewSerializer=(n={})=>({install(t){t.serializer=createDataViewSerializer(n)}}),TRANSACTION_VERSION_FLAG=128,TRANSACTION_VERSION_MASK=127;function createWeb3JsTransactionFactory(){const n=le=>{const ce=toWeb3JsMessageFromInput(le),de=fromWeb3JsMessage(ce),fe=new VersionedTransaction(ce,le.signatures);return{message:de,serializedMessage:c(de),signatures:fe.signatures}},t=le=>te().serialize(le),u=le=>te().deserialize(le)[0],c=le=>ae().serialize(le),ee=le=>ae().deserialize(le)[0],te=()=>({...mapSerializer$1(struct$1([["signatures",array$1(bytes$2({size:64}),{size:shortU16$1()})],["serializedMessage",bytes$2()]]),le=>le,le=>({...le,message:ee(le.serializedMessage)})),description:"Transaction"}),ae=()=>({description:"TransactionMessage",fixedSize:null,maxSize:null,serialize:le=>ne(le.version).serialize(le),deserialize:(le,ce=0)=>{const[de]=oe().deserialize(le,ce);return ne(de).deserialize(le,ce)}}),ne=le=>struct$1([["version",oe()],["header",ie()],["accounts",array$1(publicKey$1(),{size:shortU16$1()})],["blockhash",string$2({encoding:base58$2,size:32})],["instructions",array$1(se(),{size:shortU16$1()})],["addressLookupTables",array$1(ue(),{size:le==="legacy"?0:shortU16$1()})]]),oe=()=>({description:"TransactionVersion",fixedSize:null,maxSize:1,serialize:le=>le==="legacy"?new Uint8Array([]):new Uint8Array([TRANSACTION_VERSION_FLAG|le]),deserialize:(le,ce=0)=>{const de=le.slice(ce);if(de.length===0||!(de[0]&TRANSACTION_VERSION_FLAG))return["legacy",ce];const fe=de[0]&TRANSACTION_VERSION_MASK;if(fe>0)throw new SdkError$1(`Unsupported transaction version: ${fe}.`);return[fe,ce+1]}}),ie=()=>struct$1([["numRequiredSignatures",u8$1()],["numReadonlySignedAccounts",u8$1()],["numReadonlyUnsignedAccounts",u8$1()]]),se=()=>struct$1([["programIndex",u8$1()],["accountIndexes",array$1(u8$1(),{size:shortU16$1()})],["data",bytes$2({size:shortU16$1()})]]),ue=()=>struct$1([["publicKey",publicKey$1()],["writableIndexes",array$1(u8$1(),{size:shortU16$1()})],["readonlyIndexes",array$1(u8$1(),{size:shortU16$1()})]]);return{create:n,serialize:t,deserialize:u,serializeMessage:c,deserializeMessage:ee}}const web3JsTransactionFactory=()=>({install(n){n.transactions=createWeb3JsTransactionFactory()}});function defaultPlugins(n,t){return{install(u){u.use(dataViewSerializer()),u.use(defaultProgramRepository()),u.use(fetchHttp()),u.use(httpDownloader()),u.use(web3JsEddsa()),u.use(typeof n=="string"?web3JsRpc(n,t):web3JsRpc(n)),u.use(chunkGetAccountsRpc(t==null?void 0:t.getAccountsChunkSize)),u.use(web3JsTransactionFactory())}}}function createUmi(n,t){return createUmi$1().use(defaultPlugins(n,t))}var src$4={},createTree={},src$3={},generated$3={},accounts$3={},addressLookupTable$1={},cjs$6={},cjs$5={},common$2={},hasRequiredCommon$2;function requireCommon$2(){if(hasRequiredCommon$2)return common$2;hasRequiredCommon$2=1,Object.defineProperty(common$2,"__esModule",{value:!0});const n=te=>({__option:"Some",value:te}),t=()=>({__option:"None"}),u=te=>te&&typeof te=="object"&&"__option"in te&&(te.__option==="Some"&&"value"in te||te.__option==="None"),c=te=>te.__option==="Some",ee=te=>te.__option==="None";return common$2.isNone=ee,common$2.isOption=u,common$2.isSome=c,common$2.none=t,common$2.some=n,common$2}var unwrapOption={},hasRequiredUnwrapOption;function requireUnwrapOption(){if(hasRequiredUnwrapOption)return unwrapOption;hasRequiredUnwrapOption=1,Object.defineProperty(unwrapOption,"__esModule",{value:!0});var n=requireCommon$2();function t(ae,ne){return n.isSome(ae)?ae.value:ne?ne():null}const u=ae=>ae!==null?n.some(ae):n.none(),c=ae=>ae!=null?n.some(ae):n.none(),ee=ae=>n.isSome(ae)?ae.value:null,te=(ae,ne)=>n.isSome(ae)?ae.value:ne();return unwrapOption.unwrapOption=t,unwrapOption.unwrapSome=ee,unwrapOption.unwrapSomeOrElse=te,unwrapOption.wrapNullable=u,unwrapOption.wrapNullish=c,unwrapOption}var unwrapOptionRecursively={},hasRequiredUnwrapOptionRecursively;function requireUnwrapOptionRecursively(){if(hasRequiredUnwrapOptionRecursively)return unwrapOptionRecursively;hasRequiredUnwrapOptionRecursively=1,Object.defineProperty(unwrapOptionRecursively,"__esModule",{value:!0});var n=requireCommon$2();function t(u,c){if(!u||ArrayBuffer.isView(u))return u;const ee=te=>c?t(te,c):t(te);return n.isOption(u)?n.isSome(u)?ee(u.value):c?c():null:Array.isArray(u)?u.map(ee):typeof u=="object"?Object.fromEntries(Object.entries(u).map(([te,ae])=>[te,ee(ae)])):u}return unwrapOptionRecursively.unwrapOptionRecursively=t,unwrapOptionRecursively}var hasRequiredCjs$6;function requireCjs$6(){if(hasRequiredCjs$6)return cjs$5;hasRequiredCjs$6=1,Object.defineProperty(cjs$5,"__esModule",{value:!0});var n=requireCommon$2(),t=requireUnwrapOption(),u=requireUnwrapOptionRecursively();return cjs$5.isNone=n.isNone,cjs$5.isOption=n.isOption,cjs$5.isSome=n.isSome,cjs$5.none=n.none,cjs$5.some=n.some,cjs$5.unwrapOption=t.unwrapOption,cjs$5.unwrapSome=t.unwrapSome,cjs$5.unwrapSomeOrElse=t.unwrapSomeOrElse,cjs$5.wrapNullable=t.wrapNullable,cjs$5.wrapNullish=t.wrapNullish,cjs$5.unwrapOptionRecursively=u.unwrapOptionRecursively,cjs$5}var cjs$4={},common$1={},cjs$3={},base10={},baseX={},errors$b={},hasRequiredErrors$b;function requireErrors$b(){if(hasRequiredErrors$b)return errors$b;hasRequiredErrors$b=1,Object.defineProperty(errors$b,"__esModule",{value:!0});class n extends Error{constructor(c,ee,te){const ae=`Expected a string of base ${ee}, got [${c}].`;super(ae);Ca(this,"name","InvalidBaseStringError");this.cause=te}}return errors$b.InvalidBaseStringError=n,errors$b}var hasRequiredBaseX;function requireBaseX(){if(hasRequiredBaseX)return baseX;hasRequiredBaseX=1,Object.defineProperty(baseX,"__esModule",{value:!0});var n=requireErrors$b();const t=u=>{const c=u.length,ee=BigInt(c);return{description:`base${c}`,fixedSize:null,maxSize:null,serialize(te){if(!te.match(new RegExp(`^[${u}]*$`)))throw new n.InvalidBaseStringError(te,c);if(te==="")return new Uint8Array;const ae=[...te];let ne=ae.findIndex(ce=>ce!==u[0]);ne=ne===-1?ae.length:ne;const oe=Array(ne).fill(0);if(ne===ae.length)return Uint8Array.from(oe);const ie=ae.slice(ne);let se=0n,ue=1n;for(let ce=ie.length-1;ce>=0;ce-=1)se+=ue*BigInt(u.indexOf(ie[ce])),ue*=ee;const le=[];for(;se>0n;)le.unshift(Number(se%256n)),se/=256n;return Uint8Array.from(oe.concat(le))},deserialize(te,ae=0){if(te.length===0)return["",0];const ne=te.slice(ae);let oe=ne.findIndex(le=>le!==0);oe=oe===-1?ne.length:oe;const ie=u[0].repeat(oe);if(oe===ne.length)return[ie,te.length];let se=ne.slice(oe).reduce((le,ce)=>le*256n+BigInt(ce),0n);const ue=[];for(;se>0n;)ue.unshift(u[Number(se%ee)]),se/=ee;return[ie+ue.join(""),te.length]}}};return baseX.baseX=t,baseX}var hasRequiredBase10;function requireBase10(){if(hasRequiredBase10)return base10;hasRequiredBase10=1,Object.defineProperty(base10,"__esModule",{value:!0});var n=requireBaseX();const t=n.baseX("0123456789");return base10.base10=t,base10}var base16={},hasRequiredBase16;function requireBase16(){if(hasRequiredBase16)return base16;hasRequiredBase16=1,Object.defineProperty(base16,"__esModule",{value:!0});var n=requireErrors$b();const t={description:"base16",fixedSize:null,maxSize:null,serialize(u){const c=u.toLowerCase();if(!c.match(/^[0123456789abcdef]*$/))throw new n.InvalidBaseStringError(u,16);const ee=c.match(/.{1,2}/g);return Uint8Array.from(ee?ee.map(te=>parseInt(te,16)):[])},deserialize(u,c=0){return[u.slice(c).reduce((te,ae)=>te+ae.toString(16).padStart(2,"0"),""),u.length]}};return base16.base16=t,base16}var base58={},hasRequiredBase58;function requireBase58(){if(hasRequiredBase58)return base58;hasRequiredBase58=1,Object.defineProperty(base58,"__esModule",{value:!0});var n=requireBaseX();const t=n.baseX("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");return base58.base58=t,base58}var base64={},cjs$2={},bytes$1={},hasRequiredBytes$1;function requireBytes$1(){if(hasRequiredBytes$1)return bytes$1;hasRequiredBytes$1=1,Object.defineProperty(bytes$1,"__esModule",{value:!0});const n=c=>{const ee=c.reduce((ne,oe)=>ne+oe.length,0),te=new Uint8Array(ee);let ae=0;return c.forEach(ne=>{te.set(ne,ae),ae+=ne.length}),te},t=(c,ee)=>{if(c.length>=ee)return c;const te=new Uint8Array(ee).fill(0);return te.set(c),te},u=(c,ee)=>t(c.slice(0,ee),ee);return bytes$1.fixBytes=u,bytes$1.mergeBytes=n,bytes$1.padBytes=t,bytes$1}var errors$a={},hasRequiredErrors$a;function requireErrors$a(){if(hasRequiredErrors$a)return errors$a;hasRequiredErrors$a=1,Object.defineProperty(errors$a,"__esModule",{value:!0});class n extends Error{constructor(te){super(`Serializer [${te}] cannot deserialize empty buffers.`);Ca(this,"name","DeserializingEmptyBufferError")}}class t extends Error{constructor(te,ae,ne){super(`Serializer [${te}] expected ${ae} bytes, got ${ne}.`);Ca(this,"name","NotEnoughBytesError")}}class u extends Error{constructor(te){te??(te="Expected a fixed-size serializer, got a variable-size one.");super(te);Ca(this,"name","ExpectedFixedSizeSerializerError")}}return errors$a.DeserializingEmptyBufferError=n,errors$a.ExpectedFixedSizeSerializerError=u,errors$a.NotEnoughBytesError=t,errors$a}var fixSerializer={},hasRequiredFixSerializer;function requireFixSerializer(){if(hasRequiredFixSerializer)return fixSerializer;hasRequiredFixSerializer=1,Object.defineProperty(fixSerializer,"__esModule",{value:!0});var n=requireBytes$1(),t=requireErrors$a();function u(c,ee,te){return{description:te??`fixed(${ee}, ${c.description})`,fixedSize:ee,maxSize:ee,serialize:ae=>n.fixBytes(c.serialize(ae),ee),deserialize:(ae,ne=0)=>{if(ae=ae.slice(ne,ne+ee),ae.length<ee)throw new t.NotEnoughBytesError("fixSerializer",ee,ae.length);c.fixedSize!==null&&(ae=n.fixBytes(ae,c.fixedSize));const[oe]=c.deserialize(ae,0);return[oe,ne+ee]}}}return fixSerializer.fixSerializer=u,fixSerializer}var mapSerializer={},hasRequiredMapSerializer;function requireMapSerializer(){if(hasRequiredMapSerializer)return mapSerializer;hasRequiredMapSerializer=1,Object.defineProperty(mapSerializer,"__esModule",{value:!0});function n(t,u,c){return{description:t.description,fixedSize:t.fixedSize,maxSize:t.maxSize,serialize:ee=>t.serialize(u(ee)),deserialize:(ee,te=0)=>{const[ae,ne]=t.deserialize(ee,te);return c?[c(ae,ee,te),ne]:[ae,ne]}}}return mapSerializer.mapSerializer=n,mapSerializer}var reverseSerializer={},hasRequiredReverseSerializer;function requireReverseSerializer(){if(hasRequiredReverseSerializer)return reverseSerializer;hasRequiredReverseSerializer=1,Object.defineProperty(reverseSerializer,"__esModule",{value:!0});var n=requireBytes$1(),t=requireErrors$a();function u(c){if(c.fixedSize===null)throw new t.ExpectedFixedSizeSerializerError("Cannot reverse a serializer of variable size.");return{...c,serialize:ee=>c.serialize(ee).reverse(),deserialize:(ee,te=0)=>{const ae=c.fixedSize,ne=n.mergeBytes([ee.slice(0,te),ee.slice(te,te+ae).reverse(),ee.slice(te+ae)]);return c.deserialize(ne,te)}}}return reverseSerializer.reverseSerializer=u,reverseSerializer}var hasRequiredCjs$5;function requireCjs$5(){if(hasRequiredCjs$5)return cjs$2;hasRequiredCjs$5=1,Object.defineProperty(cjs$2,"__esModule",{value:!0});var n=requireBytes$1(),t=requireErrors$a(),u=requireFixSerializer(),c=requireMapSerializer(),ee=requireReverseSerializer();return cjs$2.fixBytes=n.fixBytes,cjs$2.mergeBytes=n.mergeBytes,cjs$2.padBytes=n.padBytes,cjs$2.DeserializingEmptyBufferError=t.DeserializingEmptyBufferError,cjs$2.ExpectedFixedSizeSerializerError=t.ExpectedFixedSizeSerializerError,cjs$2.NotEnoughBytesError=t.NotEnoughBytesError,cjs$2.fixSerializer=u.fixSerializer,cjs$2.mapSerializer=c.mapSerializer,cjs$2.reverseSerializer=ee.reverseSerializer,cjs$2}var baseXReslice={},hasRequiredBaseXReslice;function requireBaseXReslice(){if(hasRequiredBaseXReslice)return baseXReslice;hasRequiredBaseXReslice=1,Object.defineProperty(baseXReslice,"__esModule",{value:!0});var n=requireErrors$b();const t=(u,c)=>{const ee=u.length,te=(ae,ne,oe,ie)=>{const se=[];let ue=0,le=0;const ce=(1<<oe)-1;for(const de of ae)for(ue=ue<<ne|de,le+=ne;le>=oe;)le-=oe,se.push(ue>>le&ce);return ie&&le>0&&se.push(ue<<oe-le&ce),se};return{description:`base${ee}`,fixedSize:null,maxSize:null,serialize(ae){if(!ae.match(new RegExp(`^[${u}]*$`)))throw new n.InvalidBaseStringError(ae,ee);if(ae==="")return new Uint8Array;const ne=[...ae].map(ie=>u.indexOf(ie)),oe=te(ne,c,8,!1);return Uint8Array.from(oe)},deserialize(ae,ne=0){if(ae.length===0)return["",0];const oe=[...ae.slice(ne)];return[te(oe,8,c,!0).map(se=>u[se]).join(""),ae.length]}}};return baseXReslice.baseXReslice=t,baseXReslice}var hasRequiredBase64;function requireBase64(){if(hasRequiredBase64)return base64;hasRequiredBase64=1,Object.defineProperty(base64,"__esModule",{value:!0});var n=requireCjs$5(),t=requireBaseXReslice();const u=n.mapSerializer(t.baseXReslice("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",6),c=>c.replace(/=/g,""),c=>c.padEnd(Math.ceil(c.length/4)*4,"="));return base64.base64=u,base64}var nullCharacters={},hasRequiredNullCharacters;function requireNullCharacters(){if(hasRequiredNullCharacters)return nullCharacters;hasRequiredNullCharacters=1,Object.defineProperty(nullCharacters,"__esModule",{value:!0});const n=u=>u.replace(/\u0000/g,""),t=(u,c)=>u.padEnd(c,"\0");return nullCharacters.padNullCharacters=t,nullCharacters.removeNullCharacters=n,nullCharacters}var utf8={},hasRequiredUtf8;function requireUtf8(){if(hasRequiredUtf8)return utf8;hasRequiredUtf8=1,Object.defineProperty(utf8,"__esModule",{value:!0});var n=requireNullCharacters();const t={description:"utf8",fixedSize:null,maxSize:null,serialize(u){return new TextEncoder().encode(u)},deserialize(u,c=0){const ee=new TextDecoder().decode(u.slice(c));return[n.removeNullCharacters(ee),u.length]}};return utf8.utf8=t,utf8}var hasRequiredCjs$4;function requireCjs$4(){if(hasRequiredCjs$4)return cjs$3;hasRequiredCjs$4=1,Object.defineProperty(cjs$3,"__esModule",{value:!0});var n=requireBase10(),t=requireBase16(),u=requireBase58(),c=requireBase64(),ee=requireBaseX(),te=requireBaseXReslice(),ae=requireErrors$b(),ne=requireNullCharacters(),oe=requireUtf8();return cjs$3.base10=n.base10,cjs$3.base16=t.base16,cjs$3.base58=u.base58,cjs$3.base64=c.base64,cjs$3.baseX=ee.baseX,cjs$3.baseXReslice=te.baseXReslice,cjs$3.InvalidBaseStringError=ae.InvalidBaseStringError,cjs$3.padNullCharacters=ne.padNullCharacters,cjs$3.removeNullCharacters=ne.removeNullCharacters,cjs$3.utf8=oe.utf8,cjs$3}var errors$9={},hasRequiredErrors$9;function requireErrors$9(){if(hasRequiredErrors$9)return errors$9;hasRequiredErrors$9=1,Object.defineProperty(errors$9,"__esModule",{value:!0});class n extends Error{constructor(c,ee){ee=ee?`. ${ee}`:"";super(`The provided public key is invalid: ${c}${ee}`);Ca(this,"name","InvalidPublicKeyError");this.invalidPublicKey=c}}return errors$9.InvalidPublicKeyError=n,errors$9}var hasRequiredCommon$1;function requireCommon$1(){if(hasRequiredCommon$1)return common$1;hasRequiredCommon$1=1,Object.defineProperty(common$1,"__esModule",{value:!0});var n=requireCjs$4(),t=requireErrors$9();const u=32;function c(le,ce=!0){const de=typeof le=="string"?le:typeof le=="object"&&"publicKey"in le?le.publicKey:typeof le=="object"&&"toBase58"in le?le.toBase58():Array.isArray(le)?le[0]:n.base58.deserialize(le)[0];return ce&&ne(de),de}const ee=()=>"11111111111111111111111111111111",te=le=>{try{return ne(le),!0}catch{return!1}},ae=le=>Array.isArray(le)&&le.length===2&&typeof le[1]=="number"&&te(le[0]);function ne(le){if(typeof le!="string")throw new t.InvalidPublicKeyError(le,"Public keys must be strings.");ie(le)}const oe=le=>[...new Set(le)],ie=le=>{if(le.length<32||le.length>44)throw new t.InvalidPublicKeyError(le,"Public keys must be between 32 and 44 characters.");let ce;try{ce=n.base58.serialize(le)}catch{throw new t.InvalidPublicKeyError(le,"Public keys must be base58 encoded.")}if(ce.length!==u)throw new t.InvalidPublicKeyError(le,`Public keys must be ${u} bytes.`);return ce},se=le=>c(le),ue=(le,ce)=>c(le)===c(ce);return common$1.PUBLIC_KEY_LENGTH=u,common$1.assertPublicKey=ne,common$1.base58PublicKey=se,common$1.defaultPublicKey=ee,common$1.isPda=ae,common$1.isPublicKey=te,common$1.publicKey=c,common$1.publicKeyBytes=ie,common$1.samePublicKey=ue,common$1.uniquePublicKeys=oe,common$1}var hasRequiredCjs$3;function requireCjs$3(){if(hasRequiredCjs$3)return cjs$4;hasRequiredCjs$3=1,Object.defineProperty(cjs$4,"__esModule",{value:!0});var n=requireCommon$1(),t=requireErrors$9();return cjs$4.PUBLIC_KEY_LENGTH=n.PUBLIC_KEY_LENGTH,cjs$4.assertPublicKey=n.assertPublicKey,cjs$4.base58PublicKey=n.base58PublicKey,cjs$4.defaultPublicKey=n.defaultPublicKey,cjs$4.isPda=n.isPda,cjs$4.isPublicKey=n.isPublicKey,cjs$4.publicKey=n.publicKey,cjs$4.publicKeyBytes=n.publicKeyBytes,cjs$4.samePublicKey=n.samePublicKey,cjs$4.uniquePublicKeys=n.uniquePublicKeys,cjs$4.InvalidPublicKeyError=t.InvalidPublicKeyError,cjs$4}var serializersInternal={},cjs$1={},cjs={},common={},hasRequiredCommon;function requireCommon(){return hasRequiredCommon||(hasRequiredCommon=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.Endian=void 0,function(t){t.Little="le",t.Big="be"}(n.Endian||(n.Endian={}))}(common)),common}var errors$8={},hasRequiredErrors$8;function requireErrors$8(){if(hasRequiredErrors$8)return errors$8;hasRequiredErrors$8=1,Object.defineProperty(errors$8,"__esModule",{value:!0});class n extends RangeError{constructor(c,ee,te,ae){super(`Serializer [${c}] expected number to be between ${ee} and ${te}, got ${ae}.`);Ca(this,"name","NumberOutOfRangeError")}}return errors$8.NumberOutOfRangeError=n,errors$8}var f32={},utils$1={},hasRequiredUtils$1;function requireUtils$1(){if(hasRequiredUtils$1)return utils$1;hasRequiredUtils$1=1,Object.defineProperty(utils$1,"__esModule",{value:!0});var n=requireCjs$5(),t=requireCommon(),u=requireErrors$8();function c(oe){let ie,se=oe.name;return oe.size>1&&(ie=!("endian"in oe.options)||oe.options.endian===t.Endian.Little,se+=ie?"(le)":"(be)"),{description:oe.options.description??se,fixedSize:oe.size,maxSize:oe.size,serialize(ue){oe.range&&ae(oe.name,oe.range[0],oe.range[1],ue);const le=new ArrayBuffer(oe.size);return oe.set(new DataView(le),ue,ie),new Uint8Array(le)},deserialize(ue,le=0){const ce=ue.slice(le,le+oe.size);ne("i8",ce,oe.size);const de=te(ce);return[oe.get(de,ie),le+oe.size]}}}const ee=oe=>oe.buffer.slice(oe.byteOffset,oe.byteLength+oe.byteOffset),te=oe=>new DataView(ee(oe)),ae=(oe,ie,se,ue)=>{if(ue<ie||ue>se)throw new u.NumberOutOfRangeError(oe,ie,se,ue)},ne=(oe,ie,se)=>{if(ie.length===0)throw new n.DeserializingEmptyBufferError(oe);if(ie.length<se)throw new n.NotEnoughBytesError(oe,se,ie.length)};return utils$1.assertEnoughBytes=ne,utils$1.assertRange=ae,utils$1.numberFactory=c,utils$1.toArrayBuffer=ee,utils$1.toDataView=te,utils$1}var hasRequiredF32;function requireF32(){if(hasRequiredF32)return f32;hasRequiredF32=1,Object.defineProperty(f32,"__esModule",{value:!0});var n=requireUtils$1();const t=(u={})=>n.numberFactory({name:"f32",size:4,set:(c,ee,te)=>c.setFloat32(0,Number(ee),te),get:(c,ee)=>c.getFloat32(0,ee),options:u});return f32.f32=t,f32}var f64={},hasRequiredF64;function requireF64(){if(hasRequiredF64)return f64;hasRequiredF64=1,Object.defineProperty(f64,"__esModule",{value:!0});var n=requireUtils$1();const t=(u={})=>n.numberFactory({name:"f64",size:8,set:(c,ee,te)=>c.setFloat64(0,Number(ee),te),get:(c,ee)=>c.getFloat64(0,ee),options:u});return f64.f64=t,f64}var i8={},hasRequiredI8;function requireI8(){if(hasRequiredI8)return i8;hasRequiredI8=1,Object.defineProperty(i8,"__esModule",{value:!0});var n=requireUtils$1();const t=(u={})=>n.numberFactory({name:"i8",size:1,range:[-+"0x7f"-1,+"0x7f"],set:(c,ee)=>c.setInt8(0,Number(ee)),get:c=>c.getInt8(0),options:u});return i8.i8=t,i8}var i16={},hasRequiredI16;function requireI16(){if(hasRequiredI16)return i16;hasRequiredI16=1,Object.defineProperty(i16,"__esModule",{value:!0});var n=requireUtils$1();const t=(u={})=>n.numberFactory({name:"i16",size:2,range:[-+"0x7fff"-1,+"0x7fff"],set:(c,ee,te)=>c.setInt16(0,Number(ee),te),get:(c,ee)=>c.getInt16(0,ee),options:u});return i16.i16=t,i16}var i32={},hasRequiredI32;function requireI32(){if(hasRequiredI32)return i32;hasRequiredI32=1,Object.defineProperty(i32,"__esModule",{value:!0});var n=requireUtils$1();const t=(u={})=>n.numberFactory({name:"i32",size:4,range:[-+"0x7fffffff"-1,+"0x7fffffff"],set:(c,ee,te)=>c.setInt32(0,Number(ee),te),get:(c,ee)=>c.getInt32(0,ee),options:u});return i32.i32=t,i32}var i64={},hasRequiredI64;function requireI64(){if(hasRequiredI64)return i64;hasRequiredI64=1,Object.defineProperty(i64,"__esModule",{value:!0});var n=requireUtils$1();const t=(u={})=>n.numberFactory({name:"i64",size:8,range:[-BigInt("0x7fffffffffffffff")-1n,BigInt("0x7fffffffffffffff")],set:(c,ee,te)=>c.setBigInt64(0,BigInt(ee),te),get:(c,ee)=>c.getBigInt64(0,ee),options:u});return i64.i64=t,i64}var i128={},hasRequiredI128;function requireI128(){if(hasRequiredI128)return i128;hasRequiredI128=1,Object.defineProperty(i128,"__esModule",{value:!0});var n=requireUtils$1();const t=(u={})=>n.numberFactory({name:"i128",size:16,range:[-BigInt("0x7fffffffffffffffffffffffffffffff")-1n,BigInt("0x7fffffffffffffffffffffffffffffff")],set:(c,ee,te)=>{const ae=te?8:0,ne=te?0:8,oe=0xffffffffffffffffn;c.setBigInt64(ae,BigInt(ee)>>64n,te),c.setBigUint64(ne,BigInt(ee)&oe,te)},get:(c,ee)=>{const te=ee?8:0,ae=ee?0:8,ne=c.getBigInt64(te,ee),oe=c.getBigUint64(ae,ee);return(ne<<64n)+oe},options:u});return i128.i128=t,i128}var u8={},hasRequiredU8;function requireU8(){if(hasRequiredU8)return u8;hasRequiredU8=1,Object.defineProperty(u8,"__esModule",{value:!0});var n=requireUtils$1();const t=(u={})=>n.numberFactory({name:"u8",size:1,range:[0,+"0xff"],set:(c,ee)=>c.setUint8(0,Number(ee)),get:c=>c.getUint8(0),options:u});return u8.u8=t,u8}var u16={},hasRequiredU16;function requireU16(){if(hasRequiredU16)return u16;hasRequiredU16=1,Object.defineProperty(u16,"__esModule",{value:!0});var n=requireUtils$1();const t=(u={})=>n.numberFactory({name:"u16",size:2,range:[0,+"0xffff"],set:(c,ee,te)=>c.setUint16(0,Number(ee),te),get:(c,ee)=>c.getUint16(0,ee),options:u});return u16.u16=t,u16}var u32={},hasRequiredU32;function requireU32(){if(hasRequiredU32)return u32;hasRequiredU32=1,Object.defineProperty(u32,"__esModule",{value:!0});var n=requireUtils$1();const t=(u={})=>n.numberFactory({name:"u32",size:4,range:[0,+"0xffffffff"],set:(c,ee,te)=>c.setUint32(0,Number(ee),te),get:(c,ee)=>c.getUint32(0,ee),options:u});return u32.u32=t,u32}var u64={},hasRequiredU64;function requireU64(){if(hasRequiredU64)return u64;hasRequiredU64=1,Object.defineProperty(u64,"__esModule",{value:!0});var n=requireUtils$1();const t=(u={})=>n.numberFactory({name:"u64",size:8,range:[0,BigInt("0xffffffffffffffff")],set:(c,ee,te)=>c.setBigUint64(0,BigInt(ee),te),get:(c,ee)=>c.getBigUint64(0,ee),options:u});return u64.u64=t,u64}var u128={},hasRequiredU128;function requireU128(){if(hasRequiredU128)return u128;hasRequiredU128=1,Object.defineProperty(u128,"__esModule",{value:!0});var n=requireUtils$1();const t=(u={})=>n.numberFactory({name:"u128",size:16,range:[0,BigInt("0xffffffffffffffffffffffffffffffff")],set:(c,ee,te)=>{const ae=te?8:0,ne=te?0:8,oe=0xffffffffffffffffn;c.setBigUint64(ae,BigInt(ee)>>64n,te),c.setBigUint64(ne,BigInt(ee)&oe,te)},get:(c,ee)=>{const te=ee?8:0,ae=ee?0:8,ne=c.getBigUint64(te,ee),oe=c.getBigUint64(ae,ee);return(ne<<64n)+oe},options:u});return u128.u128=t,u128}var shortU16={},hasRequiredShortU16;function requireShortU16(){if(hasRequiredShortU16)return shortU16;hasRequiredShortU16=1,Object.defineProperty(shortU16,"__esModule",{value:!0});var n=requireUtils$1();const t=(u={})=>({description:u.description??"shortU16",fixedSize:null,maxSize:3,serialize:c=>{n.assertRange("shortU16",0,65535,c);const ee=[0];for(let te=0;;te+=1){const ae=c>>te*7;if(ae===0)break;const ne=127&ae;ee[te]=ne,te>0&&(ee[te-1]|=128)}return new Uint8Array(ee)},deserialize:(c,ee=0)=>{let te=0,ae=0;for(;++ae;){const ne=ae-1,oe=c[ee+ne],ie=127&oe;if(te|=ie<<ne*7,!(oe&128))break}return[te,ee+ae]}});return shortU16.shortU16=t,shortU16}var hasRequiredCjs$2;function requireCjs$2(){return hasRequiredCjs$2||(hasRequiredCjs$2=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});var t=requireCommon(),u=requireErrors$8(),c=requireF32(),ee=requireF64(),te=requireI8(),ae=requireI16(),ne=requireI32(),oe=requireI64(),ie=requireI128(),se=requireU8(),ue=requireU16(),le=requireU32(),ce=requireU64(),de=requireU128(),fe=requireShortU16();Object.defineProperty(n,"Endian",{enumerable:!0,get:function(){return t.Endian}}),n.NumberOutOfRangeError=u.NumberOutOfRangeError,n.f32=c.f32,n.f64=ee.f64,n.i8=te.i8,n.i16=ae.i16,n.i32=ne.i32,n.i64=oe.i64,n.i128=ie.i128,n.u8=se.u8,n.u16=ue.u16,n.u32=le.u32,n.u64=ce.u64,n.u128=de.u128,n.shortU16=fe.shortU16}(cjs)),cjs}var array={},errors$7={},hasRequiredErrors$7;function requireErrors$7(){if(hasRequiredErrors$7)return errors$7;hasRequiredErrors$7=1,Object.defineProperty(errors$7,"__esModule",{value:!0});class n extends Error{constructor(oe,ie,se){super(`Expected [${oe}] to have ${ie} items, got ${se}.`);Ca(this,"name","InvalidNumberOfItemsError")}}class t extends Error{constructor(oe,ie){super(`The remainder of the buffer (${oe} bytes) cannot be split into chunks of ${ie} bytes. Serializers of "remainder" size must have a remainder that is a multiple of its item size. In other words, ${oe} modulo ${ie} should be equal to zero.`);Ca(this,"name","InvalidArrayLikeRemainderSizeError")}}class u extends Error{constructor(oe){super(`Unrecognized array-like serializer size: ${JSON.stringify(oe)}`);Ca(this,"name","UnrecognizedArrayLikeSerializerSizeError")}}class c extends Error{constructor(oe,ie){super(`Invalid data enum variant. Expected one of [${ie.join(", ")}], got "${oe}".`);Ca(this,"name","InvalidDataEnumVariantError")}}class ee extends Error{constructor(oe,ie,se,ue){super(`Invalid scalar enum variant. Expected one of [${ie.join(", ")}] or a number between ${se} and ${ue}, got "${oe}".`);Ca(this,"name","InvalidScalarEnumVariantError")}}class te extends RangeError{constructor(oe,ie,se){super(`Enum discriminator out of range. Expected a number between ${ie} and ${se}, got ${oe}.`);Ca(this,"name","EnumDiscriminatorOutOfRangeError")}}return errors$7.EnumDiscriminatorOutOfRangeError=te,errors$7.InvalidArrayLikeRemainderSizeError=t,errors$7.InvalidDataEnumVariantError=c,errors$7.InvalidNumberOfItemsError=n,errors$7.InvalidScalarEnumVariantError=ee,errors$7.UnrecognizedArrayLikeSerializerSizeError=u,errors$7}var utils={},sumSerializerSizes={},hasRequiredSumSerializerSizes;function requireSumSerializerSizes(){if(hasRequiredSumSerializerSizes)return sumSerializerSizes;hasRequiredSumSerializerSizes=1,Object.defineProperty(sumSerializerSizes,"__esModule",{value:!0});function n(t){return t.reduce((u,c)=>u===null||c===null?null:u+c,0)}return sumSerializerSizes.sumSerializerSizes=n,sumSerializerSizes}var hasRequiredUtils;function requireUtils(){if(hasRequiredUtils)return utils;hasRequiredUtils=1,Object.defineProperty(utils,"__esModule",{value:!0});var n=requireErrors$7(),t=requireSumSerializerSizes();function u(ae,ne,oe){if(typeof ae=="number")return[ae,oe];if(typeof ae=="object")return ae.deserialize(ne,oe);throw new n.UnrecognizedArrayLikeSerializerSizeError(ae)}function c(ae){return typeof ae=="object"?ae.description:`${ae}`}function ee(ae,ne){if(typeof ae!="number")return null;if(ae===0)return 0;const oe=t.sumSerializerSizes(ne);return oe===null?null:oe*ae}function te(ae,ne){return typeof ae=="object"?ae.serialize(ne):new Uint8Array}return utils.getResolvedSize=u,utils.getSizeDescription=c,utils.getSizeFromChildren=ee,utils.getSizePrefix=te,utils}var hasRequiredArray;function requireArray(){if(hasRequiredArray)return array;hasRequiredArray=1,Object.defineProperty(array,"__esModule",{value:!0});var n=requireCjs$5(),t=requireCjs$2(),u=requireErrors$7(),c=requireUtils();function ee(te,ae={}){const ne=ae.size??t.u32();return{description:ae.description??`array(${te.description}; ${c.getSizeDescription(ne)})`,fixedSize:c.getSizeFromChildren(ne,[te.fixedSize]),maxSize:c.getSizeFromChildren(ne,[te.maxSize]),serialize:oe=>{if(typeof ne=="number"&&oe.length!==ne)throw new u.InvalidNumberOfItemsError("array",ne,oe.length);return n.mergeBytes([c.getSizePrefix(ne,oe.length),...oe.map(ie=>te.serialize(ie))])},deserialize:(oe,ie=0)=>{const se=[];if(typeof ne=="object"&&oe.slice(ie).length===0)return[se,ie];if(ne==="remainder"){for(;ie<oe.length;){const[ce,de]=te.deserialize(oe,ie);se.push(ce),ie=de}return[se,ie]}const[ue,le]=c.getResolvedSize(ne,oe,ie);ie=le;for(let ce=0;ce<ue;ce+=1){const[de,fe]=te.deserialize(oe,ie);se.push(de),ie=fe}return[se,ie]}}}return array.array=ee,array}var bitArray={},hasRequiredBitArray;function requireBitArray(){if(hasRequiredBitArray)return bitArray;hasRequiredBitArray=1,Object.defineProperty(bitArray,"__esModule",{value:!0});var n=requireCjs$5();const t=(u,c={})=>{const ee=typeof c=="boolean"?{backward:c}:c,te=ee.backward??!1,ae=te?"; backward":"";return{description:ee.description??`bitArray(${u}${ae})`,fixedSize:u,maxSize:u,serialize(ne){const oe=[];for(let ie=0;ie<u;ie+=1){let se=0;for(let ue=0;ue<8;ue+=1){const le=Number(ne[ie*8+ue]??0);se|=le<<(te?ue:7-ue)}te?oe.unshift(se):oe.push(se)}return new Uint8Array(oe)},deserialize(ne,oe=0){const ie=[];let se=ne.slice(oe,oe+u);if(se=te?se.reverse():se,se.length!==u)throw new n.NotEnoughBytesError("bitArray",u,se.length);return se.forEach(ue=>{for(let le=0;le<8;le+=1)te?(ie.push(!!(ue&1)),ue>>=1):(ie.push(!!(ue&128)),ue<<=1)}),[ie,oe+u]}}};return bitArray.bitArray=t,bitArray}var bool={},hasRequiredBool;function requireBool(){if(hasRequiredBool)return bool;hasRequiredBool=1,Object.defineProperty(bool,"__esModule",{value:!0});var n=requireCjs$5(),t=requireCjs$2();function u(c={}){const ee=c.size??t.u8();if(ee.fixedSize===null)throw new n.ExpectedFixedSizeSerializerError("Serializer [bool] requires a fixed size.");return{description:c.description??`bool(${ee.description})`,fixedSize:ee.fixedSize,maxSize:ee.fixedSize,serialize:te=>ee.serialize(te?1:0),deserialize:(te,ae=0)=>{if(te.slice(ae).length===0)throw new n.DeserializingEmptyBufferError("bool");const[ne,oe]=ee.deserialize(te,ae);return[ne===1,oe]}}}return bool.bool=u,bool}var bytes={},hasRequiredBytes;function requireBytes(){if(hasRequiredBytes)return bytes;hasRequiredBytes=1,Object.defineProperty(bytes,"__esModule",{value:!0});var n=requireCjs$5(),t=requireUtils();function u(c={}){const ee=c.size??"variable",te=c.description??`bytes(${t.getSizeDescription(ee)})`,ae={description:te,fixedSize:null,maxSize:null,serialize:ne=>new Uint8Array(ne),deserialize:(ne,oe=0)=>{const ie=ne.slice(oe);return[ie,oe+ie.length]}};return ee==="variable"?ae:typeof ee=="number"?n.fixSerializer(ae,ee,te):{description:te,fixedSize:null,maxSize:null,serialize:ne=>{const oe=ae.serialize(ne),ie=ee.serialize(oe.length);return n.mergeBytes([ie,oe])},deserialize:(ne,oe=0)=>{if(ne.slice(oe).length===0)throw new n.DeserializingEmptyBufferError("bytes");const[ie,se]=ee.deserialize(ne,oe),ue=Number(ie);oe=se;const le=ne.slice(oe,oe+ue);if(le.length<ue)throw new n.NotEnoughBytesError("bytes",ue,le.length);const[ce,de]=ae.deserialize(le);return oe+=de,[ce,oe]}}}return bytes.bytes=u,bytes}var dataEnum={},maxSerializerSizes={},hasRequiredMaxSerializerSizes;function requireMaxSerializerSizes(){if(hasRequiredMaxSerializerSizes)return maxSerializerSizes;hasRequiredMaxSerializerSizes=1,Object.defineProperty(maxSerializerSizes,"__esModule",{value:!0});function n(t){return t.reduce((u,c)=>u===null||c===null?null:Math.max(u,c),0)}return maxSerializerSizes.maxSerializerSizes=n,maxSerializerSizes}var hasRequiredDataEnum;function requireDataEnum(){if(hasRequiredDataEnum)return dataEnum;hasRequiredDataEnum=1,Object.defineProperty(dataEnum,"__esModule",{value:!0});var n=requireCjs$5(),t=requireCjs$2(),u=requireErrors$7(),c=requireMaxSerializerSizes(),ee=requireSumSerializerSizes();function te(ae,ne={}){const oe=ne.size??t.u8(),ie=ae.map(([ce,de])=>`${String(ce)}${de?`: ${de.description}`:""}`).join(", "),ue=ae.every((ce,de,fe)=>ce[1].fixedSize===fe[0][1].fixedSize)?ae[0][1].fixedSize:null,le=c.maxSerializerSizes(ae.map(([,ce])=>ce.maxSize));return{description:ne.description??`dataEnum(${ie}; ${oe.description})`,fixedSize:ae.length===0?oe.fixedSize:ee.sumSerializerSizes([oe.fixedSize,ue]),maxSize:ae.length===0?oe.maxSize:ee.sumSerializerSizes([oe.maxSize,le]),serialize:ce=>{const de=ae.findIndex(([ge])=>ce.__kind===ge);if(de<0)throw new u.InvalidDataEnumVariantError(ce.__kind,ae.map(([ge])=>ge));const fe=oe.serialize(de),me=ae[de][1].serialize(ce);return n.mergeBytes([fe,me])},deserialize:(ce,de=0)=>{if(ce.slice(de).length===0)throw new n.DeserializingEmptyBufferError("dataEnum");const[fe,pe]=oe.deserialize(ce,de);de=pe;const me=ae[Number(fe)]??null;if(!me)throw new u.EnumDiscriminatorOutOfRangeError(fe,0,ae.length-1);const[ge,De]=me[1].deserialize(ce,de);return de=De,[{__kind:me[0],...ge??{}},de]}}}return dataEnum.dataEnum=te,dataEnum}var map={},hasRequiredMap;function requireMap(){if(hasRequiredMap)return map;hasRequiredMap=1,Object.defineProperty(map,"__esModule",{value:!0});var n=requireCjs$5(),t=requireCjs$2(),u=requireErrors$7(),c=requireUtils();function ee(te,ae,ne={}){const oe=ne.size??t.u32();return{description:ne.description??`map(${te.description}, ${ae.description}; ${c.getSizeDescription(oe)})`,fixedSize:c.getSizeFromChildren(oe,[te.fixedSize,ae.fixedSize]),maxSize:c.getSizeFromChildren(oe,[te.maxSize,ae.maxSize]),serialize:ie=>{if(typeof oe=="number"&&ie.size!==oe)throw new u.InvalidNumberOfItemsError("map",oe,ie.size);const se=Array.from(ie,([ue,le])=>n.mergeBytes([te.serialize(ue),ae.serialize(le)]));return n.mergeBytes([c.getSizePrefix(oe,ie.size),...se])},deserialize:(ie,se=0)=>{const ue=new Map;if(typeof oe=="object"&&ie.slice(se).length===0)return[ue,se];if(oe==="remainder"){for(;se<ie.length;){const[de,fe]=te.deserialize(ie,se);se=fe;const[pe,me]=ae.deserialize(ie,se);se=me,ue.set(de,pe)}return[ue,se]}const[le,ce]=c.getResolvedSize(oe,ie,se);se=ce;for(let de=0;de<le;de+=1){const[fe,pe]=te.deserialize(ie,se);se=pe;const[me,ge]=ae.deserialize(ie,se);se=ge,ue.set(fe,me)}return[ue,se]}}}return map.map=ee,map}var nullable={},hasRequiredNullable;function requireNullable(){if(hasRequiredNullable)return nullable;hasRequiredNullable=1,Object.defineProperty(nullable,"__esModule",{value:!0});var n=requireCjs$5(),t=requireCjs$2(),u=requireSumSerializerSizes(),c=requireUtils();function ee(te,ae={}){const ne=ae.prefix??t.u8(),oe=ae.fixed??!1;let ie=`; ${c.getSizeDescription(ne)}`,se=te.fixedSize===0?ne.fixedSize:null;if(oe){if(te.fixedSize===null||ne.fixedSize===null)throw new n.ExpectedFixedSizeSerializerError("Fixed nullables can only be used with fixed-size serializers");ie+="; fixed",se=ne.fixedSize+te.fixedSize}return{description:ae.description??`nullable(${te.description+ie})`,fixedSize:se,maxSize:u.sumSerializerSizes([ne.maxSize,te.maxSize]),serialize:ue=>{const le=ne.serialize(+(ue!==null));if(oe){const de=te.fixedSize,fe=ue!==null?te.serialize(ue).slice(0,de):new Uint8Array(de).fill(0);return n.mergeBytes([le,fe])}const ce=ue!==null?te.serialize(ue):new Uint8Array;return n.mergeBytes([le,ce])},deserialize:(ue,le=0)=>{if(ue.slice(le).length===0)return[null,le];const ce=le+(ne.fixedSize??0)+(te.fixedSize??0),[de,fe]=ne.deserialize(ue,le);if(le=fe,de===0)return[null,oe?ce:le];const[pe,me]=te.deserialize(ue,le);return le=me,[pe,oe?ce:le]}}}return nullable.nullable=ee,nullable}var option={},hasRequiredOption;function requireOption(){if(hasRequiredOption)return option;hasRequiredOption=1,Object.defineProperty(option,"__esModule",{value:!0});var n=requireCjs$6(),t=requireCjs$5(),u=requireCjs$2(),c=requireSumSerializerSizes(),ee=requireUtils();function te(ae,ne={}){const oe=ne.prefix??u.u8(),ie=ne.fixed??!1;let se=`; ${ee.getSizeDescription(oe)}`,ue=ae.fixedSize===0?oe.fixedSize:null;if(ie){if(ae.fixedSize===null||oe.fixedSize===null)throw new t.ExpectedFixedSizeSerializerError("Fixed options can only be used with fixed-size serializers");se+="; fixed",ue=oe.fixedSize+ae.fixedSize}return{description:ne.description??`option(${ae.description+se})`,fixedSize:ue,maxSize:c.sumSerializerSizes([oe.maxSize,ae.maxSize]),serialize:le=>{const ce=n.isOption(le)?le:n.wrapNullable(le),de=oe.serialize(Number(n.isSome(ce)));if(ie){const pe=ae.fixedSize,me=n.isSome(ce)?ae.serialize(ce.value).slice(0,pe):new Uint8Array(pe).fill(0);return t.mergeBytes([de,me])}const fe=n.isSome(ce)?ae.serialize(ce.value):new Uint8Array;return t.mergeBytes([de,fe])},deserialize:(le,ce=0)=>{if(le.slice(ce).length===0)return[n.none(),ce];const de=ce+(oe.fixedSize??0)+(ae.fixedSize??0),[fe,pe]=oe.deserialize(le,ce);if(ce=pe,fe===0)return[n.none(),ie?de:ce];const[me,ge]=ae.deserialize(le,ce);return ce=ge,[n.some(me),ie?de:ce]}}}return option.option=te,option}var publicKey={},hasRequiredPublicKey;function requirePublicKey(){if(hasRequiredPublicKey)return publicKey;hasRequiredPublicKey=1,Object.defineProperty(publicKey,"__esModule",{value:!0});var n=requireCjs$3(),t=requireCjs$5();function u(c={}){return{description:c.description??"publicKey",fixedSize:32,maxSize:32,serialize:ee=>n.publicKeyBytes(n.publicKey(ee)),deserialize:(ee,te=0)=>{const ae=ee.slice(te,te+32);if(ae.length===0)throw new t.DeserializingEmptyBufferError("publicKey");if(ae.length<n.PUBLIC_KEY_LENGTH)throw new t.NotEnoughBytesError("publicKey",n.PUBLIC_KEY_LENGTH,ae.length);return[n.publicKey(ae),te+32]}}}return publicKey.publicKey=u,publicKey}var scalarEnum={},hasRequiredScalarEnum;function requireScalarEnum(){if(hasRequiredScalarEnum)return scalarEnum;hasRequiredScalarEnum=1,Object.defineProperty(scalarEnum,"__esModule",{value:!0});var n=requireCjs$5(),t=requireCjs$2(),u=requireErrors$7();function c(ee,te={}){const ae=te.size??t.u8(),ne=Object.keys(ee),oe=Object.values(ee),ie=oe.some(fe=>typeof fe=="number"),se=oe.filter(fe=>typeof fe=="string").join(", "),ue=0,le=ie?oe.length/2-1:oe.length-1,ce=ie?[...ne]:[...new Set([...ne,...oe])];function de(fe){const pe=typeof fe=="number"&&(fe<ue||fe>le),me=typeof fe=="string"&&!ce.includes(fe);if(pe||me)throw new u.InvalidScalarEnumVariantError(fe,ce,ue,le)}return{description:te.description??`enum(${se}; ${ae.description})`,fixedSize:ae.fixedSize,maxSize:ae.maxSize,serialize:fe=>{if(de(fe),typeof fe=="number")return ae.serialize(fe);const pe=oe.indexOf(fe);return pe>=0?ae.serialize(pe):ae.serialize(ne.indexOf(fe))},deserialize:(fe,pe=0)=>{if(fe.slice(pe).length===0)throw new n.DeserializingEmptyBufferError("enum");const[me,ge]=ae.deserialize(fe,pe),De=Number(me);if(pe=ge,De<ue||De>le)throw new u.EnumDiscriminatorOutOfRangeError(De,ue,le);return[ie?De:oe[De],pe]}}}return scalarEnum.scalarEnum=c,scalarEnum}var set={},hasRequiredSet;function requireSet(){if(hasRequiredSet)return set;hasRequiredSet=1,Object.defineProperty(set,"__esModule",{value:!0});var n=requireCjs$5(),t=requireCjs$2(),u=requireErrors$7(),c=requireUtils();function ee(te,ae={}){const ne=ae.size??t.u32();return{description:ae.description??`set(${te.description}; ${c.getSizeDescription(ne)})`,fixedSize:c.getSizeFromChildren(ne,[te.fixedSize]),maxSize:c.getSizeFromChildren(ne,[te.maxSize]),serialize:oe=>{if(typeof ne=="number"&&oe.size!==ne)throw new u.InvalidNumberOfItemsError("set",ne,oe.size);const ie=Array.from(oe,se=>te.serialize(se));return n.mergeBytes([c.getSizePrefix(ne,oe.size),...ie])},deserialize:(oe,ie=0)=>{const se=new Set;if(typeof ne=="object"&&oe.slice(ie).length===0)return[se,ie];if(ne==="remainder"){for(;ie<oe.length;){const[ce,de]=te.deserialize(oe,ie);se.add(ce),ie=de}return[se,ie]}const[ue,le]=c.getResolvedSize(ne,oe,ie);ie=le;for(let ce=0;ce<ue;ce+=1){const[de,fe]=te.deserialize(oe,ie);se.add(de),ie=fe}return[se,ie]}}}return set.set=ee,set}var string={},hasRequiredString;function requireString(){if(hasRequiredString)return string;hasRequiredString=1,Object.defineProperty(string,"__esModule",{value:!0});var n=requireCjs$5(),t=requireCjs$4(),u=requireCjs$2(),c=requireUtils();function ee(te={}){const ae=te.size??u.u32(),ne=te.encoding??t.utf8,oe=te.description??`string(${ne.description}; ${c.getSizeDescription(ae)})`;return ae==="variable"?{...ne,description:oe}:typeof ae=="number"?n.fixSerializer(ne,ae,oe):{description:oe,fixedSize:null,maxSize:null,serialize:ie=>{const se=ne.serialize(ie),ue=ae.serialize(se.length);return n.mergeBytes([ue,se])},deserialize:(ie,se=0)=>{if(ie.slice(se).length===0)throw new n.DeserializingEmptyBufferError("string");const[ue,le]=ae.deserialize(ie,se),ce=Number(ue);se=le;const de=ie.slice(se,se+ce);if(de.length<ce)throw new n.NotEnoughBytesError("string",ce,de.length);const[fe,pe]=ne.deserialize(de);return se+=pe,[fe,se]}}}return string.string=ee,string}var struct={},hasRequiredStruct;function requireStruct(){if(hasRequiredStruct)return struct;hasRequiredStruct=1,Object.defineProperty(struct,"__esModule",{value:!0});var n=requireCjs$5(),t=requireSumSerializerSizes();function u(c,ee={}){const te=c.map(([ae,ne])=>`${String(ae)}: ${ne.description}`).join(", ");return{description:ee.description??`struct(${te})`,fixedSize:t.sumSerializerSizes(c.map(([,ae])=>ae.fixedSize)),maxSize:t.sumSerializerSizes(c.map(([,ae])=>ae.maxSize)),serialize:ae=>{const ne=c.map(([oe,ie])=>ie.serialize(ae[oe]));return n.mergeBytes(ne)},deserialize:(ae,ne=0)=>{const oe={};return c.forEach(([ie,se])=>{const[ue,le]=se.deserialize(ae,ne);ne=le,oe[ie]=ue}),[oe,ne]}}}return struct.struct=u,struct}var tuple={},hasRequiredTuple;function requireTuple(){if(hasRequiredTuple)return tuple;hasRequiredTuple=1,Object.defineProperty(tuple,"__esModule",{value:!0});var n=requireCjs$5(),t=requireSumSerializerSizes(),u=requireErrors$7();function c(ee,te={}){const ae=ee.map(ne=>ne.description).join(", ");return{description:te.description??`tuple(${ae})`,fixedSize:t.sumSerializerSizes(ee.map(ne=>ne.fixedSize)),maxSize:t.sumSerializerSizes(ee.map(ne=>ne.maxSize)),serialize:ne=>{if(ne.length!==ee.length)throw new u.InvalidNumberOfItemsError("tuple",ee.length,ne.length);return n.mergeBytes(ee.map((oe,ie)=>oe.serialize(ne[ie])))},deserialize:(ne,oe=0)=>{const ie=[];return ee.forEach(se=>{const[ue,le]=se.deserialize(ne,oe);ie.push(ue),oe=le}),[ie,oe]}}}return tuple.tuple=c,tuple}var unit={},hasRequiredUnit;function requireUnit(){if(hasRequiredUnit)return unit;hasRequiredUnit=1,Object.defineProperty(unit,"__esModule",{value:!0});function n(t={}){return{description:t.description??"unit",fixedSize:0,maxSize:0,serialize:()=>new Uint8Array,deserialize:(u,c=0)=>[void 0,c]}}return unit.unit=n,unit}var hasRequiredCjs$1;function requireCjs$1(){return hasRequiredCjs$1||(hasRequiredCjs$1=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});var t=requireCjs$5(),u=requireCjs$4(),c=requireCjs$2(),ee=requireArray(),te=requireBitArray(),ae=requireBool(),ne=requireBytes(),oe=requireDataEnum(),ie=requireErrors$7(),se=requireMap(),ue=requireNullable(),le=requireOption(),ce=requirePublicKey(),de=requireScalarEnum(),fe=requireSet(),pe=requireString(),me=requireStruct(),ge=requireTuple(),De=requireUnit(),Ce=requireMaxSerializerSizes(),we=requireSumSerializerSizes();n.array=ee.array,n.bitArray=te.bitArray,n.bool=ae.bool,n.bytes=ne.bytes,n.dataEnum=oe.dataEnum,n.EnumDiscriminatorOutOfRangeError=ie.EnumDiscriminatorOutOfRangeError,n.InvalidArrayLikeRemainderSizeError=ie.InvalidArrayLikeRemainderSizeError,n.InvalidDataEnumVariantError=ie.InvalidDataEnumVariantError,n.InvalidNumberOfItemsError=ie.InvalidNumberOfItemsError,n.InvalidScalarEnumVariantError=ie.InvalidScalarEnumVariantError,n.UnrecognizedArrayLikeSerializerSizeError=ie.UnrecognizedArrayLikeSerializerSizeError,n.map=se.map,n.nullable=ue.nullable,n.option=le.option,n.publicKey=ce.publicKey,n.scalarEnum=de.scalarEnum,n.set=fe.set,n.string=pe.string,n.struct=me.struct,n.tuple=ge.tuple,n.unit=De.unit,n.maxSerializerSizes=Ce.maxSerializerSizes,n.sumSerializerSizes=we.sumSerializerSizes,Object.keys(t).forEach(function(xe){xe!=="default"&&!n.hasOwnProperty(xe)&&Object.defineProperty(n,xe,{enumerable:!0,get:function(){return t[xe]}})}),Object.keys(u).forEach(function(xe){xe!=="default"&&!n.hasOwnProperty(xe)&&Object.defineProperty(n,xe,{enumerable:!0,get:function(){return u[xe]}})}),Object.keys(c).forEach(function(xe){xe!=="default"&&!n.hasOwnProperty(xe)&&Object.defineProperty(n,xe,{enumerable:!0,get:function(){return c[xe]}})})}(cjs$1)),cjs$1}var hasRequiredSerializersInternal;function requireSerializersInternal(){if(hasRequiredSerializersInternal)return serializersInternal;hasRequiredSerializersInternal=1,Object.defineProperty(serializersInternal,"__esModule",{value:!0});var n=requireCjs$1();const t=n.mapSerializer,u=n.fixSerializer,c=n.reverseSerializer,ee=n.mergeBytes,te=n.padBytes,ae=n.fixBytes,ne=n.utf8,oe=n.baseX,ie=n.base10,se=n.base58,ue=n.base64,le=n.base16,ce=n.bitArray,de=n.removeNullCharacters,fe=n.padNullCharacters,pe=n.Endian;return serializersInternal.Endian=pe,serializersInternal.base10=ie,serializersInternal.base16=le,serializersInternal.base58=se,serializersInternal.base64=ue,serializersInternal.baseX=oe,serializersInternal.bitArray=ce,serializersInternal.fixBytes=ae,serializersInternal.fixSerializer=u,serializersInternal.mapSerializer=t,serializersInternal.mergeBytes=ee,serializersInternal.padBytes=te,serializersInternal.padNullCharacters=fe,serializersInternal.removeNullCharacters=de,serializersInternal.reverseSerializer=c,serializersInternal.utf8=ne,serializersInternal}var Account={},UnexpectedAccountError={},SdkError={},UmiError={},hasRequiredUmiError;function requireUmiError(){if(hasRequiredUmiError)return UmiError;hasRequiredUmiError=1,Object.defineProperty(UmiError,"__esModule",{value:!0});let n=class extends Error{constructor(c,ee,te,ae){super(c);Ca(this,"name","UmiError");this.source=ee,this.sourceDetails=te,this.cause=ae,this.message=`${this.message}

Source: ${this.getFullSource()}${this.cause?`

Caused By: ${this.cause}`:""}
`}getCapitalizedSource(){return this.source==="sdk"||this.source==="rpc"?this.source.toUpperCase():this.source[0].toUpperCase()+this.source.slice(1)}getFullSource(){const c=this.getCapitalizedSource(),ee=this.sourceDetails?` > ${this.sourceDetails}`:"";return c+ee}toString(){return`[${this.name}] ${this.message}`}};return UmiError.UmiError=n,UmiError}var hasRequiredSdkError;function requireSdkError(){if(hasRequiredSdkError)return SdkError;hasRequiredSdkError=1,Object.defineProperty(SdkError,"__esModule",{value:!0});var n=requireUmiError();let t=class extends n.UmiError{constructor(ee,te){super(ee,"sdk",void 0,te);Ca(this,"name","SdkError")}};return SdkError.SdkError=t,SdkError}var hasRequiredUnexpectedAccountError;function requireUnexpectedAccountError(){if(hasRequiredUnexpectedAccountError)return UnexpectedAccountError;hasRequiredUnexpectedAccountError=1,Object.defineProperty(UnexpectedAccountError,"__esModule",{value:!0});var n=requireSdkError();let t=class extends n.SdkError{constructor(ee,te,ae){const ne=`The account at the provided address [${ee}] is not of the expected type [${te}].`;super(ne,ae);Ca(this,"name","UnexpectedAccountError")}};return UnexpectedAccountError.UnexpectedAccountError=t,UnexpectedAccountError}var AccountNotFoundError={},hasRequiredAccountNotFoundError;function requireAccountNotFoundError(){if(hasRequiredAccountNotFoundError)return AccountNotFoundError;hasRequiredAccountNotFoundError=1,Object.defineProperty(AccountNotFoundError,"__esModule",{value:!0});var n=requireSdkError();let t=class extends n.SdkError{constructor(ee,te,ae){const ne=`${te?`The account of type [${te}] was not found`:"No account was found"} at the provided address [${ee}].${ae?` ${ae}`:""}`;super(ne);Ca(this,"name","AccountNotFoundError")}};return AccountNotFoundError.AccountNotFoundError=t,AccountNotFoundError}var hasRequiredAccount;function requireAccount(){if(hasRequiredAccount)return Account;hasRequiredAccount=1,Object.defineProperty(Account,"__esModule",{value:!0});var n=requireUnexpectedAccountError(),t=requireAccountNotFoundError();const u=128;function c(te,ae){const{data:ne,publicKey:oe,...ie}=te;try{const[se]=ae.deserialize(ne);return{publicKey:oe,header:ie,...se}}catch(se){throw new n.UnexpectedAccountError(oe,ae.description,se)}}function ee(te,ae,ne){if(!te.exists)throw new t.AccountNotFoundError(te.publicKey,ae,ne)}return Account.ACCOUNT_HEADER_SIZE=u,Account.assertAccountExists=ee,Account.deserializeAccount=c,Account}var Amount={},BigInt$1={},hasRequiredBigInt;function requireBigInt(){if(hasRequiredBigInt)return BigInt$1;hasRequiredBigInt=1,Object.defineProperty(BigInt$1,"__esModule",{value:!0});const n=t=>(t=typeof t=="object"?t.toString():t,BigInt(t));return BigInt$1.createBigInt=n,BigInt$1}var UnexpectedAmountError={},hasRequiredUnexpectedAmountError;function requireUnexpectedAmountError(){if(hasRequiredUnexpectedAmountError)return UnexpectedAmountError;hasRequiredUnexpectedAmountError=1,Object.defineProperty(UnexpectedAmountError,"__esModule",{value:!0});var n=requireSdkError();let t=class extends n.SdkError{constructor(ee,te,ae){const ne=`Expected amount of type [${te} with ${ae} decimals] but got [${ee.identifier} with ${ee.decimals} decimals]. Ensure the provided Amount is of the expected type.`;super(ne);Ca(this,"name","UnexpectedAmountError");this.amount=ee,this.expectedIdentifier=te,this.expectedDecimals=ae}};return UnexpectedAmountError.UnexpectedAmountError=t,UnexpectedAmountError}var AmountMismatchError={},hasRequiredAmountMismatchError;function requireAmountMismatchError(){if(hasRequiredAmountMismatchError)return AmountMismatchError;hasRequiredAmountMismatchError=1,Object.defineProperty(AmountMismatchError,"__esModule",{value:!0});var n=requireSdkError();let t=class extends n.SdkError{constructor(ee,te,ae){const oe=`The SDK tried to execute an operation${ae?` [${ae}]`:""} on two amounts of different types: [${ee.identifier} with ${ee.decimals} decimals] and [${te.identifier} with ${te.decimals} decimals]. Provide both amounts in the same type to perform this operation.`;super(oe);Ca(this,"name","AmountMismatchError");this.left=ee,this.right=te,this.operation=ae}};return AmountMismatchError.AmountMismatchError=t,AmountMismatchError}var hasRequiredAmount;function requireAmount(){if(hasRequiredAmount)return Amount;hasRequiredAmount=1,Object.defineProperty(Amount,"__esModule",{value:!0});var n=requireCjs$1(),t=requireBigInt(),u=requireUnexpectedAmountError(),c=requireAmountMismatchError();const ee=(Fe,Ee,ke)=>({basisPoints:t.createBigInt(Fe),identifier:Ee,decimals:ke}),te=(Fe,Ee,ke)=>{const Ve=ee(BigInt(10)**BigInt(ke??0),Ee,ke);return De(Ve,Fe)},ae=(Fe,Ee=2)=>te(Fe,"%",Ee),ne=(Fe,Ee,ke)=>te(Fe,Ee??"splToken",ke??0),oe=Fe=>ee(Fe,"SOL",9),ie=Fe=>te(Fe,"SOL",9),se=Fe=>te(Fe,"USD",2),ue=(Fe,Ee,ke)=>Fe.identifier===Ee&&Fe.decimals===ke,le=Fe=>ue(Fe,"SOL",9),ce=(Fe,Ee)=>ue(Fe,Ee.identifier,Ee.decimals);function de(Fe,Ee,ke){if(!ue(Fe,Ee,ke))throw new u.UnexpectedAmountError(Fe,Ee,ke)}function fe(Fe){de(Fe,"SOL",9)}function pe(Fe,Ee,ke){if(!ce(Fe,Ee))throw new c.AmountMismatchError(Fe,Ee,ke)}const me=(Fe,Ee)=>(pe(Fe,Ee,"add"),{...Fe,basisPoints:Fe.basisPoints+Ee.basisPoints}),ge=(Fe,Ee)=>(pe(Fe,Ee,"subtract"),{...Fe,basisPoints:Fe.basisPoints-Ee.basisPoints}),De=(Fe,Ee)=>{if(typeof Ee=="bigint")return{...Fe,basisPoints:Fe.basisPoints*Ee};const[ke,Ve]=Ee.toString().split("."),ze=BigInt(ke+(Ve??"")),Ue=BigInt(10)**BigInt((Ve==null?void 0:Ve.length)??0);return{...Fe,basisPoints:Fe.basisPoints*ze/Ue}},Ce=(Fe,Ee)=>{if(typeof Ee=="bigint")return{...Fe,basisPoints:Fe.basisPoints/Ee};const[ke,Ve]=Ee.toString().split("."),ze=BigInt(ke+(Ve??"")),Ue=BigInt(10)**BigInt((Ve==null?void 0:Ve.length)??0);return{...Fe,basisPoints:Fe.basisPoints*Ue/ze}},we=Fe=>{const Ee=Fe.basisPoints;return{...Fe,basisPoints:Ee<0?-Ee:Ee}},xe=(Fe,Ee)=>(pe(Fe,Ee,"compare"),Fe.basisPoints>Ee.basisPoints?1:Fe.basisPoints<Ee.basisPoints?-1:0),Re=(Fe,Ee,ke)=>{ke=ke??ee(0,Fe.identifier,Fe.decimals),pe(Fe,Ee,"isEqualToAmount"),pe(Fe,ke,"isEqualToAmount");const Ve=we(ge(Fe,Ee));return Se(Ve,ke)},Be=(Fe,Ee)=>xe(Fe,Ee)<0,Se=(Fe,Ee)=>xe(Fe,Ee)<=0,Te=(Fe,Ee)=>xe(Fe,Ee)>0,Ae=(Fe,Ee)=>xe(Fe,Ee)>=0,he=Fe=>Fe.basisPoints===BigInt(0),ve=Fe=>Fe.basisPoints>=BigInt(0),ye=Fe=>Fe.basisPoints<BigInt(0),be=(Fe,Ee)=>{let ke=Fe.basisPoints.toString();if(Fe.decimals===0)return ke;const Ve=ke.startsWith("-")?"-":"";ke=ke.replace("-",""),ke=ke.padStart(Fe.decimals+1,"0");const ze=ke.slice(0,-Fe.decimals);let Ue=ke.slice(-Fe.decimals);return Ee!==void 0&&(Ue=Ue.slice(0,Ee)),`${Ve+ze}.${Ue}`},_e=Fe=>parseFloat(be(Fe)),Me=(Fe,Ee)=>{const ke=be(Fe,Ee);switch(Fe.identifier){case"%":return`${ke}%`;case"splToken":return/^1(\.0+)?$/.test(ke)?`${ke} Token`:`${ke} Tokens`;default:if(Fe.identifier.startsWith("splToken.")){const[,Ve]=Fe.identifier.split(".");return`${Ve} ${ke}`}return`${Fe.identifier} ${ke}`}},Ie=(Fe,Ee,ke)=>n.mapSerializer(Fe,Ve=>Ve.basisPoints>Number.MAX_SAFE_INTEGER?Ve.basisPoints:Number(Ve.basisPoints),Ve=>ee(Ve,Ee,ke));return Amount.absoluteAmount=we,Amount.addAmounts=me,Amount.amountToNumber=_e,Amount.amountToString=be,Amount.assertAmount=de,Amount.assertSameAmounts=pe,Amount.assertSolAmount=fe,Amount.compareAmounts=xe,Amount.createAmount=ee,Amount.createAmountFromDecimals=te,Amount.displayAmount=Me,Amount.divideAmount=Ce,Amount.isAmount=ue,Amount.isEqualToAmount=Re,Amount.isGreaterThanAmount=Te,Amount.isGreaterThanOrEqualToAmount=Ae,Amount.isLessThanAmount=Be,Amount.isLessThanOrEqualToAmount=Se,Amount.isNegativeAmount=ye,Amount.isPositiveAmount=ve,Amount.isSolAmount=le,Amount.isZeroAmount=he,Amount.lamports=oe,Amount.mapAmountSerializer=Ie,Amount.multiplyAmount=De,Amount.percentAmount=ae,Amount.sameAmounts=ce,Amount.sol=ie,Amount.subtractAmounts=ge,Amount.tokenAmount=ne,Amount.usd=se,Amount}var Cluster={},hasRequiredCluster;function requireCluster(){if(hasRequiredCluster)return Cluster;hasRequiredCluster=1,Object.defineProperty(Cluster,"__esModule",{value:!0});const n=["api.mainnet-beta.solana.com","ssc-dao.genesysgo.net"],t=["api.devnet.solana.com","psytrbhymqlkfrhudd.dev.genesysgo.net"],u=["api.testnet.solana.com"],c=["localhost","127.0.0.1"],ee=te=>{const ae=new URL(te).hostname;return n.includes(ae)?"mainnet-beta":t.includes(ae)?"devnet":u.includes(ae)?"testnet":c.includes(ae)?"localnet":te.includes("mainnet")?"mainnet-beta":te.includes("devnet")?"devnet":te.includes("testnet")?"testnet":te.includes("local")?"localnet":"custom"};return Cluster.resolveClusterFromEndpoint=ee,Cluster}var Context={},DownloaderInterface={},InterfaceImplementationMissingError={},hasRequiredInterfaceImplementationMissingError;function requireInterfaceImplementationMissingError(){if(hasRequiredInterfaceImplementationMissingError)return InterfaceImplementationMissingError;hasRequiredInterfaceImplementationMissingError=1,Object.defineProperty(InterfaceImplementationMissingError,"__esModule",{value:!0});var n=requireSdkError();let t=class extends n.SdkError{constructor(ee,te){const ae=ee.replace(/Interface$/,""),ne=`Tried using ${ee} but no implementation of that interface was found. Make sure an implementation is registered, e.g. via "context.${te} = new My${ae}();".`;super(ne);Ca(this,"name","InterfaceImplementationMissingError")}};return InterfaceImplementationMissingError.InterfaceImplementationMissingError=t,InterfaceImplementationMissingError}var hasRequiredDownloaderInterface;function requireDownloaderInterface(){if(hasRequiredDownloaderInterface)return DownloaderInterface;hasRequiredDownloaderInterface=1,Object.defineProperty(DownloaderInterface,"__esModule",{value:!0});var n=requireInterfaceImplementationMissingError();function t(){const u=()=>{throw new n.InterfaceImplementationMissingError("DownloaderInterface","downloader")};return{download:u,downloadJson:u}}return DownloaderInterface.createNullDownloader=t,DownloaderInterface}var EddsaInterface={},hasRequiredEddsaInterface;function requireEddsaInterface(){if(hasRequiredEddsaInterface)return EddsaInterface;hasRequiredEddsaInterface=1,Object.defineProperty(EddsaInterface,"__esModule",{value:!0});var n=requireInterfaceImplementationMissingError();function t(){const u=()=>{throw new n.InterfaceImplementationMissingError("EddsaInterface","eddsa")};return{generateKeypair:u,createKeypairFromSecretKey:u,createKeypairFromSeed:u,createKeypairFromFile:u,createKeypairFromSolanaConfig:u,isOnCurve:u,findPda:u,sign:u,verify:u}}return EddsaInterface.createNullEddsa=t,EddsaInterface}var HttpInterface={},hasRequiredHttpInterface;function requireHttpInte